====================================================================================================
ğŸ“¦ SPOTITFORME - TÃœM ADMIN PANELÄ° VE ALT SAYFALAR
====================================================================================================

ğŸ¯ BaÅŸlangÄ±Ã§: app/shop/dashboard/page.tsx
ğŸ“… Tarih: 15.02.2026 00:34:00
ğŸ“Š Toplam: 17 dosya
ğŸŒ Bulunan Sayfalar: 0

====================================================================================================
ğŸ—ºï¸  SAYFA HARÄ°TASI
====================================================================================================

â€¢ /admin/ads
â€¢ /admin/ads/create-manual
â€¢ /admin/adsense
â€¢ /admin/test
â€¢ /admin/users
â€¢ /shop/dashboard

====================================================================================================
ğŸ“± APP SAYFALARI (page.tsx)
====================================================================================================

ğŸ“„ app/admin/ads/create-manual/page.tsx
ğŸ“Š 137 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/admin/ads/create-manual/page.tsx
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';

export default function CreateManualAdPage() {
  const router = useRouter();
  const [formData, setFormData] = useState({
    name: '',
    ad_type: 'manual',
    position: 'sidebar',
    size: '300x250',
    custom_html: '',
    advertiser_name: '',
    advertiser_url: '',
    advertiser_email: '',
    start_date: '',
    end_date: '',
    daily_budget: '',
    total_budget: '',
    status: 'draft'
  });

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    // Supabase'e kaydet
    router.push('/admin/ads');
  };

  return (
    <div className="p-6">
      <h1 className="text-2xl font-bold mb-6">Yeni Manuel Reklam Ekle</h1>
      
      <form onSubmit={handleSubmit} className="space-y-6 max-w-2xl">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium mb-1">Reklam AdÄ± *</label>
            <input
              type="text"
              required
              className="w-full p-2 border rounded"
              value={formData.name}
              onChange={(e) => setFormData({...formData, name: e.target.value})}
            />
          </div>
          
          <div>
            <label className="block text-sm font-medium mb-1">Pozisyon *</label>
            <select
              className="w-full p-2 border rounded"
              value={formData.position}
              onChange={(e) => setFormData({...formData, position: e.target.value})}
            >
              <option value="header">Ana Sayfa Ãœst (728x90)</option>
              <option value="sidebar">SaÄŸ Sidebar (300x250)</option>
              <option value="inline">Ä°Ã§erik ArasÄ± (728x90)</option>
              <option value="mobile">Mobil Banner (320x50)</option>
              <option value="popup">Popup (400x300)</option>
            </select>
          </div>
        </div>

        <div>
          <label className="block text-sm font-medium mb-1">Reklamveren Bilgileri</label>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
            <input
              type="text"
              placeholder="Åirket AdÄ±"
              className="p-2 border rounded"
              value={formData.advertiser_name}
              onChange={(e) => setFormData({...formData, advertiser_name: e.target.value})}
            />
            <input
              type="url"
              placeholder="Website URL"
              className="p-2 border rounded"
              value={formData.advertiser_url}
              onChange={(e) => setFormData({...formData, advertiser_url: e.target.value})}
            />
          </div>
        </div>

        <div>
          <label className="block text-sm font-medium mb-1">Reklam HTML Kodu</label>
          <textarea
            rows={8}
            className="w-full p-2 border rounded font-mono text-sm"
            placeholder='<a href="https://example.com"><img src="https://example.com/banner.jpg" alt="Reklam" /></a>'
            value={formData.custom_html}
            onChange={(e) => setFormData({...formData, custom_html: e.target.value})}
          />
          <p className="text-sm text-gray-500 mt-1">
            HTML5 banner kodu veya basit HTML. Boyutlara dikkat edin.
          </p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium mb-1">BaÅŸlangÄ±Ã§ Tarihi</label>
            <input
              type="date"
              className="w-full p-2 border rounded"
              value={formData.start_date}
              onChange={(e) => setFormData({...formData, start_date: e.target.value})}
            />
          </div>
          <div>
            <label className="block text-sm font-medium mb-1">BitiÅŸ Tarihi</label>
            <input
              type="date"
              className="w-full p-2 border rounded"
              value={formData.end_date}
              onChange={(e) => setFormData({...formData, end_date: e.target.value})}
            />
          </div>
        </div>

        <div className="flex justify-end space-x-4">
          <button
            type="button"
            onClick={() => router.back()}
            className="px-4 py-2 border rounded-lg hover:bg-gray-100"
          >
            Ä°ptal
          </button>
          <button
            type="submit"
            className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
          >
            ReklamÄ± Kaydet
          </button>
        </div>
      </form>
    </div>
  );
}

ğŸ“„ app/admin/ads/page.tsx
ğŸ“Š 156 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/admin/ads/page.tsx - Reklam Ana SayfasÄ±
'use client';

import { useState } from 'react';
import Link from 'next/link';

export default function AdminAdsPage() {
  const [activeTab, setActiveTab] = useState('overview');

  return (
    <div className="p-6">
      <h1 className="text-2xl font-bold mb-6">Reklam YÃ¶netimi</h1>
      
      <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
        <div className="bg-white p-4 rounded-lg shadow">
          <h3 className="font-semibold">Toplam Gelir</h3>
          <p className="text-2xl font-bold text-green-600">â‚º0.00</p>
        </div>
        <div className="bg-white p-4 rounded-lg shadow">
          <h3 className="font-semibold">Aktif Reklamlar</h3>
          <p className="text-2xl font-bold text-blue-600">0</p>
        </div>
        <div className="bg-white p-4 rounded-lg shadow">
          <h3 className="font-semibold">BugÃ¼nkÃ¼ GÃ¶sterim</h3>
          <p className="text-2xl font-bold text-purple-600">0</p>
        </div>
        <div className="bg-white p-4 rounded-lg shadow">
          <h3 className="font-semibold">BugÃ¼nkÃ¼ TÄ±klama</h3>
          <p className="text-2xl font-bold text-orange-600">0</p>
        </div>
      </div>

      <div className="flex space-x-4 mb-6">
        <button
          className={`px-4 py-2 rounded-lg ${activeTab === 'overview' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}
          onClick={() => setActiveTab('overview')}
        >
          Genel BakÄ±ÅŸ
        </button>
        <button
          className={`px-4 py-2 rounded-lg ${activeTab === 'adsense' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}
          onClick={() => setActiveTab('adsense')}
        >
          AdSense YÃ¶netimi
        </button>
        <button
          className={`px-4 py-2 rounded-lg ${activeTab === 'manual' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}
          onClick={() => setActiveTab('manual')}
        >
          Manuel Reklamlar
        </button>
        <button
          className={`px-4 py-2 rounded-lg ${activeTab === 'advertisers' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}
          onClick={() => setActiveTab('advertisers')}
        >
          Reklamverenler
        </button>
      </div>

      {activeTab === 'overview' && (
        <div className="bg-white p-6 rounded-lg shadow">
          <h2 className="text-xl font-bold mb-4">HÄ±zlÄ± Eylemler</h2>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <Link href="/admin/ads/adsense-setup" className="bg-blue-50 p-4 rounded-lg border border-blue-200 hover:bg-blue-100 transition">
              <h3 className="font-semibold">AdSense Kurulum</h3>
              <p className="text-sm text-gray-600">Google AdSense entegrasyonu</p>
            </Link>
            <Link href="/admin/ads/create-manual" className="bg-green-50 p-4 rounded-lg border border-green-200 hover:bg-green-100 transition">
              <h3 className="font-semibold">Manuel Reklam Ekle</h3>
              <p className="text-sm text-gray-600">Kendi reklamÄ±nÄ±zÄ± ekleyin</p>
            </Link>
            <Link href="/admin/ads/placements" className="bg-purple-50 p-4 rounded-lg border border-purple-200 hover:bg-purple-100 transition">
              <h3 className="font-semibold">Reklam YerleÅŸimleri</h3>
              <p className="text-sm text-gray-600">Reklam pozisyonlarÄ±nÄ± yÃ¶netin</p>
            </Link>
            <Link href="/admin/ads/reports" className="bg-orange-50 p-4 rounded-lg border border-orange-200 hover:bg-orange-100 transition">
              <h3 className="font-semibold">Raporlar</h3>
              <p className="text-sm text-gray-600">Performans raporlarÄ±</p>
            </Link>
          </div>
        </div>
      )}

      {activeTab === 'adsense' && (
        <div className="bg-white p-6 rounded-lg shadow">
          <h2 className="text-xl font-bold mb-4">AdSense YÃ¶netimi</h2>
          <div className="space-y-4">
            <div className="p-4 border rounded-lg">
              <h3 className="font-semibold">AdSense Durumu</h3>
              <div className="flex items-center space-x-2 mt-2">
                <div className="w-3 h-3 rounded-full bg-red-500"></div>
                <span>AdSense aktif deÄŸil</span>
              </div>
            </div>
            
            <div className="p-4 border rounded-lg">
              <h3 className="font-semibold mb-2">AdSense Kurulumu</h3>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium mb-1">AdSense Client ID</label>
                  <input
                    type="text"
                    placeholder="ca-pub-xxxxxxxxxxxxxxxx"
                    className="w-full p-2 border rounded"
                  />
                  <p className="text-sm text-gray-500 mt-1">Google AdSense panelinden alÄ±nan client ID</p>
                </div>
                <button className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                  AdSense'i Aktif Et
                </button>
              </div>
            </div>
          </div>
        </div>
      )}

      {activeTab === 'manual' && (
        <div className="bg-white p-6 rounded-lg shadow">
          <h2 className="text-xl font-bold mb-4">Manuel Reklam YÃ¶netimi</h2>
          <div className="space-y-4">
            <div className="flex justify-between items-center">
              <h3 className="font-semibold">Mevcut Reklamlar</h3>
              <Link href="/admin/ads/create-manual" className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                Yeni Reklam Ekle
              </Link>
            </div>
            
            {/* Reklam listesi buraya gelecek */}
            <div className="text-center py-8 text-gray-500">
              HenÃ¼z manuel reklam eklenmemiÅŸ
            </div>
          </div>
        </div>
      )}

      {activeTab === 'advertisers' && (
        <div className="bg-white p-6 rounded-lg shadow">
          <h2 className="text-xl font-bold mb-4">Reklamveren YÃ¶netimi</h2>
          <div className="space-y-4">
            <div className="flex justify-between items-center">
              <h3 className="font-semibold">Reklamverenler</h3>
              <button className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                Yeni Reklamveren Ekle
              </button>
            </div>
            
            {/* Reklamveren listesi buraya gelecek */}
            <div className="text-center py-8 text-gray-500">
              HenÃ¼z reklamveren eklenmemiÅŸ
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

ğŸ“„ app/admin/adsense/page.tsx
ğŸ“Š 609 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/admin/adsense/page.tsx - DÃœZELTMÄ°Å VERSÄ°YON
'use client'

import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'
import AdUnitManager from '@/components/admin/AdUnitManager'
import AdPerformance from '@/components/admin/AdPerformance'
import Link from 'next/link'

// AdUnit tipi
interface AdUnit {
  id: string
  name: string
  type: 'display' | 'in-article' | 'in-feed'
  size: string
  position: string
  status: 'active' | 'paused'
  revenue: number
}

// AdSense Config tipi
interface AdSenseConfig {
  clientId: string
  isActive: boolean
  autoAds: boolean
  adUnits: AdUnit[]
  lastSync?: string
}

export default function AdSensePage() {
  const [config, setConfig] = useState<AdSenseConfig>({
    clientId: process.env.NEXT_PUBLIC_ADSENSE_CLIENT_ID || '',
    isActive: false,
    autoAds: true,
    adUnits: [
      {
        id: 'ad-header-001',
        name: 'Header Banner',
        type: 'display',
        size: '728x90',
        position: 'header',
        status: 'active',
        revenue: 45.50
      },
      {
        id: 'ad-sidebar-001',
        name: 'Sidebar Rectangle',
        type: 'display',
        size: '300x250',
        position: 'sidebar',
        status: 'active',
        revenue: 32.75
      },
      {
        id: 'ad-article-001',
        name: 'Article Inline',
        type: 'in-article',
        size: '336x280',
        position: 'content-middle',
        status: 'paused',
        revenue: 18.20
      }
    ]
  })
  
  const [loading, setLoading] = useState(true)
  const [saving, setSaving] = useState(false)
  // DÃœZELTME: 'code' tab'Ä±nÄ± da ekle
  const [activeTab, setActiveTab] = useState<'settings' | 'units' | 'performance' | 'code'>('settings')

  useEffect(() => {
    fetchAdSenseConfig()
  }, [])

  const fetchAdSenseConfig = async () => {
    try {
      setLoading(true)
      
      // Database'den config'i Ã§ek
      const { data } = await supabase
        .from('site_settings')
        .select('*')
        .eq('key', 'adsense_config')
        .single()

      if (data && data.value) {
        const savedConfig = JSON.parse(data.value)
        setConfig(prev => ({
          ...prev,
          ...savedConfig,
          // Database'de yoksa varsayÄ±lan deÄŸerleri koru
          clientId: savedConfig.clientId || prev.clientId,
          isActive: savedConfig.isActive !== undefined ? savedConfig.isActive : prev.isActive,
          autoAds: savedConfig.autoAds !== undefined ? savedConfig.autoAds : prev.autoAds,
          adUnits: savedConfig.adUnits || prev.adUnits,
          lastSync: savedConfig.lastSync
        }))
      }
    } catch (error) {
      console.error('AdSense config yÃ¼klenemedi:', error)
      // Hata durumunda varsayÄ±lan config ile devam et
    } finally {
      setLoading(false)
    }
  }

  const saveConfig = async () => {
    setSaving(true)
    try {
      const configToSave = {
        ...config,
        lastSync: new Date().toISOString()
      }

      const { error } = await supabase
        .from('site_settings')
        .upsert({
          key: 'adsense_config',
          value: JSON.stringify(configToSave),
          updated_at: new Date().toISOString()
        }, {
          onConflict: 'key'
        })

      if (error) throw error

      // Admin log'a kaydet
      await supabase
        .from('admin_logs')
        .insert({
          action: 'adsense_config_updated',
          details: { 
            config: configToSave,
            timestamp: new Date().toISOString()
          }
        })

      alert('âœ… AdSense ayarlarÄ± baÅŸarÄ±yla kaydedildi!')
      
    } catch (error) {
      console.error('AdSense config kaydedilemedi:', error)
      alert('âŒ KayÄ±t sÄ±rasÄ±nda hata oluÅŸtu. LÃ¼tfen tekrar deneyin.')
    } finally {
      setSaving(false)
    }
  }

  const handleAdUnitsUpdate = (updatedUnits: AdUnit[]) => {
    setConfig(prev => ({
      ...prev,
      adUnits: updatedUnits
    }))
  }

  const generateAdCode = (type: 'header' | 'auto' | 'unit') => {
    switch (type) {
      case 'header':
        return `<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${config.clientId}"></script>`
      
      case 'auto':
        return `<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "${config.clientId}",
    enable_page_level_ads: true,
    overlays: {bottom: true}
  });
</script>`
      
      case 'unit':
        return `<ins class="adsbygoogle"
  style="display:block"
  data-ad-client="${config.clientId}"
  data-ad-slot="1234567890"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({});
</script>`
      
      default:
        return ''
    }
  }

  const copyToClipboard = (text: string) => {
    navigator.clipboard.writeText(text)
    alert('KopyalandÄ±!')
  }

  const testAdSense = async () => {
    if (!config.clientId) {
      alert('Ã–nce AdSense Client ID girin')
      return
    }

    try {
      const response = await fetch('/api/adsense/test', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ clientId: config.clientId })
      })

      const data = await response.json()
      
      if (data.success) {
        alert('âœ… AdSense baÄŸlantÄ±sÄ± baÅŸarÄ±lÄ±!')
      } else {
        alert('âŒ AdSense baÄŸlantÄ±sÄ± baÅŸarÄ±sÄ±z: ' + data.message)
      }
    } catch (error) {
      alert('âŒ Test sÄ±rasÄ±nda hata oluÅŸtu')
    }
  }

  if (loading) {
    return (
      <div className="min-h-screen bg-gray-50 flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto"></div>
          <p className="mt-4 text-gray-600">AdSense ayarlarÄ± yÃ¼kleniyor...</p>
        </div>
      </div>
    )
  }

  return (
    <div className="space-y-6">
      {/* BaÅŸlÄ±k ve Navigasyon */}
      <div className="flex flex-col md:flex-row md:items-center justify-between">
        <div>
          <h1 className="text-2xl font-bold text-gray-900">Google AdSense YÃ¶netimi</h1>
          <p className="text-gray-600">Reklam ayarlarÄ±nÄ±zÄ± buradan yÃ¶netin ve takip edin</p>
        </div>
        
        <div className="flex space-x-3 mt-4 md:mt-0">
          <button
            onClick={testAdSense}
            className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium"
          >
            ğŸ”— BaÄŸlantÄ±yÄ± Test Et
          </button>
          <Link
            href="https://adsense.google.com"
            target="_blank"
            className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium flex items-center"
          >
            ğŸŒ AdSense'e Git
          </Link>
        </div>
      </div>

      {/* Durum GÃ¶stergesi */}
      <div className={`p-4 rounded-lg ${config.isActive ? 'bg-green-50 border border-green-200' : 'bg-yellow-50 border border-yellow-200'}`}>
        <div className="flex items-center justify-between">
          <div className="flex items-center space-x-3">
            <div className={`w-3 h-3 rounded-full ${config.isActive ? 'bg-green-500' : 'bg-yellow-500'}`} />
            <div>
              <p className="font-medium">
                AdSense {config.isActive ? 'Aktif' : 'Devre DÄ±ÅŸÄ±'}
              </p>
              <p className="text-sm text-gray-600">
                {config.isActive 
                  ? 'Reklamlar sitenizde gÃ¶steriliyor' 
                  : 'Reklamlar ÅŸu anda gÃ¶sterilmiyor'}
              </p>
            </div>
          </div>
          <button
            onClick={() => setConfig({...config, isActive: !config.isActive})}
            className={`px-4 py-2 rounded-lg font-medium ${
              config.isActive
                ? 'bg-red-100 hover:bg-red-200 text-red-700'
                : 'bg-green-100 hover:bg-green-200 text-green-700'
            }`}
          >
            {config.isActive ? 'ReklamlarÄ± Durdur' : 'ReklamlarÄ± BaÅŸlat'}
          </button>
        </div>
      </div>

      {/* Tab Navigation */}
      <div className="bg-white rounded-xl shadow">
        <div className="border-b">
          <nav className="flex -mb-px">
            {[
              { id: 'settings' as const, name: 'Temel Ayarlar', icon: 'âš™ï¸' },
              { id: 'units' as const, name: 'Reklam Ãœniteleri', icon: 'ğŸ“º' },
              { id: 'performance' as const, name: 'Performans', icon: 'ğŸ“Š' },
              { id: 'code' as const, name: 'Kodlar', icon: 'ğŸ’»' }
            ].map((tab) => (
              <button
                key={tab.id}
                onClick={() => setActiveTab(tab.id)}
                className={`flex-1 py-4 text-center font-medium border-b-2 ${
                  activeTab === tab.id
                    ? 'border-blue-600 text-blue-600'
                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                }`}
              >
                <span className="mr-2">{tab.icon}</span>
                {tab.name}
              </button>
            ))}
          </nav>
        </div>

        {/* Tab Content */}
        <div className="p-6">
          {/* AYARLAR TAB */}
          {activeTab === 'settings' && (
            <div className="space-y-6">
              <div>
                <h2 className="text-lg font-bold text-gray-900 mb-4">AdSense Kimlik Bilgileri</h2>
                
                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      AdSense Client ID *
                    </label>
                    <input
                      type="text"
                      value={config.clientId}
                      onChange={(e) => setConfig({...config, clientId: e.target.value})}
                      placeholder="ca-pub-xxxxxxxxxxxxxxxx"
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    />
                    <p className="text-sm text-gray-500 mt-1">
                      Google AdSense hesabÄ±nÄ±zdaki Publisher ID
                    </p>
                  </div>

                  <div className="grid md:grid-cols-2 gap-6">
                    <div className="space-y-4">
                      <h3 className="font-medium text-gray-900">Reklam AyarlarÄ±</h3>
                      
                      <div className="flex items-center space-x-3">
                        <input
                          type="checkbox"
                          checked={config.autoAds}
                          onChange={(e) => setConfig({...config, autoAds: e.target.checked})}
                          className="w-4 h-4 text-blue-600"
                          id="autoAds"
                        />
                        <label htmlFor="autoAds" className="text-sm font-medium text-gray-700">
                          Otomatik Reklamlar
                        </label>
                        <span className="text-xs text-gray-500">
                          (Google en iyi yerlere reklam yerleÅŸtirir)
                        </span>
                      </div>

                      <div className="flex items-center space-x-3">
                        <input
                          type="checkbox"
                          checked={config.isActive}
                          onChange={(e) => setConfig({...config, isActive: e.target.checked})}
                          className="w-4 h-4 text-blue-600"
                          id="isActive"
                        />
                        <label htmlFor="isActive" className="text-sm font-medium text-gray-700">
                          ReklamlarÄ± Aktif Et
                        </label>
                      </div>
                    </div>

                    <div className="space-y-4">
                      <h3 className="font-medium text-gray-900">GeliÅŸmiÅŸ Ayarlar</h3>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          GDPR UyumluluÄŸu
                        </label>
                        <select className="w-full px-4 py-2 border border-gray-300 rounded-lg">
                          <option>KullanÄ±cÄ± onayÄ± iste</option>
                          <option>Otomatik kabul et</option>
                          <option>Sadece AB dÄ±ÅŸÄ±</option>
                        </select>
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Reklam FrekansÄ±
                        </label>
                        <select className="w-full px-4 py-2 border border-gray-300 rounded-lg">
                          <option>Normal</option>
                          <option>DÃ¼ÅŸÃ¼k (daha az reklam)</option>
                          <option>YÃ¼ksek (maksimum gelir)</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              {/* Kaydet Butonu */}
              <div className="flex justify-end pt-6 border-t">
                <button
                  onClick={saveConfig}
                  disabled={saving || !config.clientId}
                  className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-8 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  {saving ? 'Kaydediliyor...' : 'AyarlarÄ± Kaydet'}
                </button>
              </div>
            </div>
          )}

          {/* REKLAM ÃœNÄ°TELERÄ° TAB */}
          {activeTab === 'units' && (
            <div>
              <div className="mb-6">
                <h2 className="text-lg font-bold text-gray-900 mb-2">Reklam Ãœnite YÃ¶netimi</h2>
                <p className="text-gray-600">
                  Reklam Ã¼nitelerinizi ekleyin, dÃ¼zenleyin ve yÃ¶netin
                </p>
              </div>
              
              <AdUnitManager 
                adUnits={config.adUnits}
                onUpdate={handleAdUnitsUpdate}
                clientId={config.clientId}
              />
              
              <div className="mt-6 bg-gray-50 p-4 rounded-lg">
                <h3 className="font-medium text-gray-900 mb-2">ğŸ’¡ Ä°puÃ§larÄ±</h3>
                <ul className="text-sm text-gray-600 space-y-1">
                  <li>â€¢ "Display" reklamlar genel amaÃ§lÄ±dÄ±r, her yerde kullanÄ±labilir</li>
                  <li>â€¢ "In-article" reklamlar makale iÃ§eriÄŸine gÃ¶re optimize edilir</li>
                  <li>â€¢ "In-feed" reklamlar haber akÄ±ÅŸÄ±na entegre olur</li>
                  <li>â€¢ 300x250 boyutu (Medium Rectangle) en yÃ¼ksek tÄ±klama oranÄ±na sahiptir</li>
                </ul>
              </div>
            </div>
          )}

          {/* PERFORMANS TAB */}
          {activeTab === 'performance' && (
            <div>
              <div className="mb-6">
                <h2 className="text-lg font-bold text-gray-900 mb-2">Reklam PerformansÄ±</h2>
                <p className="text-gray-600">
                  ReklamlarÄ±nÄ±zÄ±n performansÄ±nÄ± takip edin ve optimize edin
                </p>
              </div>
              
              <AdPerformance />
              
              <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                <div className="bg-white border border-gray-200 rounded-lg p-4">
                  <h3 className="font-medium text-gray-900 mb-2">ğŸ“ˆ Performans Ä°puÃ§larÄ±</h3>
                  <ul className="text-sm text-gray-600 space-y-2">
                    <li>â€¢ CTR %1'in altÄ±ndaysa reklam pozisyonunu deÄŸiÅŸtirin</li>
                    <li>â€¢ RPM â‚º5'in altÄ±ndaysa reklam formatÄ±nÄ± gÃ¶zden geÃ§irin</li>
                    <li>â€¢ Mobile trafik genellikle daha yÃ¼ksek tÄ±klama oranÄ±na sahiptir</li>
                  </ul>
                </div>
                
                <div className="bg-white border border-gray-200 rounded-lg p-4">
                  <h3 className="font-medium text-gray-900 mb-2">ğŸ¯ Optimizasyon</h3>
                  <ul className="text-sm text-gray-600 space-y-2">
                    <li>â€¢ En Ã§ok tÄ±klanan reklam boyutu: 300x250</li>
                    <li>â€¢ En yÃ¼ksek RPM: 970x250 (Leaderboard)</li>
                    <li>â€¢ En iyi pozisyon: Ä°Ã§erik sonu</li>
                  </ul>
                </div>
                
                <div className="bg-white border border-gray-200 rounded-lg p-4">
                  <h3 className="font-medium text-gray-900 mb-2">âš ï¸ Dikkat Edilecekler</h3>
                  <ul className="text-sm text-gray-600 space-y-2">
                    <li>â€¢ Sayfa baÅŸÄ±na 3'ten fazla reklam koymayÄ±n</li>
                    <li>â€¢ Pop-up reklamlar kullanÄ±cÄ± deneyimini bozar</li>
                    <li>â€¢ Reklam ile iÃ§erik oranÄ± %30'u geÃ§memeli</li>
                  </ul>
                </div>
              </div>
            </div>
          )}

          {/* KODLAR TAB - HATA DÃœZELTÄ°LDÄ° */}
          {activeTab === 'code' && (
            <div className="space-y-6">
              <div>
                <h2 className="text-lg font-bold text-gray-900 mb-4">AdSense KodlarÄ±</h2>
                <p className="text-gray-600 mb-6">
                  AÅŸaÄŸÄ±daki kodlarÄ± ilgili yerlere ekleyerek AdSense'i aktif edin
                </p>
              </div>

              {/* Head Script */}
              <div className="bg-gray-900 rounded-lg overflow-hidden">
                <div className="bg-gray-800 px-4 py-3 flex justify-between items-center">
                  <div>
                    <h3 className="font-medium text-white">Head Script</h3>
                    <p className="text-gray-400 text-sm">HTML &lt;head&gt; tag'i iÃ§ine ekleyin</p>
                  </div>
                  <button
                    onClick={() => copyToClipboard(generateAdCode('header'))}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm"
                  >
                    Kopyala
                  </button>
                </div>
                <pre className="p-4 text-gray-300 text-sm overflow-x-auto">
                  {generateAdCode('header')}
                </pre>
              </div>

              {/* Auto Ads Script */}
              <div className="bg-gray-900 rounded-lg overflow-hidden">
                <div className="bg-gray-800 px-4 py-3 flex justify-between items-center">
                  <div>
                    <h3 className="font-medium text-white">Auto Ads Script</h3>
                    <p className="text-gray-400 text-sm">&lt;body&gt; tag'inin hemen altÄ±na ekleyin</p>
                  </div>
                  <button
                    onClick={() => copyToClipboard(generateAdCode('auto'))}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm"
                  >
                    Kopyala
                  </button>
                </div>
                <pre className="p-4 text-gray-300 text-sm overflow-x-auto">
                  {generateAdCode('auto')}
                </pre>
              </div>

              {/* Manual Ad Unit */}
              <div className="bg-gray-900 rounded-lg overflow-hidden">
                <div className="bg-gray-800 px-4 py-3 flex justify-between items-center">
                  <div>
                    <h3 className="font-medium text-white">Manual Ad Unit</h3>
                    <p className="text-gray-400 text-sm">Ä°Ã§erik iÃ§inde kullanmak iÃ§in</p>
                  </div>
                  <button
                    onClick={() => copyToClipboard(generateAdCode('unit'))}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm"
                  >
                    Kopyala
                  </button>
                </div>
                <pre className="p-4 text-gray-300 text-sm overflow-x-auto">
                  {generateAdCode('unit')}
                </pre>
              </div>

              {/* Kurulum TalimatlarÄ± */}
              <div className="bg-blue-50 border border-blue-200 rounded-lg p-6">
                <h3 className="font-bold text-blue-900 mb-3">ğŸ“‹ Kurulum TalimatlarÄ±</h3>
                <ol className="space-y-3 text-blue-800">
                  <li className="flex items-start">
                    <span className="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 flex-shrink-0">1</span>
                    <span>YukarÄ±daki "Head Script" kodunu <code className="bg-white px-2 py-1 rounded">app/layout.tsx</code> dosyasÄ±ndaki &lt;head&gt; iÃ§ine ekleyin</span>
                  </li>
                  <li className="flex items-start">
                    <span className="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 flex-shrink-0">2</span>
                    <span>"Auto Ads Script" kodunu &lt;body&gt; tag'inin hemen altÄ±na ekleyin</span>
                  </li>
                  <li className="flex items-start">
                    <span className="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 flex-shrink-0">3</span>
                    <span>Manual ad unit kodunu istediÄŸiniz sayfalara ekleyin</span>
                  </li>
                  <li className="flex items-start">
                    <span className="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 flex-shrink-0">4</span>
                    <span>Google AdSense'den siteyi doÄŸrulayÄ±n (24-48 saat sÃ¼rebilir)</span>
                  </li>
                </ol>
              </div>
            </div>
          )}
        </div>
      </div>

      {/* HÄ±zlÄ± Ä°statistikler */}
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div className="bg-white rounded-lg shadow p-4">
          <p className="text-sm text-gray-600">Aktif Reklam</p>
          <p className="text-2xl font-bold text-gray-900">
            {config.adUnits.filter(u => u.status === 'active').length}
          </p>
        </div>
        <div className="bg-white rounded-lg shadow p-4">
          <p className="text-sm text-gray-600">Toplam Gelir</p>
          <p className="text-2xl font-bold text-gray-900">
            {config.adUnits.reduce((sum, unit) => sum + unit.revenue, 0).toFixed(2)} â‚º
          </p>
        </div>
        <div className="bg-white rounded-lg shadow p-4">
          <p className="text-sm text-gray-600">Ort. RPM</p>
          <p className="text-2xl font-bold text-gray-900">
            {(config.adUnits.reduce((sum, unit) => sum + unit.revenue, 0) / config.adUnits.length || 0).toFixed(2)} â‚º
          </p>
        </div>
        <div className="bg-white rounded-lg shadow p-4">
          <p className="text-sm text-gray-600">Durum</p>
          <p className={`text-2xl font-bold ${config.isActive ? 'text-green-600' : 'text-red-600'}`}>
            {config.isActive ? 'Aktif' : 'Pasif'}
          </p>
        </div>
      </div>

      {/* Son GÃ¼ncelleme */}
      {config.lastSync && (
        <div className="text-center text-sm text-gray-500">
          Son gÃ¼ncelleme: {new Date(config.lastSync).toLocaleString('tr-TR')}
        </div>
      )}
    </div>
  )
}

ğŸ“„ app/admin/test/page.tsx
ğŸ“Š 880 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/admin/test/page.tsx (TAM DÃœZELTÄ°LMÄ°Å)
'use client'

import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'

interface TestResult {
  name: string
  status: 'success' | 'error' | 'warning' | 'pending'
  message: string
  details?: any
  duration?: number
}

interface EmailTestData {
  to: string
  template: string
  data: {
    name: string
    spotTitle: string
    spotId: string
    spotterName: string
  }
}

export default function SystemTestPage() {
  const [testResults, setTestResults] = useState<TestResult[]>([])
  const [runningTests, setRunningTests] = useState(false)
  const [user, setUser] = useState<any>(null)
  const [emailTestData, setEmailTestData] = useState<EmailTestData>({
    to: '',
    template: 'welcome',
    data: {
      name: 'Test User',
      spotTitle: 'Test Spot BaÅŸlÄ±ÄŸÄ±',
      spotId: 'test-' + Date.now(),
      spotterName: 'Test YardÄ±mcÄ±'
    }
  })

  // KullanÄ±cÄ± oturumunu kontrol et
  useEffect(() => {
    checkUserSession()
  }, [])

  const checkUserSession = async () => {
    const { data: { user } } = await supabase.auth.getUser()
    setUser(user)
    
    if (!user) {
      addTestResult({
        name: 'KullanÄ±cÄ± Oturumu',
        status: 'error',
        message: 'Oturum aÃ§Ä±lmamÄ±ÅŸ. LÃ¼tfen giriÅŸ yapÄ±n.'
      })
    }
  }

  const addTestResult = (result: TestResult) => {
    setTestResults(prev => [...prev, result])
  }

  // TÄ°P GÃœVENLÄ° TEST FONKSÄ°YONU
  const createTestResult = (
    status: TestResult['status'],
    message: string,
    details?: any,
    duration?: number
  ): Omit<TestResult, 'name'> => {
    return { status, message, details, duration }
  }

  // 1. TEMEL SÄ°STEM TESTLERÄ°
  const runBasicTests = async () => {
    const tests = [
      {
        name: 'Supabase BaÄŸlantÄ±sÄ±',
        test: async () => {
          const start = Date.now()
          try {
            const { data, error } = await supabase
              .from('spots')
              .select('count', { count: 'exact', head: true })
            
            const duration = Date.now() - start
            
            if (error) throw error
            
            return createTestResult(
              'success',
              `BaÄŸlantÄ± baÅŸarÄ±lÄ±. ${data} tablo var.`,
              null,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `BaÄŸlantÄ± hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'Database TablolarÄ±',
        test: async () => {
          const start = Date.now()
          const requiredTables = ['spots', 'sightings', 'user_profiles', 'shops']
          const results: any[] = []
          
          try {
            for (const table of requiredTables) {
              const { error } = await supabase
                .from(table)
                .select('*')
                .limit(1)
              
              results.push({
                table,
                exists: !error,
                error: error?.message
              })
            }
            
            const missingTables = results.filter(r => !r.exists)
            const duration = Date.now() - start
            
            if (missingTables.length > 0) {
              return createTestResult(
                'warning',
                `${missingTables.length} tablo eksik`,
                results,
                duration
              )
            }
            
            return createTestResult(
              'success',
              'TÃ¼m tablolar mevcut',
              results,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Tablo kontrol hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
        {
        name: 'Storage Bucket',
        test: async () => {
            const start = Date.now()
            try {
            // DIRECT TEST: Bucket'a dosya yÃ¼kle
            const testFile = new File(['test-content'], `test-${Date.now()}.txt`, {
                type: 'text/plain'
            })
            
            const { error: uploadError } = await supabase.storage
                .from('spot-images')
                .upload(`system-test/test-${Date.now()}.txt`, testFile)
            
            const duration = Date.now() - start
            
            if (uploadError) {
                // Upload baÅŸarÄ±sÄ±z - bucket yok veya izin yok
                return createTestResult(
                uploadError.message.includes('bucket') ? 'error' : 'warning',
                `Upload hatasÄ±: ${uploadError.message}`,
                uploadError,
                duration
                )
            }
            
            // Upload BAÅARILI - bucket Ã§alÄ±ÅŸÄ±yor!
            return createTestResult(
                'success',
                'Storage bucket Ã§alÄ±ÅŸÄ±yor! Dosya yÃ¼klendi.',
                { uploaded: true, timestamp: new Date().toISOString() },
                duration
            )
            
            } catch (error: any) {
            return createTestResult(
                'error',
                `Storage test hatasÄ±: ${error.message}`,
                error
            )
            }
        }
        },
      {
        name: 'Health Check API',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/health')
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok) {
              return createTestResult(
                'error',
                `API hatalÄ±: ${response.status}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              `API Ã§alÄ±ÅŸÄ±yor (${data.duration})`,
              data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `API hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      }
    ]

    for (const test of tests) {
      const result = await test.test()
      addTestResult({ 
        name: test.name, 
        ...result 
      })
      await new Promise(resolve => setTimeout(resolve, 500))
    }
  }

  // 2. EMAIL SÄ°STEM TESTLERÄ°
  const runEmailTests = async () => {
    const tests = [
      {
        name: 'Email API BaÄŸlantÄ±sÄ±',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/send-email', { method: 'GET' })
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok) {
              return createTestResult(
                'error',
                `Email API hatalÄ±: ${data.error || response.status}`,
                data,
                duration
              )
            }
            
            const status: TestResult['status'] = data.gmail_configured ? 'success' : 'warning'
            
            return createTestResult(
              status,
              data.gmail_configured 
                ? 'Email API hazÄ±r' 
                : 'Gmail konfigÃ¼rasyonu eksik',
              data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Email API hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'Test Email GÃ¶nderimi',
        test: async () => {
          if (!emailTestData.to) {
            return createTestResult(
              'warning',
              'Test email adresi gerekli',
              'LÃ¼tfen bir email adresi girin'
            )
          }

          const start = Date.now()
          try {
            const response = await fetch('/api/send-email', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                to: emailTestData.to,
                template: emailTestData.template,
                data: emailTestData.data,
                subject: `âœ… SpotItForMe Test Email - ${new Date().toLocaleString()}`,
                html: `
                  <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px; text-align: center; border-radius: 10px 10px 0 0;">
                      <h1 style="color: white; margin: 0;">âœ… TEST EMAIL</h1>
                      <p style="color: white; opacity: 0.9; margin-top: 10px;">SpotItForMe Email Sistemi Testi</p>
                    </div>
                    <div style="padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
                      <p>Merhaba <strong>${emailTestData.data.name}</strong>,</p>
                      <p>Bu email SpotItForMe sisteminin dÃ¼zgÃ¼n Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± test etmek iÃ§in gÃ¶nderilmiÅŸtir.</p>
                      
                      <div style="background: #f3f4f6; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <p><strong>Test DetaylarÄ±:</strong></p>
                        <p>ğŸ“§ Template: ${emailTestData.template}</p>
                        <p>â° GÃ¶nderim ZamanÄ±: ${new Date().toLocaleString('tr-TR')}</p>
                        <p>ğŸ†” Spot ID: ${emailTestData.data.spotId}</p>
                        <p>ğŸ‘¤ GÃ¶nderen: ${emailTestData.data.spotterName}</p>
                      </div>

                      <div style="text-align: center; margin: 30px 0;">
                        <div style="display: inline-block; background: #10b981; color: white; padding: 12px 30px; border-radius: 8px;">
                          âœ… EMAIL SÄ°STEMÄ° Ã‡ALIÅIYOR
                        </div>
                      </div>

                      <p>Bu email baÅŸarÄ±yla alÄ±ndÄ±ysa, SpotItForMe email sisteminiz dÃ¼zgÃ¼n Ã§alÄ±ÅŸÄ±yor demektir.</p>
                      
                      <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

                      <p style="font-size: 12px; color: #6b7280;">
                        Bu bir test emailidir. LÃ¼tfen cevaplamayÄ±n.
                      </p>
                    </div>
                  </div>
                `,
                text: `SpotItForMe Test Email - ${new Date().toLocaleString()}. Email sisteminiz Ã§alÄ±ÅŸÄ±yor!`
              })
            })

            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok) {
              return createTestResult(
                'error',
                `Email gÃ¶nderilemedi: ${data.error || response.status}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              `Email baÅŸarÄ±yla gÃ¶nderildi: ${data.messageId}`,
              data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Email gÃ¶nderme hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'CRON Job Testi',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/cron/process-emails')
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok) {
              const status: TestResult['status'] = data.error === 'Unauthorized' ? 'warning' : 'error'
              
              return createTestResult(
                status,
                data.error === 'Unauthorized' 
                  ? 'CRON secret gerekli (normal)' 
                  : `CRON hatasÄ±: ${data.error}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              `CRON Ã§alÄ±ÅŸÄ±yor: ${data.processed?.length || 0} email iÅŸlendi`,
              data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `CRON test hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'Environment Variables',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/env-check')
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok || !data.success) {
              return createTestResult(
                'error',
                `Environment hatasÄ±: ${data.message}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              'Environment variables mevcut',
              data.envVars,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Environment check hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      }
    ]

    for (const test of tests) {
      const result = await test.test()
      addTestResult({ 
        name: test.name, 
        ...result 
      })
      await new Promise(resolve => setTimeout(resolve, 1000))
    }
  }

  // 3. Ä°ÅLEVSEL TESTLER
  const runFunctionalTests = async () => {
    const tests = [
      {
        name: 'Spot API Testi',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/spots')
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok || data.status !== 'success') {
              return createTestResult(
                'error',
                `Spot API hatasÄ±: ${data.message}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              `Spot API Ã§alÄ±ÅŸÄ±yor: ${data.data?.spots?.length || 0} spot`,
              data.data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Spot API hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'KullanÄ±cÄ± API Testi',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/users')
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok || data.status !== 'success') {
              return createTestResult(
                'error',
                `User API hatasÄ±: ${data.message}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              `User API Ã§alÄ±ÅŸÄ±yor: ${data.data?.users?.length || 0} kullanÄ±cÄ±`,
              data.data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `User API hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'Spot OluÅŸturma Testi',
        test: async () => {
          if (!user) {
            return createTestResult(
              'warning',
              'Spot oluÅŸturmak iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z',
              'KullanÄ±cÄ± oturumu gerekiyor'
            )
          }

          const start = Date.now()
          try {
            const testSpot = {
              user_id: user.id,
              title: `[TEST] Sistem Test Spotu - ${Date.now()}`,
              description: 'Bu spot sistem testi iÃ§in oluÅŸturulmuÅŸtur.',
              category: 'DiÄŸer',
              location: 'Test Åehri',
              status: 'active',
              image_url: null
            }

            const { data, error } = await supabase
              .from('spots')
              .insert([testSpot])
              .select()
            
            const duration = Date.now() - start
            
            if (error) {
              return createTestResult(
                'error',
                `Spot oluÅŸturma hatasÄ±: ${error.message}`,
                error,
                duration
              )
            }
            
            if (data && data[0]) {
              setTimeout(async () => {
                await supabase.from('spots').delete().eq('id', data[0].id)
              }, 5000)
            }
            
            return createTestResult(
              'success',
              `Test spot'u oluÅŸturuldu: ${data?.[0]?.title}`,
              data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Spot oluÅŸturma hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      }
    ]

    for (const test of tests) {
      const result = await test.test()
      addTestResult({ 
        name: test.name, 
        ...result 
      })
      await new Promise(resolve => setTimeout(resolve, 500))
    }
  }

  // TÃœM TESTLERÄ° Ã‡ALIÅTIR
  const runAllTests = async () => {
    setTestResults([])
    setRunningTests(true)
    
    try {
      addTestResult({
        name: 'Test BaÅŸlatÄ±ldÄ±',
        status: 'pending',
        message: 'Sistem testleri baÅŸlatÄ±lÄ±yor...'
      })
      
      await runBasicTests()
      await runEmailTests()
      await runFunctionalTests()
      
      addTestResult({
        name: 'Testler TamamlandÄ±',
        status: 'success',
        message: 'TÃ¼m sistem testleri tamamlandÄ±.'
      })
      
    } catch (error: any) {
      addTestResult({
        name: 'Test HatasÄ±',
        status: 'error',
        message: `Test sÄ±rasÄ±nda hata: ${error.message}`
      })
    } finally {
      setRunningTests(false)
    }
  }

  // TEST SONUÃ‡LARINI ANALÄ°Z ET
  const getTestSummary = () => {
    const total = testResults.length
    const success = testResults.filter(r => r.status === 'success').length
    const error = testResults.filter(r => r.status === 'error').length
    const warning = testResults.filter(r => r.status === 'warning').length
    
    return { total, success, error, warning }
  }

  const summary = getTestSummary()

  // STATUS RENKLERÄ°
  const getStatusColor = (status: TestResult['status']) => {
    switch (status) {
      case 'success': return 'bg-green-100 text-green-800 border-green-200'
      case 'error': return 'bg-red-100 text-red-800 border-red-200'
      case 'warning': return 'bg-yellow-100 text-yellow-800 border-yellow-200'
      case 'pending': return 'bg-blue-100 text-blue-800 border-blue-200'
      default: return 'bg-gray-100 text-gray-800 border-gray-200'
    }
  }

  const getStatusIcon = (status: TestResult['status']) => {
    switch (status) {
      case 'success': return 'âœ…'
      case 'error': return 'âŒ'
      case 'warning': return 'âš ï¸'
      case 'pending': return 'â³'
      default: return 'â„¹ï¸'
    }
  }

  return (
    <div className="min-h-screen bg-gradient-to-b from-gray-50 to-white p-4 md:p-8">
      <div className="max-w-6xl mx-auto">
        {/* BAÅLIK */}
        <div className="mb-8 text-center">
          <h1 className="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
            ğŸ§ª SpotItForMe Sistem Test Merkezi
          </h1>
          <p className="text-gray-600">
            TÃ¼m sistem bileÅŸenlerini test edin, hatalarÄ± tespit edin.
          </p>
        </div>

        {/* DURUM Ã–ZETÄ° */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
          <div className="bg-white rounded-xl shadow p-6 text-center">
            <div className="text-2xl font-bold text-gray-900">{summary.total}</div>
            <div className="text-gray-600">Toplam Test</div>
          </div>
          <div className="bg-white rounded-xl shadow p-6 text-center">
            <div className="text-2xl font-bold text-green-600">{summary.success}</div>
            <div className="text-gray-600">BaÅŸarÄ±lÄ±</div>
          </div>
          <div className="bg-white rounded-xl shadow p-6 text-center">
            <div className="text-2xl font-bold text-red-600">{summary.error}</div>
            <div className="text-gray-600">HatalÄ±</div>
          </div>
          <div className="bg-white rounded-xl shadow p-6 text-center">
            <div className="text-2xl font-bold text-yellow-600">{summary.warning}</div>
            <div className="text-gray-600">UyarÄ±</div>
          </div>
        </div>

        {/* EMAIL TEST ALANI */}
        <div className="bg-white rounded-xl shadow-lg p-6 mb-8">
          <h2 className="text-xl font-bold text-gray-900 mb-4">ğŸ“§ Email Testi</h2>
          <div className="space-y-4">
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Test Email Adresi
              </label>
              <input
                type="email"
                value={emailTestData.to}
                onChange={(e) => setEmailTestData({...emailTestData, to: e.target.value})}
                placeholder="ornek@gmail.com"
                className="w-full md:w-96 px-4 py-2 border border-gray-300 rounded-lg"
              />
              <p className="text-sm text-gray-500 mt-1">
                Test email'ini bu adrese gÃ¶ndereceÄŸiz.
              </p>
            </div>
            
            <div className="flex flex-wrap gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Template
                </label>
                <select
                  value={emailTestData.template}
                  onChange={(e) => setEmailTestData({...emailTestData, template: e.target.value})}
                  className="px-4 py-2 border border-gray-300 rounded-lg"
                >
                  <option value="welcome">HoÅŸgeldin</option>
                  <option value="spot-created">Spot OluÅŸturuldu</option>
                  <option value="spot-sighting">YardÄ±m Bildirimi</option>
                  <option value="test">Test</option>
                </select>
              </div>
              
              <div className="flex items-end">
                <button
                  onClick={() => {
                    setTestResults([])
                    runEmailTests()
                  }}
                  disabled={runningTests || !emailTestData.to}
                  className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg disabled:opacity-50"
                >
                  Sadece Email Testi Ã‡alÄ±ÅŸtÄ±r
                </button>
              </div>
            </div>
          </div>
        </div>

        {/* TEST KONTROLLERÄ° */}
        <div className="bg-white rounded-xl shadow-lg p-6 mb-8">
          <h2 className="text-xl font-bold text-gray-900 mb-4">ğŸ”„ Test Kontrolleri</h2>
          <div className="flex flex-wrap gap-4">

            
            <button
              onClick={() => setTestResults([])}
              className="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 px-6 rounded-lg"
            >
              SonuÃ§larÄ± Temizle
            </button>
            
            <button
              onClick={() => window.location.reload()}
              className="bg-blue-100 hover:bg-blue-200 text-blue-600 font-medium py-3 px-6 rounded-lg"
            >
              SayfayÄ± Yenile
            </button>
          </div>
          
          {user && (
            <div className="mt-4 p-3 bg-gray-50 rounded-lg">
              <p className="text-sm">
                ğŸ‘¤ Oturum: <span className="font-medium">{user.email}</span>
                <span className="ml-4">ğŸ†” User ID: <code className="text-xs">{user.id.substring(0, 8)}...</code></span>
              </p>
            </div>
          )}
        </div>

        {/* TEST SONUÃ‡LARI */}
        <div className="bg-white rounded-xl shadow-lg p-6">
          <div className="flex justify-between items-center mb-6">
            <h2 className="text-xl font-bold text-gray-900">ğŸ“Š Test SonuÃ§larÄ±</h2>
            <span className="text-sm text-gray-500">
              {testResults.length} test sonucu
            </span>
          </div>
          
          {testResults.length === 0 ? (
            <div className="text-center py-12">
              <div className="text-4xl mb-4">ğŸ§ª</div>
              <h3 className="text-lg font-medium text-gray-900 mb-2">
                HenÃ¼z test Ã§alÄ±ÅŸtÄ±rÄ±lmadÄ±
              </h3>
              <p className="text-gray-600">
                YukarÄ±daki butonlarla testleri baÅŸlatÄ±n.
              </p>
            </div>
          ) : (
            <div className="space-y-4 max-h-[600px] overflow-y-auto pr-2">
              {testResults.map((result, index) => (
                <div
                  key={index}
                  className={`p-4 rounded-lg border ${getStatusColor(result.status)}`}
                >
                  <div className="flex items-start justify-between">
                    <div className="flex items-start space-x-3">
                      <span className="text-xl">{getStatusIcon(result.status)}</span>
                      <div>
                        <h4 className="font-bold">{result.name}</h4>
                        <p className="text-sm mt-1">{result.message}</p>
                        
                        {result.duration && (
                          <p className="text-xs text-gray-600 mt-1">
                            â±ï¸ {result.duration}ms
                          </p>
                        )}
                        
                        {result.details && (
                          <details className="mt-2">
                            <summary className="text-sm cursor-pointer text-gray-700">
                              DetaylarÄ± gÃ¶ster
                            </summary>
                            <pre className="mt-2 p-3 bg-black bg-opacity-5 rounded text-xs overflow-x-auto">
                              {JSON.stringify(result.details, null, 2)}
                            </pre>
                          </details>
                        )}
                      </div>
                    </div>
                    
                    <div className="flex items-center">
                      <span className={`px-2 py-1 rounded text-xs font-medium ${
                        result.status === 'success' ? 'bg-green-200 text-green-800' :
                        result.status === 'error' ? 'bg-red-200 text-red-800' :
                        result.status === 'warning' ? 'bg-yellow-200 text-yellow-800' :
                        'bg-blue-200 text-blue-800'
                      }`}>
                        {result.status.toUpperCase()}
                      </span>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>

        {/* HIZLI Ä°PUÃ‡LARI */}
        <div className="mt-8 grid md:grid-cols-3 gap-6">
          <div className="bg-blue-50 rounded-xl p-6">
            <div className="text-2xl mb-3">ğŸ”§</div>
            <h4 className="font-bold text-gray-900 mb-2">SÄ±k KarÅŸÄ±laÅŸÄ±lan Hatalar</h4>
            <ul className="text-sm text-gray-600 space-y-1">
              <li>â€¢ Gmail App Password eksik</li>
              <li>â€¢ Supabase RLS politikalarÄ±</li>
              <li>â€¢ Environment variables eksik</li>
              <li>â€¢ Storage bucket oluÅŸturulmamÄ±ÅŸ</li>
            </ul>
          </div>
          
          <div className="bg-green-50 rounded-xl p-6">
            <div className="text-2xl mb-3">âœ…</div>
            <h4 className="font-bold text-gray-900 mb-2">Test Edilen Sistemler</h4>
            <ul className="text-sm text-gray-600 space-y-1">
              <li>â€¢ Supabase Database & Auth</li>
              <li>â€¢ Gmail Email API</li>
              <li>â€¢ CRON Job System</li>
              <li>â€¢ Rate Limiting</li>
              <li>â€¢ Health Check Endpoints</li>
            </ul>
          </div>
          
          <div className="bg-purple-50 rounded-xl p-6">
            <div className="text-2xl mb-3">ğŸ“</div>
            <h4 className="font-bold text-gray-900 mb-2">Sonraki AdÄ±mlar</h4>
            <ul className="text-sm text-gray-600 space-y-1">
              <li>1. HatalarÄ± dÃ¼zelt</li>
              <li>2. Email sistemini test et</li>
              <li>3. Spot oluÅŸturmayÄ± test et</li>
              <li>4. TÃ¼m API'leri doÄŸrula</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  )
}

ğŸ“„ app/admin/users/page.tsx
ğŸ“Š 308 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/admin/users/page.tsx - DÃœZELTÄ°LMÄ°Å
'use client';

import { useState, useEffect } from 'react';
import { supabase } from '@/lib/supabase';

interface UserProfile {
  id: string;
  email: string;
  name: string | null;
  created_at: string;
  is_admin: boolean;
  total_spots: number;
  total_helps: number;
}

interface UserWithStats extends UserProfile {
  total_spots: number;
  total_helps: number;
}

interface SupabaseUserProfile {
  id: string;
  email: string;
  name: string | null;
  created_at: string;
  is_admin: boolean;
  avatar_url?: string;
}

export default function AdminUsersPage() {
  const [users, setUsers] = useState<UserWithStats[]>([]);
  const [loading, setLoading] = useState(true);
  const [search, setSearch] = useState('');
  const [page, setPage] = useState(1);
  const [totalCount, setTotalCount] = useState(0);

  useEffect(() => {
    fetchUsers();
  }, [page, search]);

  const fetchUsers = async () => {
    try {
      setLoading(true);
      
      // Arama sorgusu
      let query = supabase
        .from('user_profiles')
        .select('*', { count: 'exact' });

      if (search) {
        query = query.or(`email.ilike.%${search}%,name.ilike.%${search}%`);
      }

      // Pagination
      const { data, count, error } = await query
        .range((page - 1) * 20, page * 20 - 1)
        .order('created_at', { ascending: false });

      if (error) throw error;

      // KullanÄ±cÄ± istatistiklerini getir
      const usersWithStats = await Promise.all(
        (data || []).map(async (user: SupabaseUserProfile) => {
          const [spotsRes, sightingsRes] = await Promise.all([
            supabase.from('spots').select('id', { count: 'exact', head: true }).eq('user_id', user.id),
            supabase.from('sightings').select('id', { count: 'exact', head: true }).eq('spotter_id', user.id)
          ]);

          return {
            ...user,
            total_spots: spotsRes.count || 0,
            total_helps: sightingsRes.count || 0
          } as UserWithStats;
        })
      );

      setUsers(usersWithStats);
      setTotalCount(count || 0);
    } catch (error) {
      console.error('KullanÄ±cÄ±lar yÃ¼klenemedi:', error);
    } finally {
      setLoading(false);
    }
  };

  const toggleAdmin = async (userId: string, currentStatus: boolean) => {
    if (!confirm(`${currentStatus ? 'Admin yetkisini kaldÄ±rmak' : 'Admin yetkisi vermek'} istediÄŸinize emin misiniz?`)) {
      return;
    }

    try {
      const { error } = await supabase
        .from('user_profiles')
        .update({ is_admin: !currentStatus })
        .eq('id', userId);

      if (error) throw error;

      // Listeyi gÃ¼ncelle
      setUsers(users.map(user => 
        user.id === userId 
          ? { ...user, is_admin: !currentStatus }
          : user
      ));

      alert('KullanÄ±cÄ± yetkisi gÃ¼ncellendi!');
    } catch (error) {
      console.error('Yetki gÃ¼ncellenemedi:', error);
      alert('Yetki gÃ¼ncellenirken bir hata oluÅŸtu');
    }
  };

  const deleteUser = async (userId: string, email: string) => {
    if (!confirm(`${email} kullanÄ±cÄ±sÄ±nÄ± silmek istediÄŸinize emin misiniz? Bu iÅŸlem geri alÄ±namaz!`)) {
      return;
    }

    try {
      // Ã–nce iliÅŸkili verileri sil
      await supabase.from('spots').delete().eq('user_id', userId);
      await supabase.from('sightings').delete().eq('spotter_id', userId);
      await supabase.from('user_profiles').delete().eq('id', userId);

      // Auth kullanÄ±cÄ±sÄ±nÄ± sil (admin yetkisi gerektirir)
      const { error } = await supabase.auth.admin.deleteUser(userId);
      
      if (error) throw error;

      // Listeden kaldÄ±r
      setUsers(users.filter(user => user.id !== userId));
      
      alert('KullanÄ±cÄ± baÅŸarÄ±yla silindi!');
    } catch (error) {
      console.error('KullanÄ±cÄ± silinemedi:', error);
      alert('KullanÄ±cÄ± silinirken bir hata oluÅŸtu. Supabase dashboard Ã¼zerinden deneyin.');
    }
  };

  return (
    <div className="space-y-6">
      <div>
        <h1 className="text-2xl font-bold text-gray-900">KullanÄ±cÄ± YÃ¶netimi</h1>
        <p className="text-gray-600">TÃ¼m kullanÄ±cÄ±larÄ± gÃ¶rÃ¼ntÃ¼leyin ve yÃ¶netin</p>
      </div>

      {/* Arama ve Filtreler */}
      <div className="bg-white rounded-xl shadow p-6">
        <div className="flex flex-col md:flex-row gap-4 mb-6">
          <div className="flex-1">
            <input
              type="text"
              placeholder="Email veya isim ile ara..."
              value={search}
              onChange={(e) => setSearch(e.target.value)}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          <button
            onClick={fetchUsers}
            className="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium"
          >
            Ara
          </button>
        </div>

        {/* KullanÄ±cÄ± Listesi */}
        {loading ? (
          <div className="text-center py-8">
            <div className="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600 mx-auto"></div>
            <p className="mt-2 text-gray-600">KullanÄ±cÄ±lar yÃ¼kleniyor...</p>
          </div>
        ) : (
          <>
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead className="bg-gray-50">
                  <tr>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">KullanÄ±cÄ±</th>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">KayÄ±t Tarihi</th>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Spot'lar</th>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">YardÄ±m</th>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Yetki</th>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Ä°ÅŸlemler</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-gray-100">
                  {users.map((user: UserWithStats) => (
                    <tr key={user.id} className="hover:bg-gray-50">
                      <td className="py-3 px-4">
                        <div>
                          <p className="font-medium">{user.name || 'Ä°simsiz KullanÄ±cÄ±'}</p>
                          <p className="text-sm text-gray-500">{user.email}</p>
                        </div>
                      </td>
                      <td className="py-3 px-4 text-sm text-gray-600">
                        {new Date(user.created_at).toLocaleDateString('tr-TR')}
                      </td>
                      <td className="py-3 px-4">
                        <span className="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                          {user.total_spots}
                        </span>
                      </td>
                      <td className="py-3 px-4">
                        <span className="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">
                          {user.total_helps}
                        </span>
                      </td>
                      <td className="py-3 px-4">
                        <button
                          onClick={() => toggleAdmin(user.id, user.is_admin)}
                          className={`px-3 py-1 rounded-full text-xs font-medium ${
                            user.is_admin
                              ? 'bg-purple-100 text-purple-800 hover:bg-purple-200'
                              : 'bg-gray-100 text-gray-800 hover:bg-gray-200'
                          }`}
                        >
                          {user.is_admin ? 'Admin' : 'KullanÄ±cÄ±'}
                        </button>
                      </td>
                      <td className="py-3 px-4">
                        <div className="flex space-x-2">
                          <button
                            onClick={() => deleteUser(user.id, user.email)}
                            className="px-3 py-1 bg-red-50 hover:bg-red-100 text-red-700 rounded text-xs font-medium border border-red-200"
                          >
                            Sil
                          </button>
                          <button
                            onClick={() => {
                              // KullanÄ±cÄ± detay sayfasÄ±na git
                              window.open(`/profile?user=${user.id}`, '_blank');
                            }}
                            className="px-3 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded text-xs font-medium border border-blue-200"
                          >
                            GÃ¶rÃ¼ntÃ¼le
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>

            {/* Pagination */}
            {totalCount > 20 && (
              <div className="mt-6 flex justify-center">
                <div className="flex space-x-2">
                  <button
                    onClick={() => setPage(p => Math.max(1, p - 1))}
                    disabled={page === 1}
                    className="px-3 py-2 border rounded-lg disabled:opacity-50"
                  >
                    â† Ã–nceki
                  </button>
                  <span className="px-4 py-2">
                    Sayfa {page} / {Math.ceil(totalCount / 20)}
                  </span>
                  <button
                    onClick={() => setPage(p => p + 1)}
                    disabled={page >= Math.ceil(totalCount / 20)}
                    className="px-3 py-2 border rounded-lg disabled:opacity-50"
                  >
                    Sonraki â†’
                  </button>
                </div>
              </div>
            )}
          </>
        )}

        {!loading && users.length === 0 && (
          <div className="text-center py-8 text-gray-500">
            {search ? 'Arama kriterlerinize uygun kullanÄ±cÄ± bulunamadÄ±' : 'HenÃ¼z kullanÄ±cÄ± kaydÄ± yok'}
          </div>
        )}
      </div>

      {/* Ä°statistikler */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div className="bg-white rounded-xl shadow p-6">
          <h3 className="font-bold text-gray-900 mb-2">Toplam KullanÄ±cÄ±</h3>
          <p className="text-3xl font-bold text-blue-600">{totalCount}</p>
          <p className="text-sm text-gray-600 mt-1">KayÄ±tlÄ± toplam kullanÄ±cÄ±</p>
        </div>
        <div className="bg-white rounded-xl shadow p-6">
          <h3 className="font-bold text-gray-900 mb-2">Admin SayÄ±sÄ±</h3>
          <p className="text-3xl font-bold text-purple-600">
            {users.filter(u => u.is_admin).length}
          </p>
          <p className="text-sm text-gray-600 mt-1">YÃ¶netici yetkisine sahip</p>
        </div>
        <div className="bg-white rounded-xl shadow p-6">
          <h3 className="font-bold text-gray-900 mb-2">Aktif BugÃ¼n</h3>
          <p className="text-3xl font-bold text-green-600">
            {users.filter(u => {
              const userDate = new Date(u.created_at);
              const today = new Date();
              return userDate.toDateString() === today.toDateString();
            }).length}
          </p>
          <p className="text-sm text-gray-600 mt-1">BugÃ¼n kayÄ±t olanlar</p>
        </div>
      </div>
    </div>
  );
}

ğŸ“„ app/shop/dashboard/page.tsx
ğŸ“Š 836 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/shop/dashboard/page.tsx - DÃœZELTMÄ°Å HALÄ°
'use client'

import { useEffect, useState } from 'react'
import { useRouter } from 'next/navigation'
import { supabase } from '@/lib/supabase'
import Link from 'next/link'

// YENÄ° BÄ°LEÅENLERÄ° IMPORT EDEBÄ°LÄ°RSÄ°NÄ°Z
import ShopStats from '@/components/shop/ShopStats'
import RecentMatches from '@/components/shop/RecentMatches'
import QuickActions from '@/components/shop/QuickActions'
import InventoryOverview from '@/components/shop/InventoryOverview'
import SearchOverview from '@/components/shop/SearchOverview'
import ShopHeader from '@/components/shop/ShopHeader'
import ActiveSearches from '@/components/shop/ActiveSearches'
import ShopSocialFeed from '@/components/shop/ShopSocialFeed'
import ShopStatsPublic from '@/components/shop/ShopStatsPublic'

interface Shop {
  id: string
  shop_name: string
  description: string
  city: string
  subscription_type: string
  free_images_used: number
  total_images: number
  is_verified: boolean
  created_at: string
  email: string
  phone: string
  address: string
  owner_id: string
  logo_url?: string
  cover_url?: string
}

interface ShopStat {
  total_spots: number
  active_spots: number
  found_spots: number
  total_views: number
  total_helps: number
  monthly_spots: number
}

interface RecentSpot {
  id: string
  title: string
  status: string
  created_at: string
  views: number
  helps: number
}

interface ShopAnalyticsDay {
  revenue: number
  // diÄŸer field'larÄ± ekleyebilirsin
  [key: string]: any
}

interface SpotStat {
  views: number
  helps: number
}

export default function ShopDashboardPage() {
  const router = useRouter()
  const [shop, setShop] = useState<Shop | null>(null)
  const [stats, setStats] = useState<ShopStat | null>(null)
  const [recentSpots, setRecentSpots] = useState<RecentSpot[]>([])
  const [loading, setLoading] = useState(true)
  const [activeTab, setActiveTab] = useState<'overview' | 'spots' | 'analytics' | 'settings'>('overview')
  
  // YENÄ°: Dashboard istatistikleri
  const [dashboardStats, setDashboardStats] = useState({
    totalProducts: 0,
    activeSearches: 0,
    totalMatches: 0,
    pendingMatches: 0,
    totalFollowers: 0,
    revenue: 0
  })

  useEffect(() => {
    checkAuthAndLoadShop()
  }, [])

  const checkAuthAndLoadShop = async () => {
    try {
      const { data: { user } } = await supabase.auth.getUser()
      
      if (!user) {
        router.push('/login?redirect=/shop/dashboard')
        return
      }

      // MaÄŸazayÄ± getir
      const { data: shopData, error: shopError } = await supabase
        .from('shops')
        .select('*')
        .eq('owner_id', user.id)
        .single()

      if (shopError) {
        if (shopError.code === 'PGRST116') {
          router.push('/for-business')
          return
        }
        throw shopError
      }

      setShop(shopData)

      // Ä°statistikleri ve spot'larÄ± getir
      await loadShopData(shopData.id, user.id)
      
      // YENÄ°: Dashboard istatistiklerini yÃ¼kle
      await loadDashboardStats(shopData.id)

    } catch (error) {
      console.error('MaÄŸaza yÃ¼klenemedi:', error)
      alert('MaÄŸaza bilgileri yÃ¼klenirken bir hata oluÅŸtu')
    } finally {
      setLoading(false)
    }
  }

  const loadDashboardStats = async (shopId: string) => {
    try {
      // Paralel olarak tÃ¼m istatistikleri al
      const [
        { count: productCount },
        { count: searchCount },
        { count: matchCount },
        { count: pendingMatchCount },
        { count: followerCount },
        { data: revenueData }
      ] = await Promise.all([
        supabase
          .from('shop_inventory')
          .select('count', { count: 'exact', head: true })
          .eq('shop_id', shopId)
          .eq('status', 'active'),
        supabase
          .from('shop_searches')
          .select('count', { count: 'exact', head: true })
          .eq('shop_id', shopId)
          .eq('status', 'active'),
        supabase
          .from('shop_search_matches')
          .select('count', { count: 'exact', head: true })
          .eq('search_id', shopId),
        supabase
          .from('shop_search_matches')
          .select('count', { count: 'exact', head: true })
          .eq('search_id', shopId)
          .eq('status', 'pending'),
        supabase
          .from('shop_customer_relationships')
          .select('count', { count: 'exact', head: true })
          .eq('shop_id', shopId)
          .eq('relationship_type', 'follower'),
        supabase
          .from('shop_analytics_daily')
          .select('revenue')
          .eq('shop_id', shopId)
          .gte('date', new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString())
      ])

      // TÄ°P TANIMLAMASI EKLENDÄ°
      const totalRevenue = (revenueData as ShopAnalyticsDay[])?.reduce(
        (sum: number, day: ShopAnalyticsDay) => sum + (day.revenue || 0), 
        0
      ) || 0

      setDashboardStats({
        totalProducts: productCount || 0,
        activeSearches: searchCount || 0,
        totalMatches: matchCount || 0,
        pendingMatches: pendingMatchCount || 0,
        totalFollowers: followerCount || 0,
        revenue: totalRevenue
      })

    } catch (error) {
      console.error('Dashboard istatistikleri yÃ¼klenemedi:', error)
    }
  }

  const loadShopData = async (shopId: string, ownerId: string) => {
    try {
      // Ä°statistikleri getir
      const { count: totalSpots } = await supabase
        .from('spots')
        .select('*', { count: 'exact', head: true })
        .eq('user_id', ownerId)

      const { count: activeSpots } = await supabase
        .from('spots')
        .select('*', { count: 'exact', head: true })
        .eq('user_id', ownerId)
        .eq('status', 'active')

      const { count: foundSpots } = await supabase
        .from('spots')
        .select('*', { count: 'exact', head: true })
        .eq('user_id', ownerId)
        .eq('status', 'found')

      const { data: spotStats } = await supabase
        .from('spots')
        .select('views, helps')
        .eq('user_id', ownerId)

      // TÄ°P TANIMLAMASI EKLENDÄ°
      const totalViews = (spotStats as SpotStat[])?.reduce(
        (sum: number, spot: SpotStat) => sum + (spot.views || 0), 
        0
      ) || 0
      
      // TÄ°P TANIMLAMASI EKLENDÄ°
      const totalHelps = (spotStats as SpotStat[])?.reduce(
        (sum: number, spot: SpotStat) => sum + (spot.helps || 0), 
        0
      ) || 0

      // Bu ayki spot sayÄ±sÄ±
      const startOfMonth = new Date()
      startOfMonth.setDate(1)
      startOfMonth.setHours(0, 0, 0, 0)

      const { count: monthlySpots } = await supabase
        .from('spots')
        .select('*', { count: 'exact', head: true })
        .eq('user_id', ownerId)
        .gte('created_at', startOfMonth.toISOString())

      setStats({
        total_spots: totalSpots || 0,
        active_spots: activeSpots || 0,
        found_spots: foundSpots || 0,
        total_views: totalViews,
        total_helps: totalHelps,
        monthly_spots: monthlySpots || 0
      })

      // Son spot'larÄ± getir
      const { data: spotsData } = await supabase
        .from('spots')
        .select('id, title, status, created_at, views, helps')
        .eq('user_id', ownerId)
        .order('created_at', { ascending: false })
        .limit(5)

      setRecentSpots(spotsData as RecentSpot[] || [])

    } catch (error) {
      console.error('Veriler yÃ¼klenemedi:', error)
    }
  }

  const handleCreateSpot = () => {
    router.push('/create-spot')
  }

  const handleViewShop = () => {
    if (shop) {
      router.push(`/shop/${shop.id}`)
    }
  }

  const handleUpgrade = () => {
    router.push('/for-business?upgrade=true')
  }

  if (loading) {
    return (
      <div className="min-h-screen bg-gray-50">
        <main className="container-custom py-12 text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto"></div>
          <p className="mt-4 text-gray-600">MaÄŸaza yÃ¼kleniyor...</p>
        </main>
      </div>
    )
  }

  if (!shop) {
    return (
      <div className="min-h-screen bg-gray-50">
        <main className="container-custom py-12 text-center">
          <h1 className="text-2xl font-bold text-gray-900 mb-4">MaÄŸaza BulunamadÄ±</h1>
          <p className="text-gray-600 mb-8">HenÃ¼z bir maÄŸazanÄ±z yok. Hemen Ã¼cretsiz oluÅŸturun!</p>
          <button
            onClick={() => router.push('/for-business')}
            className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-8 rounded-lg"
          >
            Ãœcretsiz MaÄŸaza AÃ§
          </button>
        </main>
      </div>
    )
  }

  return (
    <div className="min-h-screen bg-gray-50">
      <main className="container-custom py-8">
        {/* YENÄ°: MaÄŸaza Dashboard Header */}
        <div className="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-6 md:p-8 text-white mb-8">
          <div className="flex flex-col md:flex-row md:items-center justify-between">
            <div className="mb-6 md:mb-0">
              <div className="flex items-center mb-4">
                <div className="w-16 h-16 bg-white text-blue-600 rounded-xl flex items-center justify-center text-2xl font-bold mr-4">
                  {shop.shop_name.substring(0, 2).toUpperCase()}
                </div>
                <div>
                  <h1 className="text-2xl md:text-3xl font-bold mb-2">{shop.shop_name}</h1>
                  <div className="flex flex-wrap gap-2">
                    <span className="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">
                      {shop.city}
                    </span>
                    <span className={`px-3 py-1 rounded-full text-sm ${
                      shop.is_verified 
                        ? 'bg-green-500' 
                        : 'bg-yellow-500'
                    }`}>
                      {shop.is_verified ? 'âœ“ DoÄŸrulanmÄ±ÅŸ' : 'DoÄŸrulanmamÄ±ÅŸ'}
                    </span>
                    <span className="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">
                      {shop.subscription_type === 'free' ? 'Ãœcretsiz Paket' : shop.subscription_type}
                    </span>
                  </div>
                </div>
              </div>
            </div>
            
            <div className="flex flex-col sm:flex-row gap-3">
              <button
                onClick={handleViewShop}
                className="bg-white text-blue-600 hover:bg-blue-50 font-medium px-6 py-3 rounded-lg"
              >
                ğŸ‘ï¸ MaÄŸazayÄ± GÃ¶rÃ¼ntÃ¼le
              </button>
              <button
                onClick={handleUpgrade}
                className="bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-6 py-3 rounded-lg"
              >
                â­ Paketi YÃ¼kselt
              </button>
            </div>
          </div>
        </div>

        {/* YENÄ°: Dashboard Grid Layout */}
        <div className="grid lg:grid-cols-3 gap-8">
          {/* Ana Kolon */}
          <div className="lg:col-span-2 space-y-8">
            {/* HÄ±zlÄ± Ä°statistikler */}
            {shop && (
              <ShopStats 
                stats={dashboardStats} 
                shopId={shop.id}
              />
            )}

            {/* HÄ±zlÄ± Eylemler */}
            {shop && (
              <QuickActions 
                shopId={shop.id}
                onActionComplete={() => {
                  // Yenileme iÅŸlemi
                  loadDashboardStats(shop.id)
                  loadShopData(shop.id, shop.owner_id)
                }}
              />
            )}

            {/* Son EÅŸleÅŸmeler */}
            {shop && (
              <RecentMatches 
                shopId={shop.id}
                limit={5}
              />
            )}

            {/* Stok Ã–zeti */}
            {shop && (
              <InventoryOverview 
                shopId={shop.id}
              />
            )}

            {/* Aktif Aramalar */}
            {shop && (
              <ActiveSearches 
                shopId={shop.id}
                showCreateButton={true}
                limit={5}
              />
            )}

            {/* Sosyal PaylaÅŸÄ±mlar */}
            {shop && (
              <ShopSocialFeed 
                shopId={shop.id}
                limit={3}
                compact={true}
              />
            )}
          </div>

          {/* Yan Kolon */}
          <div className="space-y-8">
            {/* Arama Ã–zeti */}
            {shop && (
              <SearchOverview 
                shopId={shop.id}
              />
            )}

            {/* Resim Limiti */}
            <div className="bg-white rounded-xl shadow p-6">
              <div className="flex items-center justify-between mb-4">
                <div>
                  <h3 className="text-lg font-bold text-gray-900">Resim Limiti</h3>
                  <p className="text-gray-600 text-sm">
                    {shop.free_images_used}/{shop.total_images} resim kullanÄ±ldÄ±
                  </p>
                </div>
                <div className="text-right">
                  <span className={`text-lg font-bold ${
                    shop.free_images_used >= shop.total_images 
                      ? 'text-red-600' 
                      : 'text-green-600'
                  }`}>
                    {shop.total_images - shop.free_images_used} resim kaldÄ±
                  </span>
                </div>
              </div>
              
              <div className="w-full bg-gray-200 rounded-full h-3">
                <div 
                  className={`h-3 rounded-full ${
                    shop.free_images_used >= shop.total_images 
                      ? 'bg-red-600' 
                      : 'bg-blue-600'
                  }`}
                  style={{ 
                    width: `${Math.min(100, (shop.free_images_used / shop.total_images) * 100)}%` 
                  }}
                ></div>
              </div>
              
              {shop.free_images_used >= shop.total_images && (
                <div className="mt-4 p-3 bg-red-50 border border-red-200 rounded-lg">
                  <p className="text-red-700 text-sm">
                    âš ï¸ Resim limitiniz doldu. Yeni resim yÃ¼klemek iÃ§in paketinizi yÃ¼kseltin.
                  </p>
                </div>
              )}
            </div>

            {/* MaÄŸaza Linki */}
            <div className="bg-white rounded-xl shadow p-6">
              <h3 className="font-bold text-gray-900 mb-4">ğŸ”— MaÄŸaza Linkiniz</h3>
              <div className="space-y-3">
                <p className="text-gray-600 text-sm">
                  MÃ¼ÅŸteriler bu link Ã¼zerinden maÄŸazanÄ±za ulaÅŸabilir:
                </p>
                
                <div className="flex">
                  <input
                    type="text"
                    readOnly
                    value={`${typeof window !== 'undefined' ? window.location.origin : ''}/shop/${shop.id}`}
                    className="flex-grow px-4 py-2 border border-gray-300 rounded-l-lg bg-gray-50 text-sm"
                  />
                  <button
                    onClick={() => {
                      navigator.clipboard.writeText(`${typeof window !== 'undefined' ? window.location.origin : ''}/shop/${shop.id}`)
                      alert('Link kopyalandÄ±!')
                    }}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-lg text-sm"
                  >
                    Kopyala
                  </button>
                </div>
                
                <div className="flex space-x-3 mt-4">
                  <button
                    onClick={handleViewShop}
                    className="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 rounded-lg text-sm"
                  >
                    MaÄŸazayÄ± GÃ¶r
                  </button>
                  <button
                    onClick={() => {
                      window.open(`/shop/${shop.id}`, '_blank')
                    }}
                    className="flex-1 bg-blue-100 hover:bg-blue-200 text-blue-800 font-medium py-2 rounded-lg text-sm"
                  >
                    Yeni Sekmede
                  </button>
                </div>
              </div>
            </div>

            {/* HÄ±zlÄ± Ä°statistikler */}
            {stats && (
              <div className="bg-white rounded-xl shadow p-6">
                <h3 className="font-bold text-gray-900 mb-4">ğŸ“Š Spot Ä°statistikleri</h3>
                <div className="space-y-4">
                  <div className="flex justify-between">
                    <span className="text-gray-600">Toplam Spot:</span>
                    <span className="font-bold">{stats.total_spots}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Aktif Spot:</span>
                    <span className="font-bold text-green-600">{stats.active_spots}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Bulunan Spot:</span>
                    <span className="font-bold text-blue-600">{stats.found_spots}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">GÃ¶rÃ¼ntÃ¼lenme:</span>
                    <span className="font-bold">{stats.total_views}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">YardÄ±m Edenler:</span>
                    <span className="font-bold">{stats.total_helps}</span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Bu Ay:</span>
                    <span className="font-bold">{stats.monthly_spots}</span>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>

        {/* Alt KÄ±sÄ±m - Klasik Dashboard */}
        <div className="mt-12 bg-white rounded-xl shadow-lg">
          <div className="p-6 border-b">
            <div className="flex overflow-x-auto">
              <button
                onClick={() => setActiveTab('overview')}
                className={`flex-shrink-0 px-6 py-3 text-center font-medium whitespace-nowrap ${
                  activeTab === 'overview'
                    ? 'text-blue-600 border-b-2 border-blue-600'
                    : 'text-gray-600 hover:text-gray-900'
                }`}
              >
                ğŸ‘ï¸ Genel BakÄ±ÅŸ
              </button>
              <button
                onClick={() => setActiveTab('spots')}
                className={`flex-shrink-0 px-6 py-3 text-center font-medium whitespace-nowrap ${
                  activeTab === 'spots'
                    ? 'text-blue-600 border-b-2 border-blue-600'
                    : 'text-gray-600 hover:text-gray-900'
                }`}
              >
                ğŸ“ Spot'larÄ±m
              </button>
              <button
                onClick={() => setActiveTab('analytics')}
                className={`flex-shrink-0 px-6 py-3 text-center font-medium whitespace-nowrap ${
                  activeTab === 'analytics'
                    ? 'text-blue-600 border-b-2 border-blue-600'
                    : 'text-gray-600 hover:text-gray-900'
                }`}
              >
                ğŸ“ˆ Analitik
              </button>
              <button
                onClick={() => setActiveTab('settings')}
                className={`flex-shrink-0 px-6 py-3 text-center font-medium whitespace-nowrap ${
                  activeTab === 'settings'
                    ? 'text-blue-600 border-b-2 border-blue-600'
                    : 'text-gray-600 hover:text-gray-900'
                }`}
              >
                âš™ï¸ Ayarlar
              </button>
            </div>
          </div>
          
          <div className="p-6">
            {activeTab === 'overview' && (
              <div>
                <div className="mb-8">
                  <h3 className="text-xl font-bold text-gray-900 mb-4">HoÅŸ Geldiniz!</h3>
                  <p className="text-gray-600 mb-6">
                    MaÄŸaza panelinize hoÅŸ geldiniz. Buradan spot'larÄ±nÄ±zÄ± yÃ¶netebilir, 
                    istatistiklerinizi gÃ¶rÃ¼ntÃ¼leyebilir ve maÄŸaza ayarlarÄ±nÄ±zÄ± dÃ¼zenleyebilirsiniz.
                  </p>
                  
                  <div className="grid md:grid-cols-2 gap-6">
                    <div className="bg-blue-50 p-6 rounded-xl">
                      <h4 className="font-bold text-blue-900 mb-3">ğŸ“ˆ Performans Ä°puÃ§larÄ±</h4>
                      <ul className="space-y-2 text-sm text-blue-800">
                        <li>â€¢ Resimli spot'lar %70 daha hÄ±zlÄ± bulunuyor</li>
                        <li>â€¢ DetaylÄ± aÃ§Ä±klamalar yardÄ±m ÅŸansÄ±nÄ± artÄ±rÄ±r</li>
                        <li>â€¢ Aktif kalmak gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼nÃ¼zÃ¼ artÄ±rÄ±r</li>
                        <li>â€¢ HÄ±zlÄ± cevap vermek mÃ¼ÅŸteri memnuniyetini artÄ±rÄ±r</li>
                      </ul>
                    </div>
                    
                    <div className="bg-green-50 p-6 rounded-xl">
                      <h4 className="font-bold text-green-900 mb-3">ğŸš€ HÄ±zlÄ± BaÅŸlangÄ±Ã§</h4>
                      <ul className="space-y-2 text-sm text-green-800">
                        <li>â€¢ MaÄŸaza profilinizi tamamlayÄ±n</li>
                        <li>â€¢ Ä°lk spot'unuzu oluÅŸturun</li>
                        <li>â€¢ DiÄŸer kullanÄ±cÄ±lara yardÄ±m edin</li>
                        <li>â€¢ MÃ¼ÅŸteri yorumlarÄ±nÄ± takip edin</li>
                      </ul>
                    </div>
                  </div>
                </div>

                {/* Son Spot'lar */}
                <div>
                  <div className="flex justify-between items-center mb-4">
                    <h3 className="text-lg font-bold text-gray-900">Son Spot'lar</h3>
                    <button
                      onClick={() => setActiveTab('spots')}
                      className="text-blue-600 hover:text-blue-800 text-sm"
                    >
                      TÃ¼mÃ¼nÃ¼ GÃ¶r â†’
                    </button>
                  </div>
                  
                  {recentSpots.length === 0 ? (
                    <div className="bg-gray-50 rounded-xl p-8 text-center">
                      <div className="text-4xl mb-4">ğŸ“</div>
                      <p className="text-gray-600">HenÃ¼z spot oluÅŸturmadÄ±nÄ±z</p>
                      <button
                        onClick={handleCreateSpot}
                        className="mt-4 text-blue-600 hover:text-blue-800 font-medium"
                      >
                        Ä°lk Spot'unu OluÅŸtur â†’
                      </button>
                    </div>
                  ) : (
                    <div className="bg-white border border-gray-200 rounded-xl overflow-hidden">
                      <table className="w-full">
                        <thead className="bg-gray-50">
                          <tr>
                            <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">BaÅŸlÄ±k</th>
                            <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Durum</th>
                            <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">GÃ¶rÃ¼ntÃ¼lenme</th>
                            <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">YardÄ±m</th>
                            <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Tarih</th>
                          </tr>
                        </thead>
                        <tbody className="divide-y divide-gray-100">
                          {recentSpots.map((spot) => (
                            <tr key={spot.id} className="hover:bg-gray-50">
                              <td className="py-3 px-4">
                                <Link
                                  href={`/spots/${spot.id}`}
                                  className="font-medium text-blue-600 hover:text-blue-800"
                                >
                                  {spot.title.length > 40 ? spot.title.substring(0, 40) + '...' : spot.title}
                                </Link>
                              </td>
                              <td className="py-3 px-4">
                                <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                                  spot.status === 'active'
                                    ? 'bg-green-100 text-green-800'
                                    : 'bg-blue-100 text-blue-800'
                                }`}>
                                  {spot.status === 'active' ? 'Aktif' : 'Bulundu'}
                                </span>
                              </td>
                              <td className="py-3 px-4">{spot.views}</td>
                              <td className="py-3 px-4">{spot.helps}</td>
                              <td className="py-3 px-4 text-sm text-gray-500">
                                {new Date(spot.created_at).toLocaleDateString('tr-TR')}
                              </td>
                            </tr>
                          ))}
                        </tbody>
                      </table>
                    </div>
                  )}
                </div>
              </div>
            )}
            
            {activeTab === 'spots' && (
              <div>
                <h3 className="text-xl font-bold text-gray-900 mb-6">TÃ¼m Spot'larÄ±m</h3>
                <div className="bg-gray-50 rounded-xl p-8 text-center">
                  <div className="text-4xl mb-4">ğŸš§</div>
                  <h4 className="text-lg font-bold text-gray-900 mb-2">YakÄ±nda Burada!</h4>
                  <p className="text-gray-600 mb-6">
                    TÃ¼m spot'larÄ±nÄ±zÄ± gÃ¶rÃ¼ntÃ¼leyeceÄŸiniz panel yakÄ±nda eklenecek.
                  </p>
                  <button
                    onClick={() => router.push('/spots')}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg"
                  >
                    TÃ¼m Spot'larÄ± GÃ¶rÃ¼ntÃ¼le
                  </button>
                </div>
              </div>
            )}
            
            {activeTab === 'analytics' && (
              <div>
                <h3 className="text-xl font-bold text-gray-900 mb-6">MaÄŸaza Analitik</h3>
                <div className="bg-gray-50 rounded-xl p-8 text-center">
                  <div className="text-4xl mb-4">ğŸ“Š</div>
                  <h4 className="text-lg font-bold text-gray-900 mb-2">DetaylÄ± Raporlar YakÄ±nda!</h4>
                  <p className="text-gray-600">
                    HaftalÄ±k, aylÄ±k istatistikler ve performans raporlarÄ± yakÄ±nda eklenecek.
                  </p>
                </div>
              </div>
            )}
            
            {activeTab === 'settings' && (
              <div>
                <h3 className="text-xl font-bold text-gray-900 mb-6">MaÄŸaza AyarlarÄ±</h3>
                
                <div className="space-y-6">
                  {/* Temel Bilgiler */}
                  <div className="bg-white border border-gray-200 rounded-xl p-6">
                    <h4 className="font-bold text-gray-900 mb-4 flex items-center">
                      <span className="text-blue-600 mr-2">ğŸª</span>
                      Temel Bilgiler
                    </h4>
                    
                    <div className="grid md:grid-cols-2 gap-4 mb-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          MaÄŸaza AdÄ±
                        </label>
                        <p className="font-medium">{shop.shop_name}</p>
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Åehir
                        </label>
                        <p className="font-medium">{shop.city}</p>
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Email
                        </label>
                        <p className="font-medium">{shop.email}</p>
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Telefon
                        </label>
                        <p className="font-medium">{shop.phone || 'BelirtilmemiÅŸ'}</p>
                      </div>
                    </div>
                    
                    <div className="mt-4">
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        AÃ§Ä±klama
                      </label>
                      <p className="text-gray-700 whitespace-pre-line">
                        {shop.description || 'AÃ§Ä±klama eklenmemiÅŸ'}
                      </p>
                    </div>
                    
                    <button
                      onClick={() => router.push('/for-business?edit=true')}
                      className="mt-6 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg"
                    >
                      Bilgileri DÃ¼zenle
                    </button>
                  </div>

                  {/* Paket Bilgileri */}
                  <div className="bg-white border border-gray-200 rounded-xl p-6">
                    <h4 className="font-bold text-gray-900 mb-4 flex items-center">
                      <span className="text-yellow-600 mr-2">â­</span>
                      Paket Bilgileri
                    </h4>
                    
                    <div className="space-y-4">
                      <div className="flex justify-between items-center">
                        <div>
                          <p className="font-medium">Mevcut Paket</p>
                          <p className="text-sm text-gray-600">
                            {shop.subscription_type === 'free' ? 'Ãœcretsiz BaÅŸlangÄ±Ã§' : shop.subscription_type}
                          </p>
                        </div>
                        <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">
                          {shop.subscription_type === 'free' ? 'ÃœCRETSÄ°Z' : 'PREMIUM'}
                        </span>
                      </div>
                      
                      <div className="flex justify-between items-center">
                        <div>
                          <p className="font-medium">Resim Limiti</p>
                          <p className="text-sm text-gray-600">
                            {shop.free_images_used}/{shop.total_images} kullanÄ±ldÄ±
                          </p>
                        </div>
                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${
                          shop.free_images_used >= shop.total_images 
                            ? 'bg-red-100 text-red-800' 
                            : 'bg-green-100 text-green-800'
                        }`}>
                          {shop.total_images - shop.free_images_used} kaldÄ±
                        </span>
                      </div>
                      
                      <button
                        onClick={handleUpgrade}
                        className="w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-medium py-3 rounded-lg"
                      >
                        â­ Premium'a YÃ¼kselt
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      </main>
    </div>
  )
}

====================================================================================================
ğŸ§© COMPONENT'LER
====================================================================================================

ğŸ“„ components/admin/AdPerformance.tsx
ğŸ“Š 167 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/admin/AdPerformance.tsx
'use client'

import { useState } from 'react'

interface AdPerformanceData {
  name: string
  impressions: number
  clicks: number
  revenue: number
  ctr: number
  rpm: number
}

export default function AdPerformance() {
  const [timeRange, setTimeRange] = useState<'today' | 'week' | 'month'>('week')

  const performanceData: AdPerformanceData[] = [
    {
      name: 'Header Reklam',
      impressions: 3245,
      clicks: 58,
      revenue: 24.50,
      ctr: 1.79,
      rpm: 7.55
    },
    {
      name: 'Sidebar Reklam',
      impressions: 2890,
      clicks: 42,
      revenue: 18.75,
      ctr: 1.45,
      rpm: 6.49
    },
    {
      name: 'In-Article Reklam',
      impressions: 1567,
      clicks: 31,
      revenue: 15.20,
      ctr: 1.98,
      rpm: 9.70
    },
    {
      name: 'Footer Reklam',
      impressions: 4321,
      clicks: 65,
      revenue: 28.90,
      ctr: 1.50,
      rpm: 6.69
    },
    {
      name: 'Mobile Banner',
      impressions: 2789,
      clicks: 49,
      revenue: 21.30,
      ctr: 1.76,
      rpm: 7.64
    }
  ]

  const totals = performanceData.reduce(
    (acc, item) => ({
      impressions: acc.impressions + item.impressions,
      clicks: acc.clicks + item.clicks,
      revenue: acc.revenue + item.revenue
    }),
    { impressions: 0, clicks: 0, revenue: 0 }
  )

  return (
    <div className="bg-white rounded-xl shadow p-6">
      <div className="flex justify-between items-center mb-6">
        <div>
          <h3 className="text-lg font-bold text-gray-900">Reklam PerformansÄ±</h3>
          <p className="text-gray-600">Reklam Ã¼nitelerinin performansÄ±</p>
        </div>
        <div className="flex space-x-2">
          {(['today', 'week', 'month'] as const).map((range) => (
            <button
              key={range}
              onClick={() => setTimeRange(range)}
              className={`px-3 py-1 rounded-lg text-sm font-medium ${
                timeRange === range
                  ? 'bg-blue-600 text-white'
                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
              }`}
            >
              {range === 'today' ? 'BugÃ¼n' : range === 'week' ? 'Bu Hafta' : 'Bu Ay'}
            </button>
          ))}
        </div>
      </div>

      {/* Performans Tablosu */}
      <div className="overflow-x-auto">
        <table className="w-full">
          <thead>
            <tr className="bg-gray-50">
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Reklam AdÄ±</th>
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">GÃ¶sterim</th>
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">TÄ±klama</th>
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">CTR</th>
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Gelir</th>
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">RPM</th>
            </tr>
          </thead>
          <tbody className="divide-y divide-gray-200">
            {performanceData.map((item, index) => (
              <tr key={index} className="hover:bg-gray-50">
                <td className="py-3 px-4 font-medium">{item.name}</td>
                <td className="py-3 px-4">{item.impressions.toLocaleString()}</td>
                <td className="py-3 px-4">{item.clicks}</td>
                <td className="py-3 px-4">
                  <span className="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                    {item.ctr}%
                  </span>
                </td>
                <td className="py-3 px-4 font-medium">{item.revenue.toFixed(2)} â‚º</td>
                <td className="py-3 px-4">{item.rpm.toFixed(2)} â‚º</td>
              </tr>
            ))}
          </tbody>
          <tfoot className="bg-gray-50 font-bold">
            <tr>
              <td className="py-3 px-4">TOPLAM</td>
              <td className="py-3 px-4">{totals.impressions.toLocaleString()}</td>
              <td className="py-3 px-4">{totals.clicks}</td>
              <td className="py-3 px-4">
                {((totals.clicks / totals.impressions) * 100).toFixed(2)}%
              </td>
              <td className="py-3 px-4">{totals.revenue.toFixed(2)} â‚º</td>
              <td className="py-3 px-4">
                {((totals.revenue / totals.impressions) * 1000).toFixed(2)} â‚º
              </td>
            </tr>
          </tfoot>
        </table>
      </div>

      {/* Ã–zet */}
      <div className="mt-6 grid grid-cols-3 gap-4">
        <div className="text-center p-4 bg-blue-50 rounded-lg">
          <p className="text-sm text-blue-600">Ortalama CTR</p>
          <p className="text-xl font-bold">
            {(
              performanceData.reduce((sum, item) => sum + item.ctr, 0) / performanceData.length
            ).toFixed(2)}%
          </p>
        </div>
        <div className="text-center p-4 bg-green-50 rounded-lg">
          <p className="text-sm text-green-600">Ortalama RPM</p>
          <p className="text-xl font-bold">
            {(
              performanceData.reduce((sum, item) => sum + item.rpm, 0) / performanceData.length
            ).toFixed(2)} â‚º
          </p>
        </div>
        <div className="text-center p-4 bg-purple-50 rounded-lg">
          <p className="text-sm text-purple-600">GÃ¼nlÃ¼k Ortalama</p>
          <p className="text-xl font-bold">
            {(totals.revenue / (timeRange === 'week' ? 7 : timeRange === 'month' ? 30 : 1)).toFixed(2)} â‚º
          </p>
        </div>
      </div>
    </div>
  )
}

ğŸ“„ components/admin/AdUnitManager.tsx
ğŸ“Š 351 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/admin/AdUnitManager.tsx
'use client'

import { useState } from 'react'

// Tip tanÄ±mlarÄ± - export edelim
export interface AdUnit {
  id: string
  name: string
  type: 'display' | 'in-article' | 'in-feed'
  size: string
  position: string
  status: 'active' | 'paused'
  revenue: number
}

export interface AdUnitManagerProps {
  adUnits: AdUnit[]
  onUpdate: (units: AdUnit[]) => void
  clientId: string
}

export default function AdUnitManager({ adUnits, onUpdate, clientId }: AdUnitManagerProps) {
  const [showForm, setShowForm] = useState(false)
  const [newAdUnit, setNewAdUnit] = useState({
    name: '',
    type: 'display' as 'display' | 'in-article' | 'in-feed',
    size: '300x250',
    position: 'sidebar',
    status: 'active' as 'active' | 'paused'
  })

  const sizes = [
    '300x250', '336x280', '728x90', '970x250',
    '300x600', '320x100', '160x600'
  ]

  const positions = [
    'header', 'sidebar', 'footer',
    'content-top', 'content-middle', 'content-bottom',
    'in-article', 'in-feed'
  ]

  const addAdUnit = () => {
    if (!newAdUnit.name.trim()) {
      alert('LÃ¼tfen reklam adÄ± girin')
      return
    }

    const unit: AdUnit = {
      id: `ad-${Date.now()}`,
      name: newAdUnit.name,
      type: newAdUnit.type,
      size: newAdUnit.size,
      position: newAdUnit.position,
      status: newAdUnit.status,
      revenue: 0
    }

    // onUpdate'i Ã§aÄŸÄ±r - TÄ°P GÃœVENLÄ°
    onUpdate([...adUnits, unit])
    
    // Formu sÄ±fÄ±rla
    setNewAdUnit({
      name: '',
      type: 'display',
      size: '300x250',
      position: 'sidebar',
      status: 'active'
    })
    setShowForm(false)
  }

  const toggleAdStatus = (id: string) => {
    // updated deÄŸiÅŸkenine aÃ§Ä±k tip atamasÄ± yap
    const updated: AdUnit[] = adUnits.map(unit => {
      if (unit.id === id) {
        return {
          ...unit,
          status: unit.status === 'active' ? 'paused' : 'active'
        }
      }
      return unit
    })
    
    // onUpdate'i Ã§aÄŸÄ±r - artÄ±k tip gÃ¼venli
    onUpdate(updated)
  }

  const deleteAdUnit = (id: string) => {
    const updated = adUnits.filter(unit => unit.id !== id)
    onUpdate(updated)
  }

  return (
    <div className="bg-white rounded-xl shadow p-6">
      <div className="flex justify-between items-center mb-6">
        <h2 className="text-lg font-bold text-gray-900">Reklam Ãœniteleri</h2>
        <button
          onClick={() => setShowForm(!showForm)}
          className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg"
        >
          {showForm ? 'Ä°ptal' : '+ Yeni Reklam'}
        </button>
      </div>

      {/* Yeni Reklam Formu */}
      {showForm && (
        <div className="bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200">
          <h3 className="font-bold text-gray-900 mb-4">Yeni Reklam Ãœnitesi</h3>
          
          <div className="grid md:grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Reklam AdÄ± *
              </label>
              <input
                type="text"
                value={newAdUnit.name}
                onChange={(e) => setNewAdUnit(prev => ({...prev, name: e.target.value}))}
                placeholder="Ã–rn: Ana Sayfa Sidebar"
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                required
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Reklam Tipi
              </label>
              <select
                value={newAdUnit.type}
                onChange={(e) => setNewAdUnit(prev => ({
                  ...prev, 
                  type: e.target.value as 'display' | 'in-article' | 'in-feed'
                }))}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
              >
                <option value="display">Display Reklam</option>
                <option value="in-article">Makale Ä°Ã§i</option>
                <option value="in-feed">Feed Ä°Ã§i</option>
              </select>
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Boyut
              </label>
              <select
                value={newAdUnit.size}
                onChange={(e) => setNewAdUnit(prev => ({...prev, size: e.target.value}))}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
              >
                {sizes.map(size => (
                  <option key={size} value={size}>{size}</option>
                ))}
              </select>
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Pozisyon
              </label>
              <select
                value={newAdUnit.position}
                onChange={(e) => setNewAdUnit(prev => ({...prev, position: e.target.value}))}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
              >
                {positions.map(pos => (
                  <option key={pos} value={pos}>{pos}</option>
                ))}
              </select>
            </div>

            <div className="md:col-span-2">
              <label className="block text-sm font-medium text-gray-700 mb-3">
                BaÅŸlangÄ±Ã§ Durumu
              </label>
              <div className="flex space-x-6">
                <label className="flex items-center space-x-2 cursor-pointer">
                  <input
                    type="radio"
                    name="status"
                    value="active"
                    checked={newAdUnit.status === 'active'}
                    onChange={() => setNewAdUnit(prev => ({...prev, status: 'active'}))}
                    className="w-4 h-4 text-blue-600"
                  />
                  <span className="text-sm font-medium text-gray-700">Aktif</span>
                  <span className="text-xs text-gray-500">(Hemen yayÄ±nda)</span>
                </label>
                <label className="flex items-center space-x-2 cursor-pointer">
                  <input
                    type="radio"
                    name="status"
                    value="paused"
                    checked={newAdUnit.status === 'paused'}
                    onChange={() => setNewAdUnit(prev => ({...prev, status: 'paused'}))}
                    className="w-4 h-4 text-blue-600"
                  />
                  <span className="text-sm font-medium text-gray-700">DuraklatÄ±lmÄ±ÅŸ</span>
                  <span className="text-xs text-gray-500">(Daha sonra aktif edilecek)</span>
                </label>
              </div>
            </div>
          </div>

          <div className="mt-6 flex justify-end space-x-3">
            <button
              type="button"
              onClick={() => setShowForm(false)}
              className="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium"
            >
              Ä°ptal
            </button>
            <button
              onClick={addAdUnit}
              disabled={!newAdUnit.name.trim()}
              className="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-6 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
            >
              Reklam Ekle
            </button>
          </div>
        </div>
      )}

      {/* Reklam Listesi */}
      {adUnits.length === 0 ? (
        <div className="text-center py-12 text-gray-500 border-2 border-dashed border-gray-200 rounded-lg">
          <div className="text-4xl mb-4">ğŸ“º</div>
          <p className="text-lg font-medium">HenÃ¼z reklam Ã¼niteniz yok</p>
          <p className="text-sm mt-2">Yeni reklam eklemek iÃ§in "Yeni Reklam" butonuna tÄ±klayÄ±n</p>
        </div>
      ) : (
        <>
          <div className="overflow-x-auto">
            <table className="w-full min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Ad
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Tip
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Boyut
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Pozisyon
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Durum
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Gelir
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Ä°ÅŸlemler
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {adUnits.map((unit) => (
                  <tr key={unit.id} className="hover:bg-gray-50">
                    <td className="px-6 py-4 whitespace-nowrap">
                      <div className="font-medium text-gray-900">{unit.name}</div>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <span className="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">
                        {unit.type === 'display' ? 'Display' : 
                         unit.type === 'in-article' ? 'Makale Ä°Ã§i' : 'Feed Ä°Ã§i'}
                      </span>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {unit.size}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {unit.position}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${
                        unit.status === 'active' 
                          ? 'bg-green-100 text-green-800' 
                          : 'bg-red-100 text-red-800'
                      }`}>
                        {unit.status === 'active' ? 'Aktif' : 'DuraklatÄ±ldÄ±'}
                      </span>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                      {unit.revenue.toFixed(2)} â‚º
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                      <div className="flex space-x-2">
                        <button
                          onClick={() => toggleAdStatus(unit.id)}
                          className={`px-3 py-1 rounded text-xs font-medium ${
                            unit.status === 'active'
                              ? 'bg-red-50 text-red-700 hover:bg-red-100 border border-red-200'
                              : 'bg-green-50 text-green-700 hover:bg-green-100 border border-green-200'
                          }`}
                        >
                          {unit.status === 'active' ? 'Duraklat' : 'Aktif Et'}
                        </button>
                        <button
                          onClick={() => deleteAdUnit(unit.id)}
                          className="px-3 py-1 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded text-xs font-medium border border-gray-300"
                        >
                          Sil
                        </button>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>

          {/* Ä°statistikler */}
          <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div className="bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200">
              <p className="text-sm font-medium text-blue-700">Toplam Reklam</p>
              <p className="text-2xl font-bold text-blue-900">{adUnits.length}</p>
              <p className="text-xs text-blue-600 mt-1">
                {adUnits.filter(u => u.status === 'active').length} aktif
              </p>
            </div>
            <div className="bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border border-green-200">
              <p className="text-sm font-medium text-green-700">Toplam Gelir</p>
              <p className="text-2xl font-bold text-green-900">
                {adUnits.reduce((sum, unit) => sum + unit.revenue, 0).toFixed(2)} â‚º
              </p>
              <p className="text-xs text-green-600 mt-1">
                Ortalama: {(adUnits.reduce((sum, unit) => sum + unit.revenue, 0) / adUnits.length || 0).toFixed(2)} â‚º
              </p>
            </div>
            <div className="bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200">
              <p className="text-sm font-medium text-purple-700">Tahmini AylÄ±k</p>
              <p className="text-2xl font-bold text-purple-900">
                {(adUnits.reduce((sum, unit) => sum + unit.revenue, 0) * 30).toFixed(2)} â‚º
              </p>
              <p className="text-xs text-purple-600 mt-1">
                TÃ¼m reklamlar aktifse
              </p>
            </div>
          </div>
        </>
      )}
    </div>
  )
}

ğŸ“„ components/shop/ActiveSearches.tsx
ğŸ“Š 210 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/shop/ActiveSearches.tsx
'use client'

import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'
import Link from 'next/link'

interface ActiveSearchesProps {
  shopId: string
  showCreateButton?: boolean
  limit?: number
}

export default function ActiveSearches({ 
  shopId, 
  showCreateButton = true,
  limit = 6 
}: ActiveSearchesProps) {
  const [searches, setSearches] = useState<any[]>([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    fetchActiveSearches()
  }, [shopId])

  const fetchActiveSearches = async () => {
    try {
      const { data, error } = await supabase
        .from('shop_searches')
        .select('*')
        .eq('shop_id', shopId)
        .eq('status', 'active')
        .order('priority_level', { ascending: false })
        .order('created_at', { ascending: false })
        .limit(limit)

      if (error) throw error
      setSearches(data || [])
    } catch (error) {
      console.error('Aramalar yÃ¼klenemedi:', error)
    } finally {
      setLoading(false)
    }
  }

  const getPriorityColor = (level: number) => {
    switch(level) {
      case 1: return 'bg-gray-100 text-gray-800'
      case 2: return 'bg-blue-100 text-blue-800'
      case 3: return 'bg-green-100 text-green-800'
      case 4: return 'bg-orange-100 text-orange-800'
      case 5: return 'bg-red-100 text-red-800'
      default: return 'bg-gray-100 text-gray-800'
    }
  }

  const getPriorityText = (level: number) => {
    switch(level) {
      case 1: return 'Ã‡ok DÃ¼ÅŸÃ¼k'
      case 2: return 'DÃ¼ÅŸÃ¼k'
      case 3: return 'Normal'
      case 4: return 'YÃ¼ksek'
      case 5: return 'Ã‡ok YÃ¼ksek'
      default: return 'BelirtilmemiÅŸ'
    }
  }

  if (loading) {
    return (
      <div className="bg-white rounded-xl shadow p-6">
        <div className="animate-pulse space-y-4">
          <div className="h-6 bg-gray-200 rounded w-1/4"></div>
          {[...Array(3)].map((_, i) => (
            <div key={i} className="h-20 bg-gray-200 rounded-lg"></div>
          ))}
        </div>
      </div>
    )
  }

  return (
    <div className="bg-white rounded-xl shadow-lg">
      <div className="p-6 border-b">
        <div className="flex items-center justify-between">
          <div>
            <h3 className="text-lg font-bold text-gray-900">ğŸ” Aktif Aramalar</h3>
            <p className="text-sm text-gray-600">{searches.length} aktif arama</p>
          </div>
          {showCreateButton && (
            <Link
              href={`/shop/${shopId}/searches/new`}
              className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg text-sm"
            >
              + Yeni Arama
            </Link>
          )}
        </div>
      </div>

      {searches.length === 0 ? (
        <div className="p-8 text-center">
          <div className="text-4xl mb-4">ğŸ”</div>
          <h4 className="font-bold text-gray-900 mb-2">HenÃ¼z aktif aramanÄ±z yok</h4>
          <p className="text-gray-600 mb-6">AradÄ±ÄŸÄ±nÄ±z Ã¼rÃ¼nleri listeleyin, otomatik eÅŸleÅŸmeleri bulalÄ±m</p>
          {showCreateButton && (
            <Link
              href={`/shop/${shopId}/searches/new`}
              className="btn-primary inline-block"
            >
              Ä°lk AramayÄ± OluÅŸturun
            </Link>
          )}
        </div>
      ) : (
        <div className="divide-y divide-gray-100">
          {searches.map((search) => (
            <div key={search.id} className="p-6 hover:bg-gray-50">
              <div className="flex items-start justify-between">
                <div className="flex-1">
                  <div className="flex items-center space-x-3 mb-2">
                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${getPriorityColor(search.priority_level)}`}>
                      {getPriorityText(search.priority_level)}
                    </span>
                    <span className="text-sm text-gray-500">
                      {search.match_count || 0} eÅŸleÅŸme
                    </span>
                  </div>
                  
                  <h4 className="font-bold text-gray-900 mb-1">{search.title}</h4>
                  
                  {search.description && (
                    <p className="text-gray-600 text-sm line-clamp-2 mb-3">
                      {search.description}
                    </p>
                  )}

                  <div className="flex flex-wrap items-center gap-3 text-sm text-gray-500">
                    {search.category && (
                      <span className="bg-gray-100 px-2 py-1 rounded">
                        {search.category}
                      </span>
                    )}
                    {search.brand && (
                      <span className="flex items-center">
                        <span className="mr-1">ğŸ·ï¸</span>
                        {search.brand}
                      </span>
                    )}
                    {(search.min_price || search.max_price) && (
                      <span className="flex items-center">
                        <span className="mr-1">ğŸ’°</span>
                        {search.min_price || 0} - {search.max_price || 'âˆ'} TL
                      </span>
                    )}
                    {search.location && (
                      <span className="flex items-center">
                        <span className="mr-1">ğŸ“</span>
                        {search.location}
                      </span>
                    )}
                  </div>
                </div>

                <Link
                  href={`/shop/${shopId}/searches/${search.id}`}
                  className="ml-4 text-blue-600 hover:text-blue-800 text-sm font-medium whitespace-nowrap"
                >
                  Detay â†’
                </Link>
              </div>

              {/* Progress bar for days left */}
              {search.expire_date && (
                <div className="mt-4">
                  <div className="flex justify-between text-xs mb-1">
                    <span className="text-gray-600">
                      {Math.ceil((new Date(search.expire_date).getTime() - Date.now()) / (1000 * 60 * 60 * 24))} gÃ¼n kaldÄ±
                    </span>
                    <span className="font-medium">Sona eriyor: {new Date(search.expire_date).toLocaleDateString('tr-TR')}</span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div 
                      className="h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600"
                      style={{ 
                        width: `${Math.min(100, 
                          (1 - (new Date(search.expire_date).getTime() - Date.now()) / (30 * 24 * 60 * 60 * 1000)) * 100
                        )}%` 
                      }}
                    ></div>
                  </div>
                </div>
              )}
            </div>
          ))}
        </div>
      )}

      {searches.length > 0 && showCreateButton && (
        <div className="p-6 border-t text-center">
          <Link
            href={`/shop/${shopId}/searches`}
            className="text-blue-600 hover:text-blue-800 font-medium"
          >
            TÃ¼m AramalarÄ± GÃ¶r â†’
          </Link>
        </div>
      )}
    </div>
  )
}

ğŸ“„ components/shop/InventoryOverview.tsx
ğŸ“Š 188 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/shop/InventoryOverview.tsx
'use client'

import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'
import { useRouter } from 'next/navigation'

interface InventoryOverviewProps {
  shopId: string
}

export default function InventoryOverview({ shopId }: InventoryOverviewProps) {
  const router = useRouter()
  const [inventory, setInventory] = useState<any[]>([])
  const [loading, setLoading] = useState(true)
  const [stats, setStats] = useState({
    active: 0,
    draft: 0,
    outOfStock: 0,
    total: 0
  })

  useEffect(() => {
    fetchInventory()
  }, [shopId])

  const fetchInventory = async () => {
    try {
      const { data } = await supabase
        .from('shop_inventory')
        .select('*')
        .eq('shop_id', shopId)
        .order('created_at', { ascending: false })
        .limit(5)

      const { count: activeCount } = await supabase
        .from('shop_inventory')
        .select('id', { count: 'exact', head: true })
        .eq('shop_id', shopId)
        .eq('status', 'active')

      const { count: draftCount } = await supabase
        .from('shop_inventory')
        .select('id', { count: 'exact', head: true })
        .eq('shop_id', shopId)
        .eq('status', 'draft')

      const { count: outOfStockCount } = await supabase
        .from('shop_inventory')
        .select('id', { count: 'exact', head: true })
        .eq('shop_id', shopId)
        .eq('status', 'out_of_stock')

      const { count: totalCount } = await supabase
        .from('shop_inventory')
        .select('id', { count: 'exact', head: true })
        .eq('shop_id', shopId)

      setInventory(data || [])
      setStats({
        active: activeCount || 0,
        draft: draftCount || 0,
        outOfStock: outOfStockCount || 0,
        total: totalCount || 0
      })
    } catch (error) {
      console.error('Inventory yÃ¼klenemedi:', error)
    } finally {
      setLoading(false)
    }
  }

  const getStatusColor = (status: string) => {
    switch(status) {
      case 'active': return 'bg-green-100 text-green-800'
      case 'draft': return 'bg-gray-100 text-gray-800'
      case 'out_of_stock': return 'bg-red-100 text-red-800'
      default: return 'bg-gray-100 text-gray-800'
    }
  }

  if (loading) {
    return (
      <div className="bg-white rounded-xl shadow p-6">
        <div className="animate-pulse">
          <div className="h-6 bg-gray-200 rounded w-1/4 mb-4"></div>
          <div className="space-y-3">
            {[...Array(3)].map((_, i) => (
              <div key={i} className="h-16 bg-gray-200 rounded"></div>
            ))}
          </div>
        </div>
      </div>
    )
  }

  return (
    <div className="bg-white rounded-xl shadow p-6">
      <div className="flex items-center justify-between mb-6">
        <h3 className="font-bold text-gray-900">ğŸ“¦ Envanter Ã–zeti</h3>
        <button
          onClick={() => router.push(`/shop/${shopId}/inventory`)}
          className="text-blue-600 hover:text-blue-800 text-sm font-medium"
        >
          TÃ¼mÃ¼nÃ¼ GÃ¶r â†’
        </button>
      </div>

      {/* Stats */}
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
        <div className="text-center p-3 bg-blue-50 rounded-lg">
          <div className="text-xl font-bold text-blue-600">{stats.active}</div>
          <div className="text-sm text-gray-600">Aktif</div>
        </div>
        <div className="text-center p-3 bg-gray-50 rounded-lg">
          <div className="text-xl font-bold text-gray-600">{stats.draft}</div>
          <div className="text-sm text-gray-600">Taslak</div>
        </div>
        <div className="text-center p-3 bg-red-50 rounded-lg">
          <div className="text-xl font-bold text-red-600">{stats.outOfStock}</div>
          <div className="text-sm text-gray-600">Stok Yok</div>
        </div>
        <div className="text-center p-3 bg-green-50 rounded-lg">
          <div className="text-xl font-bold text-green-600">{stats.total}</div>
          <div className="text-sm text-gray-600">Toplam</div>
        </div>
      </div>

      {/* Recent Items */}
      <div className="space-y-3">
        {inventory.length === 0 ? (
          <div className="text-center py-8">
            <div className="text-4xl mb-4">ğŸ“­</div>
            <h4 className="font-bold text-gray-900 mb-2">HenÃ¼z Ã¼rÃ¼n eklenmemiÅŸ</h4>
            <p className="text-gray-600 mb-4">Ä°lk Ã¼rÃ¼nÃ¼nÃ¼zÃ¼ ekleyerek baÅŸlayÄ±n</p>
            <button
              onClick={() => router.push(`/shop/${shopId}/inventory/new`)}
              className="btn-primary"
            >
              Ä°lk ÃœrÃ¼nÃ¼ Ekle
            </button>
          </div>
        ) : (
          <>
            {inventory.map((item) => (
              <div 
                key={item.id}
                className="flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg cursor-pointer"
                onClick={() => router.push(`/shop/${shopId}/inventory/${item.id}`)}
              >
                <div className="flex items-center space-x-3">
                  {item.images && item.images.length > 0 ? (
                    <div className="w-12 h-12 bg-gray-100 rounded-lg overflow-hidden">
                      <img
                        src={item.images[0]}
                        alt={item.title}
                        className="w-full h-full object-cover"
                      />
                    </div>
                  ) : (
                    <div className="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center">
                      <span className="text-gray-400">ğŸ“¦</span>
                    </div>
                  )}
                  
                  <div>
                    <h4 className="font-medium text-gray-900 line-clamp-1">
                      {item.title}
                    </h4>
                    <p className="text-sm text-gray-600">
                      {item.price.toLocaleString('tr-TR')} {item.currency}
                    </p>
                  </div>
                </div>
                
                <span className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(item.status)}`}>
                  {item.status === 'active' ? 'Aktif' : 
                   item.status === 'draft' ? 'Taslak' : 
                   item.status === 'out_of_stock' ? 'Stok Yok' : item.status}
                </span>
              </div>
            ))}
          </>
        )}
      </div>
    </div>
  )
}

ğŸ“„ components/shop/QuickActions.tsx
ğŸ“Š 109 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/shop/QuickActions.tsx
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { supabase } from '@/lib/supabase';
import { Plus, Search, Share2, BarChart, Loader2 } from 'lucide-react';

interface QuickActionsProps {
  shopId: string;
  onActionComplete?: () => void;
}

export default function QuickActions({ shopId, onActionComplete }: QuickActionsProps) {
  const router = useRouter();
  const [loading, setLoading] = useState<string | null>(null);

  const actions = [
    {
      id: 'add-product',
      title: 'ÃœrÃ¼n Ekle',
      description: 'SatÄ±ÅŸa sunacaÄŸÄ±nÄ±z Ã¼rÃ¼nÃ¼ envantere ekleyin',
      icon: <Plus size={24} />,
      color: 'bg-green-100 text-green-700 hover:bg-green-200',
      path: `/shop/${shopId}/inventory/add`
    },
    {
      id: 'create-search',
      title: 'Arama OluÅŸtur',
      description: 'AradÄ±ÄŸÄ±nÄ±z Ã¼rÃ¼nleri belirleyin',
      icon: <Search size={24} />,
      color: 'bg-blue-100 text-blue-700 hover:bg-blue-200',
      path: `/shop/${shopId}/searches/add`
    },
    {
      id: 'create-post',
      title: 'PaylaÅŸÄ±m Yap',
      description: 'MaÄŸazanÄ±zÄ± tanÄ±tan iÃ§erik paylaÅŸÄ±n',
      icon: <Share2 size={24} />,
      color: 'bg-purple-100 text-purple-700 hover:bg-purple-200',
      path: `/shop/${shopId}/social/create`
    },
    {
      id: 'get-report',
      title: 'Rapor Al',
      description: 'Performans raporlarÄ±nÄ± gÃ¶rÃ¼ntÃ¼leyin',
      icon: <BarChart size={24} />,
      color: 'bg-orange-100 text-orange-700 hover:bg-orange-200',
      path: `/shop/${shopId}/analytics`
    }
  ];

  const handleAction = async (action: typeof actions[0]) => {
    setLoading(action.id);
    
    try {
      // EÄŸer yol varsa yÃ¶nlendir
      if (action.path) {
        router.push(action.path);
      }
      
      // Callback Ã§aÄŸÄ±r
      if (onActionComplete) {
        setTimeout(() => {
          onActionComplete();
        }, 500);
      }
    } catch (error) {
      console.error(`${action.title} iÅŸlemi baÅŸarÄ±sÄ±z:`, error);
      alert(`${action.title} iÅŸlemi sÄ±rasÄ±nda bir hata oluÅŸtu.`);
    } finally {
      setLoading(null);
    }
  };

  return (
    <div className="bg-white rounded-xl shadow p-6">
      <div className="flex justify-between items-center mb-6">
        <div>
          <h3 className="text-lg font-bold text-gray-900">âš¡ HÄ±zlÄ± Eylemler</h3>
          <p className="text-gray-600 text-sm">MaÄŸazanÄ±zÄ± hÄ±zlÄ±ca yÃ¶netin</p>
        </div>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        {actions.map((action) => (
          <button
            key={action.id}
            onClick={() => handleAction(action)}
            disabled={loading === action.id}
            className={`p-4 rounded-xl border ${action.color} transition-all duration-200 flex flex-col items-center justify-center h-full min-h-[140px] disabled:opacity-50`}
          >
            <div className="mb-3">
              {loading === action.id ? (
                <Loader2 size={24} className="animate-spin" />
              ) : (
                action.icon
              )}
            </div>
            <div className="text-center">
              <h4 className="font-bold mb-1">{action.title}</h4>
              <p className="text-xs opacity-90">{action.description}</p>
            </div>
          </button>
        ))}
      </div>
    </div>
  );
}

ğŸ“„ components/shop/RecentMatches.tsx
ğŸ“Š 167 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/shop/RecentMatches.tsx - DÃœZELTÄ°LMÄ°Å VERSÄ°YON
'use client'

import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'
import { useRouter } from 'next/navigation'

interface RecentMatchesProps {
  shopId: string
  limit?: number
}

export default function RecentMatches({ shopId, limit = 5 }: RecentMatchesProps) {
  const router = useRouter()
  const [matches, setMatches] = useState<any[]>([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    fetchRecentMatches()
  }, [shopId])

  const fetchRecentMatches = async () => {
    try {
      const { data } = await supabase
        .from('shop_search_matches')
        .select(`
          *,
          search:shop_searches(*),
          inventory:shop_inventory(*),
          spot:spots(*)
        `)
        .eq('search_id', shopId)
        .order('created_at', { ascending: false })
        .limit(limit)

      setMatches(data || [])
    } catch (error) {
      console.error('Recent matches yÃ¼klenemedi:', error)
    } finally {
      setLoading(false)
    }
  }

  const getMatchType = (match: any) => {
    if (match.inventory_id) return 'inventory'
    if (match.spot_id) return 'spot'
    return 'unknown'
  }

  const getMatchSource = (match: any) => {
    if (match.inventory) return 'BaÅŸka MaÄŸaza'
    if (match.spot) return 'KullanÄ±cÄ± Spot\'u'
    return 'Bilinmeyen'
  }

  if (loading) {
    return (
      <div className="bg-white rounded-xl shadow p-6">
        <div className="animate-pulse">
          <div className="h-6 bg-gray-200 rounded w-1/4 mb-4"></div>
          <div className="space-y-3">
            {[...Array(limit)].map((_, i) => (
              <div key={i} className="h-16 bg-gray-200 rounded"></div>
            ))}
          </div>
        </div>
      </div>
    )
  }

  if (matches.length === 0) {
    return (
      <div className="bg-white rounded-xl shadow p-6">
        <h3 className="font-bold text-gray-900 mb-6">âœ… Son EÅŸleÅŸmeler</h3>
        <div className="text-center py-8">
          <div className="text-4xl mb-4">ğŸ¤</div>
          <h4 className="font-bold text-gray-900 mb-2">HenÃ¼z eÅŸleÅŸme yok</h4>
          <p className="text-gray-600">
            Arama oluÅŸturduÄŸunuzda eÅŸleÅŸmeler burada gÃ¶rÃ¼necek
          </p>
        </div>
      </div>
    )
  }

  return (
    <div className="bg-white rounded-xl shadow p-6">
      <div className="flex items-center justify-between mb-6">
        <h3 className="font-bold text-gray-900">âœ… Son EÅŸleÅŸmeler</h3>
        <button
          onClick={() => router.push(`/shop/${shopId}/matches`)}
          className="text-blue-600 hover:text-blue-800 text-sm font-medium"
        >
          TÃ¼mÃ¼nÃ¼ GÃ¶r â†’
        </button>
      </div>

      <div className="space-y-4">
        {matches.map((match) => (
          <div 
            key={match.id}
            className="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer"
            onClick={() => {
              if (match.inventory_id) {
                router.push(`/shop/${shopId}/matches/inventory/${match.inventory_id}`)
              } else if (match.spot_id) {
                router.push(`/spots/${match.spot_id}`)
              }
            }}
          >
            <div className="flex-1">
              <div className="flex items-center space-x-3 mb-2">
                <div className={`w-10 h-10 rounded-full flex items-center justify-center ${
                  match.match_score >= 80 ? 'bg-green-100 text-green-600' :
                  match.match_score >= 60 ? 'bg-yellow-100 text-yellow-600' :
                  'bg-blue-100 text-blue-600'
                }`}>
                  {match.match_score >= 80 ? 'ğŸ”¥' :
                   match.match_score >= 60 ? 'âœ…' : 'ğŸ”'}
                </div>
                <div>
                  <h4 className="font-medium text-gray-900">
                    {match.search?.title || 'Arama'}
                  </h4>
                  <p className="text-sm text-gray-600">
                    {getMatchSource(match)} â€¢ %{match.match_score} eÅŸleÅŸme
                  </p>
                </div>
              </div>

              {match.match_reasons && match.match_reasons.length > 0 && (
                <div className="flex flex-wrap gap-2 mt-2">
                  {match.match_reasons.slice(0, 3).map((reason: string, idx: number) => (
                    <span key={idx} className="px-2 py-1 bg-white text-gray-700 text-xs rounded-full border">
                      {reason}
                    </span>
                  ))}
                  {match.match_reasons.length > 3 && (
                    <span className="px-2 py-1 bg-white text-gray-500 text-xs rounded-full border">
                      +{match.match_reasons.length - 3}
                    </span>
                  )}
                </div>
              )}
            </div>

            <div className="text-right">
              <span className={`px-3 py-1 rounded-full text-sm font-medium ${
                match.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :
                match.status === 'notified' ? 'bg-blue-100 text-blue-800' :
                match.status === 'contacted' ? 'bg-green-100 text-green-800' :
                'bg-gray-100 text-gray-800'
              }`}>
                {match.status === 'pending' ? 'Bekliyor' :
                 match.status === 'notified' ? 'Bildirildi' :
                 match.status === 'contacted' ? 'Ä°letiÅŸimde' : match.status}
              </span>
              <div className="text-xs text-gray-500 mt-1">
                {new Date(match.created_at).toLocaleDateString('tr-TR')}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  )
}

ğŸ“„ components/shop/SearchOverview.tsx
ğŸ“Š 242 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/shop/SearchOverview.tsx
'use client'

import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'
import { useRouter } from 'next/navigation'

interface SearchOverviewProps {
  shopId: string
}

// Arama verisi tipini tanÄ±mla
interface SearchItem {
  id: string
  title: string
  category?: string
  brand?: string
  min_price?: number
  max_price?: number
  priority_level: number
  status: string
  created_at: string
  matches?: Array<{ count: number }>
}

export default function SearchOverview({ shopId }: SearchOverviewProps) {
  const router = useRouter()
  const [searches, setSearches] = useState<SearchItem[]>([])
  const [stats, setStats] = useState({
    active: 0,
    totalMatches: 0,
    highPriority: 0,
    recentMatches: 0
  })
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    fetchSearchesData()
  }, [shopId])

  const fetchSearchesData = async () => {
    try {
      // Aktif aramalarÄ± getir
      const { data: searchesData, error } = await supabase
        .from('shop_searches')
        .select('*, matches:shop_search_matches(count)')
        .eq('shop_id', shopId)
        .eq('status', 'active')
        .order('priority_level', { ascending: false })
        .order('created_at', { ascending: false })
        .limit(5)

      if (error) throw error

      // Ä°statistikleri hesapla - DÃœZELTÄ°LDÄ°: 's' parametresine tip eklendi
      const activeSearches = searchesData?.length || 0
      const highPriority = searchesData?.filter((s: SearchItem) => s.priority_level >= 4).length || 0
      
      // Toplam eÅŸleÅŸme sayÄ±sÄ±nÄ± hesapla - DÃœZELTÄ°LDÄ°: search_id yerine shop_id kontrol et
      const { count: totalMatchesCount } = await supabase
        .from('shop_search_matches')
        .select('*', { count: 'exact', head: true })
        .eq('search.shop_id', shopId) // DÃ¼zeltildi: search.shop_id kontrolÃ¼

      // Son 7 gÃ¼ndeki eÅŸleÅŸmeler
      const weekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString()
      const { count: recentMatchesCount } = await supabase
        .from('shop_search_matches')
        .select('*', { count: 'exact', head: true })
        .eq('search.shop_id', shopId) // DÃ¼zeltildi: search.shop_id kontrolÃ¼
        .gte('created_at', weekAgo)

      setSearches(searchesData || [])
      setStats({
        active: activeSearches,
        totalMatches: totalMatchesCount || 0,
        highPriority,
        recentMatches: recentMatchesCount || 0
      })
    } catch (error) {
      console.error('Arama verileri yÃ¼klenemedi:', error)
    } finally {
      setLoading(false)
    }
  }

  const getPriorityColor = (level: number) => {
    switch(level) {
      case 5: return 'bg-red-100 text-red-800'
      case 4: return 'bg-orange-100 text-orange-800'
      case 3: return 'bg-green-100 text-green-800'
      case 2: return 'bg-blue-100 text-blue-800'
      case 1: return 'bg-gray-100 text-gray-800'
      default: return 'bg-gray-100 text-gray-800'
    }
  }

  const getPriorityText = (level: number) => {
    switch(level) {
      case 5: return 'Ã‡OK ACÄ°L'
      case 4: return 'ACÄ°L'
      case 3: return 'NORMAL'
      case 2: return 'DÃœÅÃœK'
      case 1: return 'Ã‡OK DÃœÅÃœK'
      default: return 'BELÄ°RSÄ°Z'
    }
  }

  if (loading) {
    return (
      <div className="bg-white rounded-xl shadow p-6">
        <div className="animate-pulse">
          <div className="h-6 bg-gray-200 rounded w-1/4 mb-4"></div>
          <div className="h-4 bg-gray-200 rounded w-1/2 mb-6"></div>
          <div className="space-y-4">
            {[...Array(3)].map((_, i) => (
              <div key={i} className="h-16 bg-gray-200 rounded-lg"></div>
            ))}
          </div>
        </div>
      </div>
    )
  }

  return (
    <div className="bg-white rounded-xl shadow p-6">
      {/* Header */}
      <div className="flex items-center justify-between mb-6">
        <div>
          <h3 className="text-lg font-bold text-gray-900">ğŸ” Aktif Aramalar</h3>
          <p className="text-sm text-gray-600">{stats.active} aktif arama</p>
        </div>
        <button
          onClick={() => router.push(`/shop/${shopId}/searches`)}
          className="text-blue-600 hover:text-blue-800 text-sm font-medium"
        >
          TÃ¼mÃ¼nÃ¼ GÃ¶r â†’
        </button>
      </div>

      {/* Ä°statistikler */}
      <div className="grid grid-cols-2 gap-4 mb-6">
        <div className="bg-blue-50 rounded-lg p-4 text-center">
          <div className="text-2xl font-bold text-blue-700">{stats.active}</div>
          <div className="text-sm text-blue-600">Aktif Arama</div>
        </div>
        <div className="bg-green-50 rounded-lg p-4 text-center">
          <div className="text-2xl font-bold text-green-700">{stats.totalMatches}</div>
          <div className="text-sm text-green-600">Toplam EÅŸleÅŸme</div>
        </div>
        <div className="bg-orange-50 rounded-lg p-4 text-center">
          <div className="text-2xl font-bold text-orange-700">{stats.highPriority}</div>
          <div className="text-sm text-orange-600">Acil Arama</div>
        </div>
        <div className="bg-purple-50 rounded-lg p-4 text-center">
          <div className="text-2xl font-bold text-purple-700">{stats.recentMatches}</div>
          <div className="text-sm text-purple-600">Son 7 GÃ¼n</div>
        </div>
      </div>

      {/* Aramalar Listesi */}
      <div className="space-y-4">
        {searches.length === 0 ? (
          <div className="text-center py-8">
            <div className="text-4xl mb-4">ğŸ”</div>
            <p className="text-gray-600 mb-4">HenÃ¼z aktif aramanÄ±z yok</p>
            <button
              onClick={() => router.push(`/shop/${shopId}/searches/new`)}
              className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
            >
              Ä°lk Arama OluÅŸtur
            </button>
          </div>
        ) : (
          searches.map((search) => (
            <div 
              key={search.id}
              className="border border-gray-200 rounded-lg p-4 hover:border-blue-300 cursor-pointer"
              onClick={() => router.push(`/shop/${shopId}/searches/${search.id}`)}
            >
              <div className="flex items-start justify-between">
                <div className="flex-1">
                  <h4 className="font-medium text-gray-900 mb-1 line-clamp-1">
                    {search.title}
                  </h4>
                  <div className="flex items-center space-x-3 text-sm text-gray-600">
                    <span>{search.category}</span>
                    {search.brand && <span>â€¢ {search.brand}</span>}
                    {search.min_price && search.max_price && (
                      <span>â€¢ {search.min_price} - {search.max_price} â‚º</span>
                    )}
                  </div>
                </div>
                
                <div className="flex items-center space-x-3">
                  <div className="text-right">
                    <div className="font-bold text-gray-900">
                      {search.matches?.[0]?.count || 0}
                    </div>
                    <div className="text-xs text-gray-500">eÅŸleÅŸme</div>
                  </div>
                  
                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(search.priority_level)}`}>
                    {getPriorityText(search.priority_level)}
                  </span>
                </div>
              </div>
              
              {/* Match progress bar */}
              <div className="mt-3">
                <div className="flex justify-between text-xs mb-1">
                  <span className="text-gray-600">EÅŸleÅŸme oranÄ±</span>
                  <span className="font-medium">
                    {Math.round(((search.matches?.[0]?.count || 0) / 10) * 100)}%
                  </span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div 
                    className="bg-green-500 h-2 rounded-full"
                    style={{ 
                      width: `${Math.min(100, ((search.matches?.[0]?.count || 0) / 10) * 100)}%` 
                    }}
                  ></div>
                </div>
              </div>
            </div>
          ))
        )}
      </div>

      {/* Yeni arama butonu */}
      <div className="mt-6 pt-6 border-t">
        <button
          onClick={() => router.push(`/shop/${shopId}/searches/new`)}
          className="w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-400 hover:text-blue-600"
        >
          + Yeni Arama OluÅŸtur
        </button>
      </div>
    </div>
  )
}

ğŸ“„ components/shop/ShopHeader.tsx
ğŸ“Š 113 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/shop/ShopHeader.tsx
'use client'

interface ShopHeaderProps {
  shop: any
  followersCount: number
  isFollowing: boolean
  onFollowToggle: () => void
  onContact: () => void
  onShare: () => void
}

export default function ShopHeader({
  shop,
  followersCount,
  isFollowing,
  onFollowToggle,
  onContact,
  onShare
}: ShopHeaderProps) {
  return (
    <div className="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
      {/* Cover Image */}
      <div className="h-48 bg-gradient-to-r from-blue-500 to-purple-600 relative">
        {shop.cover_image ? (
          <img 
            src={shop.cover_image} 
            alt="Cover" 
            className="w-full h-full object-cover"
          />
        ) : (
          <div className="w-full h-full flex items-center justify-center">
            <span className="text-white text-4xl opacity-50">ğŸª</span>
          </div>
        )}
        
        {/* Verified Badge */}
        {shop.is_verified && (
          <div className="absolute top-4 right-4 bg-white text-green-600 px-3 py-1 rounded-full text-sm font-medium flex items-center">
            <span className="mr-1">âœ…</span>
            DoÄŸrulanmÄ±ÅŸ MaÄŸaza
          </div>
        )}
      </div>

      {/* Shop Info */}
      <div className="p-6">
        <div className="flex items-start justify-between">
          <div className="flex items-start space-x-6">
            {/* Avatar */}
            <div className="relative -mt-16">
              <div className="w-32 h-32 rounded-2xl border-4 border-white bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-4xl font-bold shadow-lg">
                {shop.shop_name?.[0] || 'M'}
              </div>
            </div>

            {/* Details */}
            <div className="pt-4">
              <h1 className="text-3xl font-bold text-gray-900">{shop.shop_name}</h1>
              <p className="text-gray-600 mt-2">{shop.description || 'AÃ§Ä±klama yok'}</p>
              
              <div className="flex items-center space-x-6 mt-4">
                <div className="flex items-center space-x-2">
                  <span className="text-gray-500">ğŸ“</span>
                  <span>{shop.city || 'Konum belirtilmemiÅŸ'}</span>
                </div>
                <div className="flex items-center space-x-2">
                  <span className="text-gray-500">ğŸ‘¥</span>
                  <span>{followersCount} takipÃ§i</span>
                </div>
                {shop.owner && (
                  <div className="flex items-center space-x-2">
                    <span className="text-gray-500">ğŸ‘¤</span>
                    <span>{shop.owner.name || 'MaÄŸaza sahibi'}</span>
                  </div>
                )}
              </div>
            </div>
          </div>

          {/* Actions */}
          <div className="flex items-center space-x-3">
            <button
              onClick={onFollowToggle}
              className={`px-6 py-3 rounded-lg font-medium ${
                isFollowing
                  ? 'bg-gray-100 text-gray-800 hover:bg-gray-200'
                  : 'bg-blue-600 text-white hover:bg-blue-700'
              }`}
            >
              {isFollowing ? 'âœ“ Takip Ediliyor' : 'ğŸ‘¥ Takip Et'}
            </button>
            
            <button
              onClick={onContact}
              className="px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium"
            >
              ğŸ“ Ä°letiÅŸim
            </button>
            
            <button
              onClick={onShare}
              className="p-3 bg-gray-100 hover:bg-gray-200 rounded-lg"
              title="PaylaÅŸ"
            >
              ğŸ“¤
            </button>
          </div>
        </div>
      </div>
    </div>
  )
}

ğŸ“„ components/shop/ShopSocialFeed.tsx
ğŸ“Š 265 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/shop/ShopSocialFeed.tsx
'use client'

import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'
import Link from 'next/link'

interface ShopSocialFeedProps {
  shopId: string
  limit?: number
  compact?: boolean
}

export default function ShopSocialFeed({ 
  shopId, 
  limit = 9,
  compact = false 
}: ShopSocialFeedProps) {
  const [posts, setPosts] = useState<any[]>([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    fetchSocialPosts()
  }, [shopId])

  const fetchSocialPosts = async () => {
    try {
      const { data, error } = await supabase
        .from('shop_social_posts')
        .select('*')
        .eq('shop_id', shopId)
        .eq('status', 'published')
        .order('publish_at', { ascending: false })
        .limit(limit)

      if (error) throw error
      setPosts(data || [])
    } catch (error) {
      console.error('Sosyal paylaÅŸÄ±mlar yÃ¼klenemedi:', error)
    } finally {
      setLoading(false)
    }
  }

  const getPostIcon = (type: string) => {
    switch(type) {
      case 'product_showcase': return 'ğŸ“¦'
      case 'new_arrival': return 'ğŸ†•'
      case 'sale': return 'ğŸ·ï¸'
      case 'behind_scenes': return 'ğŸ¬'
      case 'customer_review': return 'â­'
      case 'looking_for': return 'ğŸ”'
      default: return 'ğŸ“¢'
    }
  }

  const formatDate = (dateString: string) => {
    const date = new Date(dateString)
    const now = new Date()
    const diffDays = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60 * 24))
    
    if (diffDays === 0) return 'BugÃ¼n'
    if (diffDays === 1) return 'DÃ¼n'
    if (diffDays < 7) return `${diffDays} gÃ¼n Ã¶nce`
    
    return date.toLocaleDateString('tr-TR', { 
      day: 'numeric', 
      month: 'short' 
    })
  }

  if (loading) {
    return (
      <div className="bg-white rounded-xl shadow p-6">
        <div className="animate-pulse">
          <div className="h-6 bg-gray-200 rounded w-1/4 mb-4"></div>
          <div className="grid grid-cols-3 gap-3">
            {[...Array(limit)].map((_, i) => (
              <div key={i} className="aspect-square bg-gray-200 rounded-lg"></div>
            ))}
          </div>
        </div>
      </div>
    )
  }

  if (compact) {
    return (
      <div className="bg-white rounded-xl shadow p-6">
        <div className="flex items-center justify-between mb-4">
          <h3 className="font-bold text-gray-900">ğŸ“± Son PaylaÅŸÄ±mlar</h3>
          <Link
            href={`/shop/${shopId}/social`}
            className="text-blue-600 hover:text-blue-800 text-sm font-medium"
          >
            TÃ¼mÃ¼ â†’
          </Link>
        </div>

        {posts.length === 0 ? (
          <div className="text-center py-4">
            <p className="text-gray-600">HenÃ¼z paylaÅŸÄ±m yapÄ±lmamÄ±ÅŸ</p>
          </div>
        ) : (
          <div className="grid grid-cols-3 gap-3">
            {posts.slice(0, 6).map((post) => (
              <Link
                key={post.id}
                href={`/shop/${shopId}/social/${post.id}`}
                className="group relative aspect-square rounded-lg overflow-hidden bg-gray-100"
              >
                {post.images && post.images.length > 0 ? (
                  <img
                    src={post.images[0]}
                    alt={post.title || 'Post image'}
                    className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                  />
                ) : (
                  <div className="w-full h-full flex items-center justify-center text-3xl">
                    {getPostIcon(post.type)}
                  </div>
                )}
                
                {/* Overlay */}
                <div className="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-2">
                  <span className="text-white text-xs truncate">
                    {post.title || 'PaylaÅŸÄ±m'}
                  </span>
                </div>
              </Link>
            ))}
          </div>
        )}
      </div>
    )
  }

  return (
    <div className="bg-white rounded-xl shadow-lg">
      <div className="p-6 border-b">
        <div className="flex items-center justify-between">
          <div>
            <h3 className="text-lg font-bold text-gray-900">ğŸ“± Sosyal PaylaÅŸÄ±mlar</h3>
            <p className="text-sm text-gray-600">MaÄŸazanÄ±n son aktiviteleri</p>
          </div>
          <Link
            href={`/shop/${shopId}/social/new`}
            className="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-medium py-2 px-4 rounded-lg text-sm"
          >
            + PaylaÅŸÄ±m Yap
          </Link>
        </div>
      </div>

      {posts.length === 0 ? (
        <div className="p-8 text-center">
          <div className="text-4xl mb-4">ğŸ“±</div>
          <h4 className="font-bold text-gray-900 mb-2">HenÃ¼z paylaÅŸÄ±m yok</h4>
          <p className="text-gray-600 mb-6">MaÄŸazanÄ±zÄ±n hikayesini paylaÅŸÄ±n, takipÃ§ilerinizle baÄŸlantÄ± kurun</p>
          <Link
            href={`/shop/${shopId}/social/new`}
            className="btn-primary inline-block"
          >
            Ä°lk PaylaÅŸÄ±mÄ± YapÄ±n
          </Link>
        </div>
      ) : (
        <div className="divide-y divide-gray-100">
          {posts.map((post) => (
            <div key={post.id} className="p-6 hover:bg-gray-50">
              <div className="flex items-start space-x-4">
                {/* Post icon */}
                <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-100 to-pink-100 flex items-center justify-center text-xl">
                  {getPostIcon(post.type)}
                </div>

                {/* Content */}
                <div className="flex-1">
                  <div className="flex items-center justify-between mb-2">
                    <div>
                      <h4 className="font-bold text-gray-900">{post.title}</h4>
                      <div className="flex items-center space-x-3 text-sm text-gray-500">
                        <span>{formatDate(post.publish_at || post.created_at)}</span>
                        {post.like_count > 0 && (
                          <span className="flex items-center">
                            â¤ï¸ {post.like_count}
                          </span>
                        )}
                        {post.comment_count > 0 && (
                          <span className="flex items-center">
                            ğŸ’¬ {post.comment_count}
                          </span>
                        )}
                      </div>
                    </div>
                    <Link
                      href={`/shop/${shopId}/social/${post.id}`}
                      className="text-blue-600 hover:text-blue-800 text-sm font-medium"
                    >
                      GÃ¶rÃ¼ntÃ¼le â†’
                    </Link>
                  </div>

                  {post.content && (
                    <p className="text-gray-700 mb-4 line-clamp-3">
                      {post.content}
                    </p>
                  )}

                  {/* Images */}
                  {post.images && post.images.length > 0 && (
                    <div className="grid grid-cols-3 gap-3 mb-4">
                      {post.images.slice(0, 3).map((image: string, index: number) => (
                        <div
                          key={index}
                          className="aspect-square rounded-lg overflow-hidden bg-gray-100"
                        >
                          <img
                            src={image}
                            alt={`Post image ${index + 1}`}
                            className="w-full h-full object-cover"
                          />
                        </div>
                      ))}
                      {post.images.length > 3 && (
                        <div className="aspect-square rounded-lg bg-gray-800 text-white flex items-center justify-center text-lg font-bold">
                          +{post.images.length - 3}
                        </div>
                      )}
                    </div>
                  )}

                  {/* Hashtags */}
                  {post.hashtags && post.hashtags.length > 0 && (
                    <div className="flex flex-wrap gap-2">
                      {post.hashtags.map((tag: string, index: number) => (
                        <span
                          key={index}
                          className="text-blue-600 hover:text-blue-800 text-sm"
                        >
                          {tag}
                        </span>
                      ))}
                    </div>
                  )}
                </div>
              </div>
            </div>
          ))}
        </div>
      )}

      {posts.length > 0 && (
        <div className="p-6 border-t text-center">
          <Link
            href={`/shop/${shopId}/social`}
            className="text-blue-600 hover:text-blue-800 font-medium"
          >
            TÃ¼m PaylaÅŸÄ±mlarÄ± GÃ¶r â†’
          </Link>
        </div>
      )}
    </div>
  )
}

ğŸ“„ components/shop/ShopStats.tsx
ğŸ“Š 167 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/shop/ShopStats.tsx
'use client'

interface ShopStatsProps {
  stats: {
    totalProducts: number
    activeSearches: number
    totalMatches: number
    pendingMatches: number
    totalFollowers: number
    revenue: number
  }
  shopId: string
}

export default function ShopStats({ stats, shopId }: ShopStatsProps) {
  const formatCurrency = (amount: number) => {
    return new Intl.NumberFormat('tr-TR', {
      style: 'currency',
      currency: 'TRY',
      minimumFractionDigits: 0
    }).format(amount)
  }

  const getGrowthColor = (current: number, previous: number) => {
    if (previous === 0) return 'text-green-600'
    const growth = ((current - previous) / previous) * 100
    if (growth > 20) return 'text-green-600'
    if (growth > 0) return 'text-yellow-600'
    return 'text-red-600'
  }

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {/* ÃœrÃ¼nler */}
      <div className="bg-white rounded-xl shadow p-6 hover:shadow-lg transition-shadow">
        <div className="flex items-center justify-between mb-4">
          <div className="text-gray-500">ğŸ“¦</div>
          <div className={`text-sm font-medium ${getGrowthColor(stats.totalProducts, stats.totalProducts * 0.9)}`}>
            +12%
          </div>
        </div>
        <div className="text-3xl font-bold text-gray-900 mb-2">
          {stats.totalProducts}
        </div>
        <div className="text-sm text-gray-600">Aktif ÃœrÃ¼n</div>
        <div className="mt-4 h-2 bg-gray-200 rounded-full">
          <div 
            className="h-2 rounded-full bg-gradient-to-r from-blue-500 to-blue-600"
            style={{ width: `${Math.min(100, (stats.totalProducts / 100) * 100)}%` }}
          ></div>
        </div>
      </div>

      {/* Aramalar */}
      <div className="bg-white rounded-xl shadow p-6 hover:shadow-lg transition-shadow">
        <div className="flex items-center justify-between mb-4">
          <div className="text-gray-500">ğŸ”</div>
          <div className={`text-sm font-medium ${getGrowthColor(stats.activeSearches, stats.activeSearches * 0.8)}`}>
            +8%
          </div>
        </div>
        <div className="text-3xl font-bold text-gray-900 mb-2">
          {stats.activeSearches}
        </div>
        <div className="text-sm text-gray-600">Aktif Arama</div>
        <div className="mt-4 h-2 bg-gray-200 rounded-full">
          <div 
            className="h-2 rounded-full bg-gradient-to-r from-green-500 to-green-600"
            style={{ width: `${Math.min(100, (stats.activeSearches / 20) * 100)}%` }}
          ></div>
        </div>
      </div>

      {/* EÅŸleÅŸmeler */}
      <div className="bg-white rounded-xl shadow p-6 hover:shadow-lg transition-shadow">
        <div className="flex items-center justify-between mb-4">
          <div className="text-gray-500">ğŸ¤</div>
          <div className={`text-sm font-medium ${getGrowthColor(stats.totalMatches, stats.totalMatches * 0.7)}`}>
            +24%
          </div>
        </div>
        <div className="text-3xl font-bold text-gray-900 mb-2">
          {stats.totalMatches}
        </div>
        <div className="text-sm text-gray-600">Toplam EÅŸleÅŸme</div>
        <div className="mt-4 flex items-center text-sm">
          <span className="text-green-600 font-medium">
            {stats.pendingMatches} yeni
          </span>
          <span className="mx-2 text-gray-400">â€¢</span>
          <span className="text-gray-600">
            {(stats.totalMatches > 0 ? (stats.pendingMatches / stats.totalMatches * 100).toFixed(0) : 0)}% bekliyor
          </span>
        </div>
      </div>

      {/* TakipÃ§iler */}
      <div className="bg-white rounded-xl shadow p-6 hover:shadow-lg transition-shadow">
        <div className="flex items-center justify-between mb-4">
          <div className="text-gray-500">ğŸ‘¥</div>
          <div className={`text-sm font-medium ${getGrowthColor(stats.totalFollowers, stats.totalFollowers * 0.85)}`}>
            +15%
          </div>
        </div>
        <div className="text-3xl font-bold text-gray-900 mb-2">
          {stats.totalFollowers}
        </div>
        <div className="text-sm text-gray-600">TakipÃ§i</div>
        <div className="mt-4">
          <div className="flex -space-x-2">
            {[...Array(Math.min(5, stats.totalFollowers))].map((_, i) => (
              <div 
                key={i}
                className="w-8 h-8 rounded-full border-2 border-white bg-gradient-to-br from-purple-400 to-pink-500"
              ></div>
            ))}
            {stats.totalFollowers > 5 && (
              <div className="w-8 h-8 rounded-full border-2 border-white bg-gray-300 flex items-center justify-center text-xs font-medium">
                +{stats.totalFollowers - 5}
              </div>
            )}
          </div>
        </div>
      </div>

      {/* Gelir */}
      <div className="bg-white rounded-xl shadow p-6 hover:shadow-lg transition-shadow">
        <div className="flex items-center justify-between mb-4">
          <div className="text-gray-500">ğŸ’°</div>
          <div className={`text-sm font-medium ${getGrowthColor(stats.revenue, stats.revenue * 0.6)}`}>
            +42%
          </div>
        </div>
        <div className="text-3xl font-bold text-gray-900 mb-2">
          {formatCurrency(stats.revenue)}
        </div>
        <div className="text-sm text-gray-600">Toplam Gelir</div>
        <div className="mt-4">
          <div className="text-xs text-gray-500">
            Bu ay: {formatCurrency(stats.revenue * 0.3)}
          </div>
        </div>
      </div>

      {/* DÃ¶nÃ¼ÅŸÃ¼m OranÄ± */}
      <div className="bg-white rounded-xl shadow p-6 hover:shadow-lg transition-shadow">
        <div className="flex items-center justify-between mb-4">
          <div className="text-gray-500">ğŸ“Š</div>
          <div className="text-sm font-medium text-green-600">
            +5%
          </div>
        </div>
        <div className="text-3xl font-bold text-gray-900 mb-2">
          {stats.totalProducts > 0 ? ((stats.totalMatches / stats.totalProducts) * 100).toFixed(1) : '0'}%
        </div>
        <div className="text-sm text-gray-600">DÃ¶nÃ¼ÅŸÃ¼m OranÄ±</div>
        <div className="mt-4">
          <div className="flex items-center text-sm">
            <span className="text-gray-600 mr-2">Hedef:</span>
            <span className="font-medium text-green-600">%25</span>
          </div>
        </div>
      </div>
    </div>
  )
}

ğŸ“„ components/shop/ShopStatsPublic.tsx
ğŸ“Š 178 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/shop/ShopStatsPublic.tsx - DÃœZELTÄ°LMÄ°Å
'use client'

import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'

interface ShopStatsPublicProps {
  shopId: string
}

// Review interface'ini tanÄ±mlayalÄ±m
interface ShopReview {
  rating: number | null
  response_time: number | null
  [key: string]: any // DiÄŸer alanlar iÃ§in
}

interface ShopStats {
  productCount: number
  searchCount: number
  followerCount: number
  matchCount: number
  rating: number
  responseTime: number
}

export default function ShopStatsPublic({ shopId }: ShopStatsPublicProps) {
  const [stats, setStats] = useState<ShopStats>({
    productCount: 0,
    searchCount: 0,
    followerCount: 0,
    matchCount: 0,
    rating: 0,
    responseTime: 0
  })
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    fetchStats()
  }, [shopId])

  const fetchStats = async () => {
    try {
      const [
        { count: productCount },
        { count: searchCount },
        { count: followerCount },
        { count: matchCount },
        { data: reviewsData }
      ] = await Promise.all([
        supabase
          .from('shop_inventory')
          .select('count', { count: 'exact', head: true })
          .eq('shop_id', shopId)
          .eq('status', 'active'),
        supabase
          .from('shop_searches')
          .select('count', { count: 'exact', head: true })
          .eq('shop_id', shopId)
          .eq('status', 'active'),
        supabase
          .from('shop_customer_relationships')
          .select('count', { count: 'exact', head: true })
          .eq('shop_id', shopId)
          .eq('relationship_type', 'follower'),
        supabase
          .from('shop_search_matches')
          .select('count', { count: 'exact', head: true })
          .eq('search_id', shopId)
          .eq('status', 'pending'),
        supabase
          .from('shop_reviews')
          .select('rating, response_time')
          .eq('shop_id', shopId)
          .limit(50)
      ])

      // Calculate average rating and response time with proper typing
      const reviews: ShopReview[] = reviewsData || []
      
      // DÃœZELTÄ°LMÄ°Å KISIM - TypeScript hatalarÄ± giderildi
      const avgRating = reviews.length > 0 
        ? reviews.reduce((sum: number, r: ShopReview) => {
            const rating = r.rating || 0
            return sum + rating
          }, 0) / reviews.length 
        : 0
      
      const avgResponseTime = reviews.length > 0
        ? reviews.reduce((sum: number, r: ShopReview) => {
            const responseTime = r.response_time || 0
            return sum + responseTime
          }, 0) / reviews.length
        : 0

      setStats({
        productCount: productCount || 0,
        searchCount: searchCount || 0,
        followerCount: followerCount || 0,
        matchCount: matchCount || 0,
        rating: avgRating,
        responseTime: avgResponseTime
      })
    } catch (error) {
      console.error('MaÄŸaza istatistikleri yÃ¼klenemedi:', error)
    } finally {
      setLoading(false)
    }
  }

  const formatResponseTime = (minutes: number) => {
    if (minutes < 60) return `${Math.round(minutes)} dk`
    if (minutes < 1440) return `${Math.round(minutes / 60)} saat`
    return `${Math.round(minutes / 1440)} gÃ¼n`
  }

  if (loading) {
    return (
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
        {[...Array(4)].map((_, i) => (
          <div key={i} className="animate-pulse bg-gray-200 rounded-xl h-24"></div>
        ))}
      </div>
    )
  }

  return (
    <div className="grid grid-cols-2 md:grid-cols-6 gap-4 mb-8">
      <div className="bg-white rounded-xl shadow p-4 text-center hover:shadow-md transition-shadow">
        <div className="text-2xl font-bold text-blue-600 mb-1">
          {stats.productCount}
        </div>
        <div className="text-sm text-gray-600">ÃœrÃ¼n</div>
        <div className="text-xs text-gray-400 mt-1">Stokta</div>
      </div>

      <div className="bg-white rounded-xl shadow p-4 text-center hover:shadow-md transition-shadow">
        <div className="text-2xl font-bold text-green-600 mb-1">
          {stats.searchCount}
        </div>
        <div className="text-sm text-gray-600">Arama</div>
        <div className="text-xs text-gray-400 mt-1">Aktif</div>
      </div>

      <div className="bg-white rounded-xl shadow p-4 text-center hover:shadow-md transition-shadow">
        <div className="text-2xl font-bold text-purple-600 mb-1">
          {stats.followerCount}
        </div>
        <div className="text-sm text-gray-600">TakipÃ§i</div>
        <div className="text-xs text-gray-400 mt-1">Toplam</div>
      </div>

      <div className="bg-white rounded-xl shadow p-4 text-center hover:shadow-md transition-shadow">
        <div className="text-2xl font-bold text-orange-600 mb-1">
          {stats.matchCount}
        </div>
        <div className="text-sm text-gray-600">EÅŸleÅŸme</div>
        <div className="text-xs text-gray-400 mt-1">Bekleyen</div>
      </div>

      <div className="bg-white rounded-xl shadow p-4 text-center hover:shadow-md transition-shadow">
        <div className="text-2xl font-bold text-yellow-600 mb-1">
          {stats.rating.toFixed(1)}
        </div>
        <div className="text-sm text-gray-600">Puan</div>
        <div className="text-xs text-gray-400 mt-1">Ortalama</div>
      </div>

      <div className="bg-white rounded-xl shadow p-4 text-center hover:shadow-md transition-shadow">
        <div className="text-2xl font-bold text-teal-600 mb-1">
          {formatResponseTime(stats.responseTime)}
        </div>
        <div className="text-sm text-gray-600">YanÄ±t</div>
        <div className="text-xs text-gray-400 mt-1">Ortalama</div>
      </div>
    </div>
  )
}

====================================================================================================
ğŸ“Š Ã–ZET
====================================================================================================
Toplam Dosya: 17
App SayfalarÄ±: 6
App Layout'larÄ±: 0
DiÄŸer App: 0
Component'ler: 11
Utility'ler: 0
DiÄŸer: 0
Toplam SatÄ±r: 5083

ğŸ“‹ BULUNAN SAYFA ROUTE'LARI:
  â€¢ /admin/ads
  â€¢ /admin/ads/create-manual
  â€¢ /admin/adsense
  â€¢ /admin/test
  â€¢ /admin/users
  â€¢ /shop/dashboard
====================================================================================================