================================================================================
ğŸ“¦ SPOTITFORME - TAM BAÄIMLILIK RAPORU
================================================================================

ğŸ¯ HEDEF DOSYA: app/profile/page.tsx
ğŸ“… OluÅŸturulma: 15.02.2026 02:00:25
ğŸ“Š Toplam Dosya: 11


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ app\products\[id]\page.tsx
ğŸ“Š 656 satÄ±r | 28140 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/product/[id]/page.tsx - KULLANICILAR Ä°Ã‡Ä°N ÃœRÃœN DETAY
'use client';

import { useState, useEffect } from 'react';
import { useParams, useRouter } from 'next/navigation';
import { supabase } from '@/lib/supabase';
import { 
  ArrowLeft, Heart, Share2, ShoppingCart, MessageCircle,
  MapPin, Truck, Star, Shield, Clock, Package,
  CheckCircle, XCircle, Phone, Mail, Instagram, Globe
} from 'lucide-react';
import Link from 'next/link';
import SimpleShareButtons from '@/components/SimpleShareButtons';
import NativeAd from '@/components/NativeAd';

export default function ProductPage() {
  const params = useParams();
  const router = useRouter();
  const productId = params.id as string;
  
  const [product, setProduct] = useState<any>(null);
  const [shop, setShop] = useState<any>(null);
  const [loading, setLoading] = useState(true);
  const [similarProducts, setSimilarProducts] = useState<any[]>([]);
  const [activeImageIndex, setActiveImageIndex] = useState(0);
  const [isFavorite, setIsFavorite] = useState(false);
  const [quantity, setQuantity] = useState(1);

  useEffect(() => {
    loadProduct();
  }, [productId]);

  const loadProduct = async () => {
    try {
      setLoading(true);
      
      // ÃœrÃ¼n bilgilerini getir
      const { data: productData, error } = await supabase
        .from('shop_inventory')
        .select('*')
        .eq('id', productId)
        .eq('status', 'active')
        .single();

      if (error) throw error;
      setProduct(productData);

      // MaÄŸaza bilgilerini getir
      if (productData.shop_id) {
        const { data: shopData } = await supabase
          .from('shops')
          .select('*')
          .eq('id', productData.shop_id)
          .eq('is_active', true)
          .single();
        
        setShop(shopData);
      }

      // GÃ¶rÃ¼ntÃ¼leme sayÄ±sÄ±nÄ± artÄ±r
      await supabase
        .from('shop_inventory')
        .update({ 
          view_count: (productData.view_count || 0) + 1,
          last_viewed_at: new Date().toISOString()
        })
        .eq('id', productId);

      // Benzer Ã¼rÃ¼nleri getir
      if (productData.category) {
        const { data: similar } = await supabase
          .from('shop_inventory')
          .select('*')
          .eq('category', productData.category)
          .eq('status', 'active')
          .neq('id', productId)
          .limit(4);

        setSimilarProducts(similar || []);
      }

    } catch (error) {
      console.error('ÃœrÃ¼n yÃ¼klenemedi:', error);
      router.push('/');
    } finally {
      setLoading(false);
    }
  };

  const handleContact = () => {
    if (shop?.phone) {
      window.open(`tel:${shop.phone}`, '_blank');
    } else if (shop?.email) {
      window.open(`mailto:${shop.email}`, '_blank');
    } else {
      alert('MaÄŸaza iletiÅŸim bilgileri bulunamadÄ±');
    }
  };

  const handleAddToFavorites = async () => {
    // TODO: Favorilere ekleme iÅŸlemi
    setIsFavorite(!isFavorite);
    alert(isFavorite ? 'Favorilerden Ã§Ä±karÄ±ldÄ±' : 'Favorilere eklendi');
  };

  const parseShippingOptions = (options: any) => {
    if (!options) return { shipping: false, local_pickup: false };
    
    if (typeof options === 'string') {
      try {
        return JSON.parse(options);
      } catch (error) {
        return { shipping: false, local_pickup: false };
      }
    }
    
    return options;
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-gray-50 py-8">
        <div className="container mx-auto px-4">
          <div className="text-center py-12">
            <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto"></div>
            <p className="mt-4 text-gray-600">ÃœrÃ¼n yÃ¼kleniyor...</p>
          </div>
        </div>
      </div>
    );
  }

  if (!product) {
    return (
      <div className="min-h-screen bg-gray-50 py-8">
        <div className="container mx-auto px-4">
          <div className="text-center py-12">
            <Package className="mx-auto text-gray-400 mb-4" size={48} />
            <h1 className="text-2xl font-bold text-gray-900 mb-4">ÃœrÃ¼n bulunamadÄ±</h1>
            <p className="text-gray-600 mb-8">Bu Ã¼rÃ¼n silinmiÅŸ veya mevcut deÄŸil.</p>
            <button
              onClick={() => router.push('/')}
              className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg"
            >
              Ana Sayfaya DÃ¶n
            </button>
          </div>
        </div>
      </div>
    );
  }

  const shippingOptions = parseShippingOptions(product.shipping_options);
  const discountPercent = product.discount_percent 
    ? Math.round((1 - product.price / product.original_price) * 100)
    : null;

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Ãœst Navigasyon */}
      <div className="bg-white shadow">
        <div className="container mx-auto px-4 py-3">
          <button
            onClick={() => router.back()}
            className="text-gray-600 hover:text-gray-900 flex items-center"
          >
            <ArrowLeft className="mr-2" size={20} />
            Geri DÃ¶n
          </button>
        </div>
      </div>

      <div className="container mx-auto px-4 py-8">
        <div className="grid lg:grid-cols-3 gap-8">
          {/* Sol Kolon - ÃœrÃ¼n Resimleri */}
          <div className="lg:col-span-2">
            <div className="bg-white rounded-2xl shadow-lg overflow-hidden">
              {/* Resimler */}
              {product.images && product.images.length > 0 ? (
                <div>
                  {/* BÃ¼yÃ¼k Resim */}
                  <div className="relative h-96 bg-gray-100">
                    <img
                      src={product.images[activeImageIndex]}
                      alt={product.title}
                      className="w-full h-full object-contain"
                    />
                    
                    {/* Favori Butonu */}
                    <button
                      onClick={handleAddToFavorites}
                      className="absolute top-4 right-4 bg-white p-3 rounded-full shadow-lg hover:bg-gray-100"
                    >
                      <Heart 
                        size={24} 
                        className={isFavorite ? 'text-red-500 fill-red-500' : 'text-gray-400'} 
                      />
                    </button>
                    
                    {/* Ä°ndirim Badge */}
                    {discountPercent && (
                      <div className="absolute top-4 left-4 bg-red-500 text-white px-4 py-2 rounded-lg font-bold">
                        -%{discountPercent}
                      </div>
                    )}
                  </div>
                  
                  {/* KÃ¼Ã§Ã¼k Resimler */}
                  {product.images.length > 1 && (
                    <div className="p-4 border-t">
                      <div className="flex space-x-2 overflow-x-auto">
                        {product.images.map((image: string, index: number) => (
                          <button
                            key={index}
                            onClick={() => setActiveImageIndex(index)}
                            className={`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden ${
                              activeImageIndex === index 
                                ? 'ring-2 ring-blue-500' 
                                : 'opacity-75 hover:opacity-100'
                            }`}
                          >
                            <img
                              src={image}
                              alt={`${product.title} - ${index + 1}`}
                              className="w-full h-full object-cover"
                            />
                          </button>
                        ))}
                      </div>
                    </div>
                  )}
                </div>
              ) : (
                <div className="h-96 bg-gray-100 flex items-center justify-center">
                  <Package className="text-gray-400" size={64} />
                </div>
              )}
              
              {/* ÃœrÃ¼n Bilgileri */}
              <div className="p-6">
                <div className="mb-6">
                  <div className="flex items-center flex-wrap gap-2 mb-3">
                    <span className="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium">
                      {product.category || 'DiÄŸer'}
                    </span>
                    {product.brand && (
                      <span className="px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm">
                        {product.brand}
                      </span>
                    )}
                    {product.condition && (
                      <span className="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">
                        {product.condition === 'new' ? 'SÄ±fÄ±r' : 
                         product.condition === 'like_new' ? 'Az KullanÄ±lmÄ±ÅŸ' : 
                         product.condition === 'used' ? 'KullanÄ±lmÄ±ÅŸ' : 'Fabrika Ã‡Ä±kÄ±ÅŸlÄ±'}
                      </span>
                    )}
                  </div>
                  
                  <h1 className="text-3xl font-bold text-gray-900 mb-4">
                    {product.title}
                  </h1>
                  
                  <div className="flex items-center mb-6">
                    <div className="flex items-center mr-4">
                      {[...Array(5)].map((_, i) => (
                        <Star
                          key={i}
                          size={20}
                          className={`${
                            i < 4 ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300'
                          }`}
                        />
                      ))}
                      <span className="ml-2 text-gray-600">(4.0)</span>
                    </div>
                    <span className="text-gray-500">
                      {product.view_count || 0} gÃ¶rÃ¼ntÃ¼lenme
                    </span>
                  </div>
                </div>
                
                {/* Fiyat */}
                <div className="mb-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl">
                  <div className="flex items-end">
                    <div className="mr-6">
                      <div className="text-4xl font-bold text-gray-900">
                        {product.price.toLocaleString('tr-TR')} {product.price_currency}
                      </div>
                      {product.original_price && product.original_price > product.price && (
                        <div className="text-xl text-gray-500 line-through">
                          {product.original_price.toLocaleString('tr-TR')} {product.price_currency}
                        </div>
                      )}
                    </div>
                    
                    <div className="flex-1">
                      <div className="text-sm text-gray-600 mb-2">Stok Durumu:</div>
                      <div className={`inline-flex items-center px-4 py-2 rounded-full font-medium ${
                        product.quantity > 0 
                          ? 'bg-green-100 text-green-800' 
                          : 'bg-red-100 text-red-800'
                      }`}>
                        {product.quantity > 0 
                          ? `âœ… ${product.quantity} adet stokta` 
                          : 'âŒ Stokta yok'}
                      </div>
                    </div>
                  </div>
                </div>
                
                {/* AÃ§Ä±klama */}
                <div className="mb-8">
                  <h2 className="text-xl font-bold text-gray-900 mb-4">ÃœrÃ¼n AÃ§Ä±klamasÄ±</h2>
                  <div className="text-gray-700 whitespace-pre-line bg-gray-50 p-6 rounded-lg">
                    {product.description || 'AÃ§Ä±klama eklenmemiÅŸ.'}
                  </div>
                </div>
                
                {/* Detaylar */}
                <div className="grid md:grid-cols-2 gap-6">
                  <div className="space-y-4">
                    <div className="flex items-center">
                      <MapPin className="text-gray-400 mr-3" size={20} />
                      <div>
                        <div className="text-sm text-gray-600">Konum</div>
                        <div className="font-medium">{product.location || shop?.city || 'BelirtilmemiÅŸ'}</div>
                      </div>
                    </div>
                    
                    <div className="flex items-center">
                      <Truck className="text-gray-400 mr-3" size={20} />
                      <div>
                        <div className="text-sm text-gray-600">Kargo SeÃ§enekleri</div>
                        <div className="space-y-1">
                          <div className="flex items-center">
                            {shippingOptions.shipping ? (
                              <>
                                <CheckCircle className="text-green-500 mr-2" size={16} />
                                <span className="font-medium">Kargo ile gÃ¶nderim</span>
                              </>
                            ) : (
                              <>
                                <XCircle className="text-red-500 mr-2" size={16} />
                                <span className="text-gray-500">Kargo yok</span>
                              </>
                            )}
                          </div>
                          <div className="flex items-center">
                            {shippingOptions.local_pickup ? (
                              <>
                                <CheckCircle className="text-green-500 mr-2" size={16} />
                                <span className="font-medium">Yerinden teslim</span>
                              </>
                            ) : (
                              <>
                                <XCircle className="text-red-500 mr-2" size={16} />
                                <span className="text-gray-500">Yerinden teslim yok</span>
                              </>
                            )}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div className="space-y-4">
                    {product.year && (
                      <div className="flex items-center">
                        <Clock className="text-gray-400 mr-3" size={20} />
                        <div>
                          <div className="text-sm text-gray-600">Ãœretim YÄ±lÄ±</div>
                          <div className="font-medium">{product.year}</div>
                        </div>
                      </div>
                    )}
                    
                    {product.dimensions && (
                      <div className="flex items-center">
                        <Package className="text-gray-400 mr-3" size={20} />
                        <div>
                          <div className="text-sm text-gray-600">Boyutlar</div>
                          <div className="font-medium">{product.dimensions}</div>
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              </div>
            </div>
            
            {/* Benzer ÃœrÃ¼nler */}
            {similarProducts.length > 0 && (
              <div className="mt-8">
                <h2 className="text-2xl font-bold text-gray-900 mb-6">Benzer ÃœrÃ¼nler</h2>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                  {similarProducts.map((similar) => (
                    <Link
                      key={similar.id}
                      href={`/product/${similar.id}`}
                      className="bg-white rounded-xl shadow hover:shadow-md transition-shadow overflow-hidden"
                    >
                      {similar.images && similar.images.length > 0 ? (
                        <div className="h-48 overflow-hidden">
                          <img
                            src={similar.images[0]}
                            alt={similar.title}
                            className="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
                          />
                        </div>
                      ) : (
                        <div className="h-48 bg-gray-100 flex items-center justify-center">
                          <Package className="text-gray-400" size={40} />
                        </div>
                      )}
                      <div className="p-4">
                        <h3 className="font-medium text-gray-900 line-clamp-2 mb-2">
                          {similar.title}
                        </h3>
                        <div className="flex justify-between items-center">
                          <span className="font-bold text-blue-600">
                            {similar.price.toLocaleString('tr-TR')} {similar.price_currency}
                          </span>
                          <span className="text-sm text-gray-500">
                            {similar.view_count || 0} gÃ¶rÃ¼ntÃ¼leme
                          </span>
                        </div>
                      </div>
                    </Link>
                  ))}
                </div>
              </div>
            )}
            
            {/* Reklam */}
            <div className="mt-8">
              <NativeAd />
            </div>
          </div>
          
          {/* SaÄŸ Kolon - Ä°ÅŸlemler ve MaÄŸaza */}
          <div className="space-y-6">
            {/* SatÄ±n Alma Ä°ÅŸlemleri */}
            <div className="bg-white rounded-2xl shadow-lg p-6 sticky top-6">
              <h3 className="text-lg font-bold text-gray-900 mb-4">SatÄ±n Alma</h3>
              
              <div className="space-y-4">
                {/* Miktar SeÃ§imi */}
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Miktar
                  </label>
                  <div className="flex items-center">
                    <button
                      onClick={() => setQuantity(Math.max(1, quantity - 1))}
                      className="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-l-lg hover:bg-gray-100"
                    >
                      -
                    </button>
                    <div className="w-16 h-10 flex items-center justify-center border-t border-b border-gray-300">
                      {quantity}
                    </div>
                    <button
                      onClick={() => setQuantity(quantity + 1)}
                      className="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-r-lg hover:bg-gray-100"
                    >
                      +
                    </button>
                  </div>
                </div>
                
                {/* Toplam Fiyat */}
                <div className="border-t border-gray-200 pt-4">
                  <div className="flex justify-between mb-2">
                    <span className="text-gray-600">Toplam:</span>
                    <span className="text-2xl font-bold text-gray-900">
                      {(product.price * quantity).toLocaleString('tr-TR')} {product.price_currency}
                    </span>
                  </div>
                  <div className="text-sm text-gray-500">
                    {quantity} adet Ã— {product.price.toLocaleString('tr-TR')} {product.price_currency}
                  </div>
                </div>
                
                {/* Butonlar */}
                <div className="space-y-3">
                  <button
                    onClick={handleContact}
                    className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white py-4 rounded-xl font-bold flex items-center justify-center"
                  >
                    <MessageCircle className="mr-2" size={20} />
                    MaÄŸaza ile Ä°letiÅŸime GeÃ§
                  </button>
                  
                  <button
                    onClick={handleAddToFavorites}
                    className={`w-full py-3 rounded-xl font-medium flex items-center justify-center ${
                      isFavorite
                        ? 'bg-red-50 text-red-700 hover:bg-red-100'
                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                    }`}
                  >
                    <Heart className="mr-2" size={20} />
                    {isFavorite ? 'Favorilerden Ã‡Ä±kar' : 'Favorilere Ekle'}
                  </button>
                  
                  <div className="flex space-x-3">
                    <div className="flex-1">
                    <SimpleShareButtons 
                        url={`/product/${productId}`}
                        title={product.title}
                    />
                    </div>
                  </div>
                </div>
              </div>
              
              {/* GÃ¼venlik Bilgileri */}
              <div className="mt-6 pt-6 border-t border-gray-200">
                <div className="flex items-center space-x-3 text-sm text-gray-600">
                  <Shield className="text-green-500" size={20} />
                  <span>GÃ¼venli alÄ±ÅŸveriÅŸ</span>
                </div>
                <div className="flex items-center space-x-3 text-sm text-gray-600 mt-2">
                  <CheckCircle className="text-green-500" size={20} />
                  <span>SpotItForMe garantisi</span>
                </div>
              </div>
            </div>
            
            {/* MaÄŸaza Bilgileri */}
            {shop && (
              <div className="bg-white rounded-2xl shadow-lg p-6">
                <div className="flex items-center mb-4">
                  <div className="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center text-white text-xl font-bold mr-4">
                    {shop.shop_name.substring(0, 2).toUpperCase()}
                  </div>
                  <div>
                    <h3 className="font-bold text-gray-900">{shop.shop_name}</h3>
                    <p className="text-gray-600">{shop.city}</p>
                    {shop.is_verified && (
                      <div className="flex items-center mt-1">
                        <Shield className="text-green-500 mr-1" size={14} />
                        <span className="text-xs text-green-600">DoÄŸrulanmÄ±ÅŸ MaÄŸaza</span>
                      </div>
                    )}
                  </div>
                </div>
                
                <div className="space-y-3 mb-6">
                  {shop.description && (
                    <p className="text-gray-700 text-sm">{shop.description}</p>
                  )}
                  
                  <div className="space-y-2">
                    {shop.phone && (
                      <div className="flex items-center">
                        <Phone className="text-gray-400 mr-3" size={16} />
                        <a 
                          href={`tel:${shop.phone}`}
                          className="text-blue-600 hover:text-blue-800"
                        >
                          {shop.phone}
                        </a>
                      </div>
                    )}
                    
                    {shop.email && (
                      <div className="flex items-center">
                        <Mail className="text-gray-400 mr-3" size={16} />
                        <a 
                          href={`mailto:${shop.email}`}
                          className="text-blue-600 hover:text-blue-800"
                        >
                          {shop.email}
                        </a>
                      </div>
                    )}
                    
                    {shop.address && (
                      <div className="flex items-center">
                        <MapPin className="text-gray-400 mr-3" size={16} />
                        <span className="text-gray-700">{shop.address}</span>
                      </div>
                    )}
                  </div>
                </div>
                
                {/* Sosyal Medya */}
                <div className="flex space-x-3 mb-6">
                  {shop.website && (
                    <a
                      href={shop.website}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="p-2 bg-gray-100 hover:bg-gray-200 rounded-lg"
                    >
                      <Globe size={20} className="text-gray-600" />
                    </a>
                  )}
                  
                  {shop.instagram && (
                    <a
                      href={`https://instagram.com/${shop.instagram}`}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="p-2 bg-gray-100 hover:bg-gray-200 rounded-lg"
                    >
                      <Instagram size={20} className="text-gray-600" />
                    </a>
                  )}
                </div>
                
                <Link
                  href={`/shop/${shop.id}`}
                  className="block w-full bg-blue-50 hover:bg-blue-100 text-blue-700 text-center py-3 rounded-xl font-medium"
                >
                  MaÄŸazayÄ± Ziyaret Et
                </Link>
              </div>
            )}
            
            {/* Ä°statistikler */}
            <div className="bg-white rounded-2xl shadow-lg p-6">
              <h3 className="font-bold text-gray-900 mb-4">ÃœrÃ¼n Ä°statistikleri</h3>
              <div className="space-y-4">
                <div className="flex justify-between">
                  <span className="text-gray-600">GÃ¶rÃ¼ntÃ¼lenme:</span>
                  <span className="font-bold">{product.view_count || 0}</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-600">Favorilere Ekleme:</span>
                  <span className="font-bold">{product.wishlist_count || 0}</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-600">Son GÃ¶rÃ¼ntÃ¼lenme:</span>
                  <span className="font-bold text-sm">
                    {product.last_viewed_at 
                      ? new Date(product.last_viewed_at).toLocaleDateString('tr-TR')
                      : 'Yeni'}
                  </span>
                </div>
                <div className="flex justify-between">
                  <span className="text-gray-600">OluÅŸturulma:</span>
                  <span className="font-bold text-sm">
                    {new Date(product.created_at).toLocaleDateString('tr-TR')}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ app\profile\page.tsx
ğŸ“Š 529 satÄ±r | 22679 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/profile/page.tsx - DÃœZELTMÄ°Å VERSÄ°YON
'use client'

import { useEffect, useState } from 'react'
import { useRouter } from 'next/navigation'
import { supabase } from '@/lib/supabase'
import Link from 'next/link'

interface UserProfile {
  id: string
  email: string
  name: string | null
  avatar_url: string | null
  created_at: string
}

interface UserSpot {
  id: string
  title: string
  status: string
  created_at: string
  helps: number
  views: number
  category: string | null
}

interface UserShop {
  id: string
  shop_name: string
  city: string
  subscription_type: string
  is_verified: boolean
}

export default function ProfilePage() {
  const router = useRouter()
  const [user, setUser] = useState<UserProfile | null>(null)
  const [userSpots, setUserSpots] = useState<UserSpot[]>([])
  const [userShop, setUserShop] = useState<UserShop | null>(null)
  const [loading, setLoading] = useState(true)
  const [activeTab, setActiveTab] = useState<'spots' | 'help' | 'shop' | 'settings'>('spots')

  useEffect(() => {
    checkAuth()
  }, [])

  const checkAuth = async () => {
    const { data: { user: authUser } } = await supabase.auth.getUser()
    
    if (!authUser) {
      router.push('/')
      return
    }
    
    fetchUserData(authUser.id)
  }

  const fetchUserData = async (userId: string) => {
    try {
      // KullanÄ±cÄ± bilgileri
      const { data: userData } = await supabase
        .from('user_profiles')
        .select('*')
        .eq('id', userId)
        .single()

      // KullanÄ±cÄ±nÄ±n spot'larÄ±
      const { data: spotsData } = await supabase
        .from('spots')
        .select('id, title, status, created_at, helps, views, category')
        .eq('user_id', userId)
        .order('created_at', { ascending: false })

      // KullanÄ±cÄ±nÄ±n maÄŸazasÄ±
      const { data: shopData } = await supabase
        .from('shops')
        .select('id, shop_name, city, subscription_type, is_verified')
        .eq('owner_id', userId)
        .single()

      setUser({
        id: userId,
        email: userData?.email || '',
        name: userData?.name || 'KullanÄ±cÄ±',
        avatar_url: userData?.avatar_url || null,
        created_at: userData?.created_at || new Date().toISOString()
      })
      
      setUserSpots(spotsData || [])
      setUserShop(shopData || null)

    } catch (error) {
      console.error('KullanÄ±cÄ± bilgileri yÃ¼klenemedi:', error)
    } finally {
      setLoading(false)
    }
  }

  const handleLogout = async () => {
    await supabase.auth.signOut()
    router.push('/')
  }

  const handleCreateSpot = () => {
    router.push('/create-spot')
  }

  const handleOpenShopDashboard = () => {
    if (userShop) {
      router.push('/shop/dashboard')
    } else {
      router.push('/for-business')
    }
  }

  if (loading) {
    return (
      <div className="min-h-screen bg-gray-50">
        <main className="container-custom py-12 text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto"></div>
        </main>
      </div>
    )
  }

  if (!user) {
    return null
  }

  return (
    <div className="min-h-screen bg-gray-50">
      <main className="container-custom py-8">
        {/* Profil Header */}
        <div className="bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-6 md:p-8 text-white mb-8">
          <div className="flex flex-col md:flex-row md:items-center justify-between">
            <div className="flex items-center mb-6 md:mb-0">
              <div className="w-20 h-20 bg-white text-blue-600 rounded-full flex items-center justify-center text-2xl font-bold mr-6">
                {user.name?.[0]?.toUpperCase() || user.email[0].toUpperCase()}
              </div>
              <div>
                <h1 className="text-2xl md:text-3xl font-bold mb-2">{user.name || 'KullanÄ±cÄ±'}</h1>
                <p className="text-blue-100">{user.email}</p>
                <p className="text-blue-100 text-sm mt-2">
                  Ãœyelik: {new Date(user.created_at).toLocaleDateString('tr-TR')}
                </p>
              </div>
            </div>
            <div className="flex flex-col sm:flex-row gap-3">
              <button
                onClick={handleCreateSpot}
                className="bg-white text-blue-600 hover:bg-blue-50 font-medium px-6 py-3 rounded-lg"
              >
                ğŸ“ Yeni Spot OluÅŸtur
              </button>
              <button
                onClick={handleLogout}
                className="bg-red-500 hover:bg-red-600 text-white font-medium px-6 py-3 rounded-lg"
              >
                ğŸšª Ã‡Ä±kÄ±ÅŸ Yap
              </button>
            </div>
          </div>
        </div>

        {/* Ä°statistik KartlarÄ± */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
          <div className="bg-white rounded-xl p-4 shadow text-center hover:shadow-md transition">
            <div className="text-2xl font-bold text-blue-600 mb-1">
              {userSpots.length}
            </div>
            <div className="text-gray-600">Spot'larÄ±m</div>
          </div>
          
          <div className="bg-white rounded-xl p-4 shadow text-center hover:shadow-md transition">
            <div className="text-2xl font-bold text-green-600 mb-1">
              {userSpots.filter(s => s.status === 'found').length}
            </div>
            <div className="text-gray-600">Bulunan</div>
          </div>
          
          <div className="bg-white rounded-xl p-4 shadow text-center hover:shadow-md transition">
            <div className="text-2xl font-bold text-purple-600 mb-1">
              {userSpots.reduce((sum, spot) => sum + spot.views, 0)}
            </div>
            <div className="text-gray-600">GÃ¶rÃ¼ntÃ¼lenme</div>
          </div>
          
          <div className="bg-white rounded-xl p-4 shadow text-center hover:shadow-md transition">
            <div className="text-2xl font-bold text-orange-600 mb-1">
              {userSpots.reduce((sum, spot) => sum + spot.helps, 0)}
            </div>
            <div className="text-gray-600">YardÄ±m</div>
          </div>
        </div>

        {/* MaÄŸaza KartÄ± */}
        {userShop && (
          <div className="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-2xl p-6 mb-8">
            <div className="flex flex-col md:flex-row md:items-center justify-between">
              <div className="flex items-center mb-4 md:mb-0">
                <div className="w-12 h-12 bg-white text-green-600 rounded-full flex items-center justify-center text-xl font-bold mr-4">
                  ğŸª
                </div>
                <div>
                  <h3 className="text-xl font-bold">{userShop.shop_name}</h3>
                  <p className="text-green-100">
                    {userShop.city} â€¢ {userShop.subscription_type === 'free' ? 'Ãœcretsiz Paket' : 'Premium'}
                    {userShop.is_verified && ' â€¢ âœ“ DoÄŸrulanmÄ±ÅŸ'}
                  </p>
                </div>
              </div>
              <button
                onClick={handleOpenShopDashboard}
                className="bg-white text-green-600 hover:bg-green-50 font-bold px-6 py-3 rounded-lg"
              >
                MaÄŸaza Paneline Git
              </button>
            </div>
          </div>
        )}

        {!userShop && (
          <div className="bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-2xl p-6 mb-8">
            <div className="flex flex-col md:flex-row md:items-center justify-between">
              <div className="mb-4 md:mb-0">
                <h3 className="text-xl font-bold mb-2">ğŸª MaÄŸaza Sahibi misiniz?</h3>
                <p className="text-yellow-100">
                  Ãœcretsiz maÄŸaza aÃ§Ä±n, mÃ¼ÅŸterilerinizi artÄ±rÄ±n ve satÄ±ÅŸlarÄ±nÄ±zÄ± bÃ¼yÃ¼tÃ¼n!
                </p>
              </div>
              <button
                onClick={() => router.push('/for-business')}
                className="bg-white text-orange-600 hover:bg-orange-50 font-bold px-6 py-3 rounded-lg"
              >
                Ãœcretsiz MaÄŸaza AÃ§
              </button>
            </div>
          </div>
        )}

        {/* Tab Navigation */}
        <div className="bg-white rounded-xl shadow mb-6">
          <div className="flex border-b overflow-x-auto">
            <button
              onClick={() => setActiveTab('spots')}
              className={`flex-shrink-0 px-6 py-4 text-center font-medium whitespace-nowrap ${
                activeTab === 'spots'
                  ? 'text-blue-600 border-b-2 border-blue-600'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            >
              ğŸ“ Spot'larÄ±m
            </button>
            <button
              onClick={() => setActiveTab('help')}
              className={`flex-shrink-0 px-6 py-4 text-center font-medium whitespace-nowrap ${
                activeTab === 'help'
                  ? 'text-blue-600 border-b-2 border-blue-600'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            >
              ğŸ¤ YardÄ±m Ettiklerim
            </button>
            {userShop && (
              <button
                onClick={() => setActiveTab('shop')}
                className={`flex-shrink-0 px-6 py-4 text-center font-medium whitespace-nowrap ${
                  activeTab === 'shop'
                    ? 'text-blue-600 border-b-2 border-blue-600'
                    : 'text-gray-600 hover:text-gray-900'
                }`}
              >
                ğŸª MaÄŸazam
              </button>
            )}
            <button
              onClick={() => setActiveTab('settings')}
              className={`flex-shrink-0 px-6 py-4 text-center font-medium whitespace-nowrap ${
                activeTab === 'settings'
                  ? 'text-blue-600 border-b-2 border-blue-600'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            >
              âš™ï¸ Ayarlar
            </button>
          </div>
          
          <div className="p-6">
            {activeTab === 'spots' && (
              <div>
                <div className="flex justify-between items-center mb-6">
                  <h3 className="text-xl font-bold text-gray-900">Spot'larÄ±m</h3>
                  <button
                    onClick={handleCreateSpot}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg"
                  >
                    + Yeni Spot
                  </button>
                </div>
                
                {userSpots.length === 0 ? (
                  <div className="bg-gray-50 rounded-xl p-8 text-center">
                    <div className="text-4xl mb-4">ğŸ“</div>
                    <h4 className="text-lg font-bold text-gray-900 mb-2">HenÃ¼z spot oluÅŸturmadÄ±nÄ±z</h4>
                    <p className="text-gray-600 mb-6">Ä°lk spot'unuzu oluÅŸturun ve topluluÄŸumuzdan yardÄ±m alÄ±n</p>
                    <button
                      onClick={handleCreateSpot}
                      className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg"
                    >
                      Ä°lk Spot'u OluÅŸturun
                    </button>
                  </div>
                ) : (
                  <div className="overflow-x-auto">
                    <table className="w-full">
                      <thead className="bg-gray-50">
                        <tr>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">BaÅŸlÄ±k</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Kategori</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Durum</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">GÃ¶rÃ¼ntÃ¼lenme</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">YardÄ±m</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Tarih</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Ä°ÅŸlemler</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-gray-100">
                        {userSpots.map((spot) => (
                          <tr key={spot.id} className="hover:bg-gray-50">
                            <td className="py-3 px-4">
                              <Link
                                href={`/spots/${spot.id}`}
                                className="font-medium text-blue-600 hover:text-blue-800"
                              >
                                {spot.title.length > 40 ? spot.title.substring(0, 40) + '...' : spot.title}
                              </Link>
                            </td>
                            <td className="py-3 px-4">
                              {spot.category ? (
                                <span className="bg-gray-100 text-gray-800 text-xs font-medium px-3 py-1 rounded-full">
                                  {spot.category}
                                </span>
                              ) : (
                                <span className="text-gray-400">-</span>
                              )}
                            </td>
                            <td className="py-3 px-4">
                              <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                                spot.status === 'active'
                                  ? 'bg-green-100 text-green-800'
                                  : 'bg-blue-100 text-blue-800'
                              }`}>
                                {spot.status === 'active' ? 'Aktif' : 'Bulundu'}
                              </span>
                            </td>
                            <td className="py-3 px-4">{spot.views}</td>
                            <td className="py-3 px-4">{spot.helps}</td>
                            <td className="py-3 px-4 text-sm text-gray-500">
                              {new Date(spot.created_at).toLocaleDateString('tr-TR')}
                            </td>
                            <td className="py-3 px-4">
                              <div className="flex space-x-2">
                                <Link
                                  href={`/spots/${spot.id}`}
                                  className="text-blue-600 hover:text-blue-800 text-sm"
                                >
                                  GÃ¶rÃ¼ntÃ¼le
                                </Link>
                              </div>
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                )}
              </div>
            )}
            
            {activeTab === 'help' && (
              <div className="bg-gray-50 rounded-xl p-8 text-center">
                <div className="text-4xl mb-4">ğŸ¤</div>
                <h4 className="text-lg font-bold text-gray-900 mb-2">YardÄ±m Ettikleriniz</h4>
                <p className="text-gray-600 mb-6">
                  DiÄŸer kullanÄ±cÄ±lara yardÄ±m ettiÄŸiniz spot'lar yakÄ±nda burada gÃ¶rÃ¼necek.
                </p>
                <button
                  onClick={() => router.push('/spots')}
                  className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg"
                >
                  Spot'lara GÃ¶z AtÄ±n
                </button>
              </div>
            )}
            
            {activeTab === 'shop' && userShop && (
              <div>
                <h3 className="text-xl font-bold text-gray-900 mb-6">MaÄŸaza Bilgilerim</h3>
                
                <div className="grid md:grid-cols-2 gap-6">
                  <div className="bg-white border border-gray-200 rounded-xl p-6">
                    <h4 className="font-bold text-gray-900 mb-4">MaÄŸaza DetaylarÄ±</h4>
                    <div className="space-y-3">
                      <div>
                        <p className="text-sm text-gray-600">MaÄŸaza AdÄ±</p>
                        <p className="font-medium">{userShop.shop_name}</p>
                      </div>
                      <div>
                        <p className="text-sm text-gray-600">Åehir</p>
                        <p className="font-medium">{userShop.city}</p>
                      </div>
                      <div>
                        <p className="text-sm text-gray-600">Paket</p>
                        <p className="font-medium">
                          {userShop.subscription_type === 'free' ? 'Ãœcretsiz BaÅŸlangÄ±Ã§' : 'Premium'}
                        </p>
                      </div>
                      <div>
                        <p className="text-sm text-gray-600">Durum</p>
                        <p className="font-medium">
                          {userShop.is_verified ? 'âœ“ DoÄŸrulanmÄ±ÅŸ' : 'DoÄŸrulanmamÄ±ÅŸ'}
                        </p>
                      </div>
                    </div>
                    
                    <button
                      onClick={handleOpenShopDashboard}
                      className="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg"
                    >
                      MaÄŸaza Paneline Git
                    </button>
                  </div>
                  
                  <div className="bg-white border border-gray-200 rounded-xl p-6">
                    <h4 className="font-bold text-gray-900 mb-4">HÄ±zlÄ± Ä°ÅŸlemler</h4>
                    <div className="space-y-3">
                      <button
                        onClick={() => router.push('/for-business?edit=true')}
                        className="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 rounded-lg"
                      >
                        ğŸ“ MaÄŸaza Bilgilerini DÃ¼zenle
                      </button>
                      <button
                        onClick={handleCreateSpot}
                        className="w-full bg-blue-100 hover:bg-blue-200 text-blue-800 py-3 rounded-lg"
                      >
                        ğŸª MaÄŸaza Ä°Ã§in Spot OluÅŸtur
                      </button>
                      <button
                        onClick={() => router.push(`/shop/${userShop.id}`)}
                        className="w-full bg-green-100 hover:bg-green-200 text-green-800 py-3 rounded-lg"
                      >
                        ğŸ‘ï¸ MaÄŸazayÄ± GÃ¶rÃ¼ntÃ¼le
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}
            
            {activeTab === 'settings' && (
              <div>
                <h3 className="text-xl font-bold text-gray-900 mb-6">Hesap AyarlarÄ±</h3>
                
                <div className="grid md:grid-cols-2 gap-6">
                  <div className="bg-white border border-gray-200 rounded-xl p-6">
                    <h4 className="font-bold text-gray-900 mb-4">Profil Bilgileri</h4>
                    <div className="space-y-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Ad Soyad
                        </label>
                        <p className="font-medium">{user.name || 'BelirtilmemiÅŸ'}</p>
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Email
                        </label>
                        <p className="font-medium">{user.email}</p>
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Ãœyelik Tarihi
                        </label>
                        <p className="font-medium">
                          {new Date(user.created_at).toLocaleDateString('tr-TR')}
                        </p>
                      </div>
                    </div>
                  </div>
                  
                  <div className="bg-white border border-gray-200 rounded-xl p-6">
                    <h4 className="font-bold text-gray-900 mb-4">Bildirimler</h4>
                    <div className="space-y-3">
                      <label className="flex items-center">
                        <input type="checkbox" className="mr-3" defaultChecked />
                        <span className="text-sm">Yeni spot cevaplarÄ±</span>
                      </label>
                      <label className="flex items-center">
                        <input type="checkbox" className="mr-3" defaultChecked />
                        <span className="text-sm">Spot durum deÄŸiÅŸiklikleri</span>
                      </label>
                      <label className="flex items-center">
                        <input type="checkbox" className="mr-3" />
                        <span className="text-sm">Kampanya ve duyurular</span>
                      </label>
                    </div>
                    
                    <div className="mt-6 pt-6 border-t">
                      <h4 className="font-bold text-gray-900 mb-3">GÃ¼venlik</h4>
                      <button
                        onClick={() => router.push('/forgot-password')}
                        className="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 rounded-lg"
                      >
                        ğŸ” Åifre DeÄŸiÅŸtir
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      </main>
    </div>
  )
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ components\AuthModal.tsx
ğŸ“Š 374 satÄ±r | 14378 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/AuthModal.tsx - DEBUG VERSÄ°YON
'use client'

import { useState } from 'react'
import { supabase } from '@/lib/supabase'
import { sendWelcomeEmail } from '@/lib/email-server'

interface AuthModalProps {
  isOpen: boolean
  onClose: () => void
  onSuccess?: () => void
}

export default function AuthModal({ isOpen, onClose, onSuccess }: AuthModalProps) {
  const [isLogin, setIsLogin] = useState(true)
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [name, setName] = useState('')
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState('')
  const [successMessage, setSuccessMessage] = useState('')
  const [debugLog, setDebugLog] = useState<string[]>([])

  const addDebugLog = (message: string) => {
    console.log(`ğŸ” DEBUG: ${message}`)
    setDebugLog(prev => [...prev, `${new Date().toISOString().split('T')[1].split('.')[0]}: ${message}`])
  }

  if (!isOpen) return null

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setLoading(true)
    setError('')
    setSuccessMessage('')
    setDebugLog([])

    addDebugLog('Form submit baÅŸladÄ±')
    addDebugLog(`Mode: ${isLogin ? 'Login' : 'Register'}`)
    addDebugLog(`Email: ${email}, Name: ${name}`)

    try {
      if (isLogin) {
        // GÄ°RÄ°Å YAP
        addDebugLog('Supabase signInWithPassword Ã§aÄŸrÄ±lÄ±yor...')
        
        const { data, error } = await supabase.auth.signInWithPassword({
          email,
          password,
        })
        
        addDebugLog(`SignIn response: ${error ? 'Error: ' + error.message : 'Success'}`)
        console.log('SignIn full response:', { data, error })
        
        if (error) throw error
        
        setSuccessMessage('BaÅŸarÄ±yla giriÅŸ yaptÄ±nÄ±z!')
        addDebugLog('GiriÅŸ baÅŸarÄ±lÄ±, yÃ¶nlendirme bekleniyor...')
        
        setTimeout(() => {
          onClose()
          if (onSuccess) {
            onSuccess()
          } else {
            window.location.reload()
          }
        }, 1500)
        
      } else {
        // KAYIT OL
        addDebugLog('KayÄ±t iÅŸlemi baÅŸlatÄ±lÄ±yor...')
        
        // 1. Ã–nce auth kaydÄ±
        addDebugLog('Supabase signUp Ã§aÄŸrÄ±lÄ±yor...')
        const { data: authData, error: authError } = await supabase.auth.signUp({
          email,
          password,
          options: {
            data: { name },
            emailRedirectTo: `${window.location.origin}/auth/callback`,
          },
        })
        
        addDebugLog(`Auth signUp response: ${authError ? 'Error: ' + authError.message : 'Success'}`)
        console.log('Auth signUp full response:', { authData, authError })
        
        if (authError) {
          addDebugLog(`Auth error details: ${JSON.stringify(authError, null, 2)}`)
          throw authError
        }
        
        if (authData?.user) {
          addDebugLog(`Auth baÅŸarÄ±lÄ±! User ID: ${authData.user.id}`)
          addDebugLog(`User confirmed: ${authData.user.confirmed_at ? 'Evet' : 'HayÄ±r'}`)
          
          // 2. user_profiles tablosuna kayÄ±t
          try {
            addDebugLog('user_profiles tablosuna kayÄ±t yapÄ±lÄ±yor...')
            const { data: profileData, error: profileError } = await supabase
              .from('user_profiles')
              .insert({
                id: authData.user.id,
                name: name,
                created_at: new Date().toISOString(),
                updated_at: new Date().toISOString()
              })
              .select()
            
            addDebugLog(`Profile insert response: ${profileError ? 'Error: ' + profileError.message : 'Success'}`)
            console.log('Profile insert full response:', { profileData, profileError })
            
            if (profileError) {
              addDebugLog(`Profile error (devam ediliyor): ${profileError.message}`)
              // Profile kaydÄ± baÅŸarÄ±sÄ±z olsa bile devam et
            } else {
              addDebugLog('Profile kaydÄ± baÅŸarÄ±lÄ±!')
            }
          } catch (profileErr: any) {
            addDebugLog(`Profile exception: ${profileErr.message}`)
            console.warn('Profile kaydÄ± exception:', profileErr)
          }
          
          // 3. Email gÃ¶nder
          try {
            addDebugLog('Welcome email gÃ¶nderiliyor...')
            const result = await sendWelcomeEmail(email, name)
            addDebugLog(`Email gÃ¶nderim sonucu: ${result.success ? 'BaÅŸarÄ±lÄ±' : 'BaÅŸarÄ±sÄ±z'}`)
            
            if (result.success) {
              setSuccessMessage(`ğŸ‰ HoÅŸ geldiniz ${name}! KaydÄ±nÄ±z baÅŸarÄ±yla oluÅŸturuldu.`)
            } else {
              setSuccessMessage(`âœ… KaydÄ±nÄ±z baÅŸarÄ±yla oluÅŸturuldu ${name}! (Email gÃ¶nderilemedi)`)
            }
          } catch (emailError: any) {
            addDebugLog(`Email error: ${emailError.message}`)
            console.warn('Email gÃ¶nderilemedi:', emailError)
            setSuccessMessage(`âœ… KaydÄ±nÄ±z baÅŸarÄ±yla oluÅŸturuldu ${name}!`)
          }
          
          addDebugLog('KayÄ±t tamamlandÄ±, yÃ¶nlendirme bekleniyor...')
          setTimeout(() => {
            onClose()
            if (onSuccess) {
              onSuccess()
            } else {
              window.location.href = '/profile'
            }
          }, 2000)
        } else {
          addDebugLog('Auth data var ama user yok!')
          throw new Error('KullanÄ±cÄ± oluÅŸturulamadÄ±')
        }
      }

    } catch (err: any) {
      console.error('Auth error details:', err)
      addDebugLog(`Catch error: ${err.message}`)
      addDebugLog(`Error stack: ${err.stack}`)
      
      let errorMessage = err.message || 'Bir hata oluÅŸtu'
      
      // DetaylÄ± hata mesajlarÄ±
      if (errorMessage.includes('Invalid login credentials')) {
        errorMessage = 'GeÃ§ersiz email veya ÅŸifre'
      } else if (errorMessage.includes('Email not confirmed')) {
        errorMessage = 'LÃ¼tfen email adresinizi doÄŸrulayÄ±n (spam klasÃ¶rÃ¼nÃ¼zÃ¼ kontrol edin)'
      } else if (errorMessage.includes('User already registered')) {
        errorMessage = 'Bu email adresi zaten kayÄ±tlÄ±. LÃ¼tfen giriÅŸ yapÄ±n veya ÅŸifrenizi sÄ±fÄ±rlayÄ±n.'
      } else if (errorMessage.includes('Password should be at least')) {
        errorMessage = 'Åifre en az 6 karakter olmalÄ±dÄ±r'
      } else if (errorMessage.includes('Invalid email')) {
        errorMessage = 'GeÃ§ersiz email adresi formatÄ±'
      } else if (errorMessage.includes('rate limit')) {
        errorMessage = 'Ã‡ok fazla deneme yaptÄ±nÄ±z. LÃ¼tfen bir sÃ¼re sonra tekrar deneyin.'
      } else if (errorMessage.includes('network')) {
        errorMessage = 'AÄŸ hatasÄ±. LÃ¼tfen internet baÄŸlantÄ±nÄ±zÄ± kontrol edin.'
      } else if (errorMessage.includes('duplicate key')) {
        errorMessage = 'Bu kullanÄ±cÄ± zaten kayÄ±tlÄ±'
      } else if (errorMessage.includes('JWT')) {
        errorMessage = 'Kimlik doÄŸrulama hatasÄ±. LÃ¼tfen sayfayÄ± yenileyin.'
      }
      
      setError(`${errorMessage} (LÃ¼tfen browser konsolunu kontrol edin)`)
      
    } finally {
      setLoading(false)
      addDebugLog('Ä°ÅŸlem tamamlandÄ± (finally)')
    }
  }

  const handleClose = () => {
    setEmail('')
    setPassword('')
    setName('')
    setError('')
    setSuccessMessage('')
    setDebugLog([])
    onClose()
  }

  const switchMode = () => {
    setIsLogin(!isLogin)
    setError('')
    setSuccessMessage('')
    setDebugLog([])
  }

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div className="bg-white rounded-xl shadow-2xl w-full max-w-md">
        {/* Header */}
        <div className="border-b p-6">
          <div className="flex justify-between items-center">
            <h2 className="text-2xl font-bold text-gray-900">
              {isLogin ? 'GiriÅŸ Yap' : 'Hesap OluÅŸtur'}
            </h2>
            <button
              onClick={handleClose}
              className="text-gray-500 hover:text-gray-700 text-2xl"
              disabled={loading}
            >
              Ã—
            </button>
          </div>
          <p className="text-gray-600 mt-2">
            {isLogin 
              ? 'Spot oluÅŸturmak ve yardÄ±m etmek iÃ§in giriÅŸ yapÄ±n' 
              : 'TopluluÄŸumuza katÄ±lÄ±n, kayÄ±p Ã¼rÃ¼nleri birlikte bulalÄ±m'}
          </p>
        </div>

        {/* Form */}
        <form onSubmit={handleSubmit} className="p-6 space-y-4">
          {!isLogin && (
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                Ad Soyad *
              </label>
              <input
                type="text"
                value={name}
                onChange={(e) => setName(e.target.value)}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                placeholder="Ahmet YÄ±lmaz"
                required={!isLogin}
                disabled={loading}
              />
            </div>
          )}

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              E-posta *
            </label>
            <input
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
              placeholder="ornek@email.com"
              required
              disabled={loading}
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              Åifre *
            </label>
            <input
              type="password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
              minLength={6}
              required
              disabled={loading}
            />
            {!isLogin && (
              <p className="text-xs text-gray-500 mt-1">
                Åifreniz en az 6 karakter olmalÄ±dÄ±r
              </p>
            )}
          </div>

          {/* Debug Log (sadece development'da) */}
          {process.env.NODE_ENV === 'development' && debugLog.length > 0 && (
            <div className="bg-gray-900 text-green-400 p-3 rounded-lg border border-gray-700 max-h-40 overflow-y-auto">
              <div className="text-xs font-mono">
                <div className="font-bold mb-1">ğŸ” DEBUG LOG:</div>
                {debugLog.map((log, index) => (
                  <div key={index} className="mb-1 border-b border-gray-800 pb-1 last:border-0">
                    {log}
                  </div>
                ))}
              </div>
            </div>
          )}

          {/* BaÅŸarÄ± MesajÄ± */}
          {successMessage && (
            <div className="bg-green-50 border border-green-200 text-green-700 p-4 rounded-lg">
              {successMessage}
            </div>
          )}

          {/* Hata MesajÄ± */}
          {error && (
            <div className="bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg">
              <div className="font-medium mb-1">Hata:</div>
              <div>{error}</div>
              <div className="mt-2 text-sm">
                <button
                  type="button"
                  onClick={() => {
                    console.log('DEBUG LOG:', debugLog)
                    alert(`Debug log konsolda gÃ¶rÃ¼ntÃ¼lendi. LÃ¼tfen F12 ile konsolu aÃ§Ä±n.`)
                  }}
                  className="text-red-600 hover:text-red-800 underline mr-4"
                >
                  Debug Log'u GÃ¶r
                </button>
                <button
                  type="button"
                  onClick={() => {
                    const testData = { email, name, isLogin }
                    console.log('TEST DATA:', testData)
                    alert(`Test data: ${JSON.stringify(testData)}`)
                  }}
                  className="text-blue-600 hover:text-blue-800 underline"
                >
                  Test Data'yÄ± GÃ¶r
                </button>
              </div>
            </div>
          )}

          <button
            type="submit"
            disabled={loading}
            className="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"
          >
            {loading ? (
              <>
                <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                  <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                  <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Ä°ÅŸleniyor...
              </>
            ) : (
              isLogin ? 'GiriÅŸ Yap' : 'Hesap OluÅŸtur'
            )}
          </button>
        </form>

        {/* Footer */}
        <div className="border-t p-6 text-center">
          <p className="text-gray-600">
            {isLogin ? 'HesabÄ±nÄ±z yok mu?' : 'Zaten hesabÄ±nÄ±z var mÄ±?'}
            <button
              onClick={switchMode}
              disabled={loading}
              className="text-blue-600 hover:text-blue-800 font-medium ml-2 disabled:opacity-50"
            >
              {isLogin ? 'KayÄ±t Olun' : 'GiriÅŸ YapÄ±n'}
            </button>
          </p>
        </div>
      </div>
    </div>
  )
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ components\Footer.tsx
ğŸ“Š 179 satÄ±r | 6878 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/Footer.tsx - GÃœNCELLENMÄ°Å
import Link from 'next/link'

export default function Footer() {
  const currentYear = new Date().getFullYear()

  return (
    <footer className="bg-gray-900 text-white pt-12 pb-8 mt-16">
      <div className="container-custom">
        <div className="grid md:grid-cols-5 gap-8 mb-8">
          {/* Logo & Description */}
          <div className="md:col-span-2">
            <div className="flex items-center mb-4">
              <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center mr-3">
                <span className="text-white font-bold text-xl">S</span>
              </div>
              <h2 className="text-2xl font-bold">SpotItForMe</h2>
            </div>
            <p className="text-gray-400 mb-6">
              Topluluk gÃ¼cÃ¼yle kayÄ±p Ã¼rÃ¼nleri bulma platformu. 
              KeÅŸfet, bul, paylaÅŸ, kazan!
            </p>
            <div className="flex space-x-4">
              <button className="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-gray-700">
                ğŸ“˜
              </button>
              <button className="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-gray-700">
                ğŸ“·
              </button>
              <button className="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-gray-700">
                ğŸ¦
              </button>
            </div>
          </div>

          {/* Spot & KeÅŸfet */}
          <div>
            <h3 className="text-lg font-bold mb-4">Spot & KeÅŸfet</h3>
            <ul className="space-y-3">
              <li>
                <Link href="/spots" className="text-gray-400 hover:text-white">
                  TÃ¼m Spot'lar
                </Link>
              </li>
              <li>
                <Link href="/create-spot" className="text-gray-400 hover:text-white">
                  Spot OluÅŸtur
                </Link>
              </li>
              <li>
                <Link href="/discovery" className="text-gray-400 hover:text-white">
                  KeÅŸfet
                </Link>
              </li>
              <li>
                <Link href="/leaderboard" className="text-gray-400 hover:text-white">
                  Lider Tablosu
                </Link>
              </li>
              <li>
                <Link href="/challenges" className="text-gray-400 hover:text-white">
                  GÃ¼nlÃ¼k Hedefler
                </Link>
              </li>
            </ul>
          </div>

          {/* MaÄŸazalar */}
          <div>
            <h3 className="text-lg font-bold mb-4">MaÄŸazalar</h3>
            <ul className="space-y-3">
              <li>
                <Link href="/shops" className="text-gray-400 hover:text-white">
                  MaÄŸazalarÄ± KeÅŸfet
                </Link>
              </li>
              <li>
                <Link href="/for-business" className="text-gray-400 hover:text-white">
                  Ä°ÅŸletme KaydÄ±
                </Link>
              </li>
              <li>
                <Link href="/shop-dashboard" className="text-gray-400 hover:text-white">
                  MaÄŸaza Paneli
                </Link>
              </li>
              <li>
                <Link href="/premium" className="text-gray-400 hover:text-white">
                  Premium Paketler
                </Link>
              </li>
            </ul>
          </div>

          {/* YardÄ±m & Destek */}
          <div>
            <h3 className="text-lg font-bold mb-4">YardÄ±m & Destek</h3>
            <ul className="space-y-3">
              <li>
                <Link href="/how-it-works" className="text-gray-400 hover:text-white">
                  NasÄ±l Ã‡alÄ±ÅŸÄ±r?
                </Link>
              </li>
              <li>
                <Link href="/faq" className="text-gray-400 hover:text-white">
                  SÄ±kÃ§a Sorulan Sorular
                </Link>
              </li>
              <li>
                <Link href="/contact" className="text-gray-400 hover:text-white">
                  Ä°letiÅŸim
                </Link>
              </li>
              <li>
                <Link href="/privacy" className="text-gray-400 hover:text-white">
                  Gizlilik PolitikasÄ±
                </Link>
              </li>
              <li>
                <Link href="/terms" className="text-gray-400 hover:text-white">
                  KullanÄ±m KoÅŸullarÄ±
                </Link>
              </li>
            </ul>
          </div>
        </div>

        {/* Newsletter - YENÄ° */}
        <div className="border-t border-gray-800 pt-8 mb-8">
          <div className="max-w-xl mx-auto text-center">
            <h3 className="text-xl font-bold mb-4">ğŸ“¬ BÃ¼ltenimize Abone Olun</h3>
            <p className="text-gray-400 mb-6">
              Yeni Ã¶zellikler, baÅŸarÄ± hikayeleri ve Ã¶zel fÄ±rsatlardan haberdar olun.
            </p>
            <form className="flex">
              <input
                type="email"
                placeholder="E-posta adresiniz"
                className="flex-grow px-6 py-3 rounded-l-lg bg-gray-800 text-white border-0 focus:ring-2 focus:ring-blue-500 focus:outline-none"
              />
              <button 
                type="submit"
                className="bg-blue-600 hover:bg-blue-700 text-white font-medium px-8 py-3 rounded-r-lg"
              >
                Abone Ol
              </button>
            </form>
          </div>
        </div>

        {/* Copyright */}
        <div className="border-t border-gray-800 pt-8 text-center">
          <p className="text-gray-400">
            Â© {currentYear} SpotItForMe. TÃ¼m haklarÄ± saklÄ±dÄ±r.
          </p>
          <p className="text-gray-500 text-sm mt-2">
            Made with â¤ï¸ for people who search | v2.0
          </p>
          
          {/* Yeni Ã–zellikler Badge */}
          <div className="mt-4 flex flex-wrap justify-center gap-2">
            <span className="px-3 py-1 bg-blue-900 text-blue-200 rounded-full text-xs">
              ğŸ”¥ Yeni: KeÅŸfet
            </span>
            <span className="px-3 py-1 bg-green-900 text-green-200 rounded-full text-xs">
              ğŸ† Puan Sistemi
            </span>
            <span className="px-3 py-1 bg-purple-900 text-purple-200 rounded-full text-xs">
              ğŸª MaÄŸaza 2.0
            </span>
            <span className="px-3 py-1 bg-yellow-900 text-yellow-200 rounded-full text-xs">
              ğŸ‘ï¸ Nadir GÃ¶rdÃ¼m
            </span>
          </div>
        </div>
      </div>
    </footer>
  )
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ components\Header.tsx
ğŸ“Š 78 satÄ±r | 2879 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/Header.tsx - Z-INDEX EKLENDÄ°
import Link from 'next/link'
import UserMenu from './UserMenu'

export default function Header() {
  return (
    <header className="bg-white shadow relative z-50"> {/* Z-INDEX EKLENDÄ° */}
      <div className="container-custom py-4">
        <div className="flex justify-between items-center">
          {/* Logo */}
          <div className="flex items-center space-x-2">
            <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
              <span className="text-white font-bold text-xl">S</span>
            </div>
            <div>
              <h1 className="text-2xl font-bold text-gray-900">SpotItForMe</h1>
              <p className="text-sm text-gray-600 hidden md:block">Toplulukla bulma platformu</p>
            </div>
          </div>

          {/* Navigation */}
          <nav className="hidden md:flex space-x-8">
            <Link href="/" className="text-gray-700 hover:text-blue-600 font-medium">
              Ana Sayfa
            </Link>
            <Link href="/spots" className="text-gray-700 hover:text-blue-600 font-medium">
              Spot'lar
            </Link>
            <Link href="/how-it-works" className="text-gray-700 hover:text-blue-600 font-medium">
              NasÄ±l Ã‡alÄ±ÅŸÄ±r?
            </Link>
            <Link href="/for-business" className="text-gray-700 hover:text-blue-600 font-medium">
              Ä°ÅŸletmeler Ä°Ã§in
            </Link>
            
            <Link href="/products" className="text-gray-700 hover:text-blue-600 font-medium">
              ÃœrÃ¼nler
            </Link>
          </nav>

          {/* Buttons */}
          <div className="flex items-center space-x-4">
            <UserMenu />
            <Link 
              href="/create-spot"
              className="btn-primary hidden md:inline-block"
            >
              Spot OluÅŸtur
            </Link>
          </div>
        </div>

        {/* Mobile Navigation */}
        <div className="md:hidden mt-4 flex justify-center space-x-6">
          <Link href="/spots" className="text-gray-700 hover:text-blue-600 text-sm">
            Spot'lar
          </Link>
          <Link href="/how-it-works" className="text-gray-700 hover:text-blue-600 text-sm">
            NasÄ±l Ã‡alÄ±ÅŸÄ±r?
          </Link>
          <Link href="/for-business" className="text-gray-700 hover:text-blue-600 text-sm">
            Ä°ÅŸletmeler
          </Link>
        </div>

        {/* Mobile Spot OluÅŸtur Butonu */}
        <div className="md:hidden mt-4">
          <Link 
            href="/create-spot"
            className="btn-primary w-full block text-center"
          >
            Ãœcretsiz Spot OluÅŸtur
          </Link>
        </div>
      </div>
    </header>
  )
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ components\NativeAd.tsx
ğŸ“Š 259 satÄ±r | 9046 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/NativeAd.tsx - TAMAMI
'use client';

import { useState, useEffect } from 'react';
import { ExternalLink, TrendingUp, Star, Smartphone, Monitor } from 'lucide-react';

interface NativeAdProps {
  index?: number;
  className?: string;
  title?: string;
  description?: string;
  ctaText?: string;
  advertiserName?: string;
}

export default function NativeAd({ 
  index = 3, 
  className = '',
  title,
  description,
  ctaText,
  advertiserName
}: NativeAdProps) {
  const [isMobile, setIsMobile] = useState(false);
  const [mounted, setMounted] = useState(false);
  const [hover, setHover] = useState(false);

  useEffect(() => {
    setMounted(true);
    const checkMobile = () => {
      setIsMobile(window.innerWidth < 768);
    };
    
    checkMobile();
    window.addEventListener('resize', checkMobile);
    
    return () => window.removeEventListener('resize', checkMobile);
  }, []);

  // VarsayÄ±lan reklam iÃ§erikleri
  const defaultAds = {
    mobile: {
      title: 'Mobil AlÄ±ÅŸveriÅŸte Ã–zel FÄ±rsat!',
      description: 'Nadir bulunan Ã¼rÃ¼nler iÃ§in mobil uygulamamÄ±zÄ± deneyin. %20 indirim kodu: SPOT20',
      ctaText: 'Hemen KeÅŸfet',
      advertiserName: 'Mobil Partner',
      icon: 'ğŸ“±'
    },
    desktop: {
      title: 'Desktop Ã–zel Teklif',
      description: 'GeniÅŸ ekranda daha iyi deneyim iÃ§in premium Ã¼yelik avantajlarÄ±.',
      ctaText: 'DetaylarÄ± GÃ¶r',
      advertiserName: 'Desktop Sponsor',
      icon: 'ğŸ’»'
    },
    generic: {
      title: 'SpotItForMe Premium',
      description: 'Spot\'larÄ±nÄ±zÄ± Ã¶ne Ã§Ä±karÄ±n, daha hÄ±zlÄ± bulun. Premium Ã¼yelik avantajlarÄ±.',
      ctaText: 'Premium Ol',
      advertiserName: 'SpotItForMe',
      icon: 'â­'
    }
  };

  // Reklam verisini seÃ§
  const getAdData = () => {
    if (title || description || ctaText || advertiserName) {
      return {
        title: title || defaultAds.generic.title,
        description: description || defaultAds.generic.description,
        ctaText: ctaText || defaultAds.generic.ctaText,
        advertiserName: advertiserName || defaultAds.generic.advertiserName,
        icon: defaultAds.generic.icon
      };
    }
    
    return isMobile ? defaultAds.mobile : defaultAds.desktop;
  };

  const adData = getAdData();

  if (!mounted) {
    return (
      <div className={`bg-gray-100 animate-pulse rounded-xl ${className}`}>
        <div className={`p-${isMobile ? '4' : '6'}`}>
          <div className={`h-4 bg-gray-200 rounded ${isMobile ? 'w-1/2' : 'w-1/3'} mb-4`}></div>
          <div className={`h-${isMobile ? '16' : '20'} bg-gray-200 rounded mb-4`}></div>
          <div className={`h-8 bg-gray-200 rounded ${isMobile ? 'w-full' : 'w-1/2'}`}></div>
        </div>
      </div>
    );
  }

  return (
    <div 
      className={`relative z-0 ${className}`}
      onMouseEnter={() => setHover(true)}
      onMouseLeave={() => setHover(false)}
    >
      <div className={`
        ${isMobile ? 'p-4' : 'p-6'}
        ${hover 
          ? 'bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-300 shadow-md' 
          : 'bg-gradient-to-br from-white to-gray-50 border-gray-200'
        }
        border ${isMobile ? 'rounded-lg' : 'rounded-xl'}
        shadow-sm
        transition-all duration-300
        overflow-hidden
        relative
      `}>
        
        {/* Sponsor badge - sol Ã¼st */}
        <div className="absolute top-3 left-3">
          <div className={`
            ${isMobile ? 'text-[10px] px-2 py-1' : 'text-xs px-3 py-1.5'} 
            ${hover ? 'bg-blue-600 text-white' : 'bg-blue-100 text-blue-700'}
            font-semibold rounded-full
            flex items-center
            transition-colors duration-300
          `}>
            <Star size={isMobile ? 10 : 12} className="mr-1" />
            SPONSOR
          </div>
        </div>

        {/* Platform icon - saÄŸ Ã¼st */}
        <div className="absolute top-3 right-3">
          <div className={`
            ${isMobile ? 'w-8 h-8' : 'w-10 h-10'}
            ${hover ? 'bg-blue-100' : 'bg-gray-100'}
            rounded-full flex items-center justify-center
            transition-colors duration-300
          `}>
            {isMobile ? (
              <Smartphone size={isMobile ? 14 : 16} className={hover ? 'text-blue-600' : 'text-gray-600'} />
            ) : (
              <Monitor size={isMobile ? 14 : 16} className={hover ? 'text-blue-600' : 'text-gray-600'} />
            )}
          </div>
        </div>

        {/* Ana iÃ§erik */}
        <div className={isMobile ? 'pt-10' : 'pt-12'}>
          
          {/* BaÅŸlÄ±k */}
          <h3 className={`
            font-bold text-gray-900 
            ${isMobile ? 'text-base mb-2' : 'text-lg mb-3'}
            ${hover ? 'text-blue-800' : ''}
            transition-colors duration-300
          `}>
            {adData.title}
          </h3>

          {/* AÃ§Ä±klama */}
          <p className={`
            text-gray-600 
            ${isMobile ? 'text-sm mb-3' : 'text-base mb-4'}
            ${hover ? 'text-gray-700' : ''}
            transition-colors duration-300
          `}>
            {adData.description}
          </p>

          {/* Reklamveren bilgisi */}
          <div className="flex items-center mb-4">
            <div className={`
              ${isMobile ? 'w-8 h-8' : 'w-10 h-10'}
              ${hover ? 'bg-blue-100' : 'bg-gray-100'}
              rounded-full flex items-center justify-center mr-3
              transition-colors duration-300
            `}>
              <span className={`${isMobile ? 'text-lg' : 'text-xl'}`}>
                {adData.icon}
              </span>
            </div>
            <div>
              <p className={`
                font-medium 
                ${isMobile ? 'text-sm' : 'text-base'}
                ${hover ? 'text-blue-700' : 'text-gray-700'}
                transition-colors duration-300
              `}>
                {adData.advertiserName}
              </p>
              <p className={`${isMobile ? 'text-xs' : 'text-sm'} text-gray-500`}>
                {isMobile ? 'Mobil Sponsor' : 'Desktop Sponsor'}
              </p>
            </div>
          </div>

          {/* CTA Butonu */}
          <a
            href="#"
            onClick={(e) => {
              e.preventDefault();
              console.log('Native ad clicked:', adData.title);
              // Buraya tÄ±klama takibi eklenebilir
            }}
            className={`
              block w-full 
              ${hover 
                ? 'bg-gradient-to-r from-blue-600 to-indigo-600 text-white' 
                : 'bg-gradient-to-r from-blue-500 to-blue-600 text-white'
              }
              text-center font-semibold 
              ${isMobile ? 'py-2.5 px-4 text-sm' : 'py-3 px-6 text-base'}
              rounded-lg
              transition-all duration-300
              transform ${hover ? 'scale-[1.02]' : 'scale-100'}
              shadow-sm ${hover ? 'shadow-md' : ''}
              flex items-center justify-center
            `}
          >
            <span>{adData.ctaText}</span>
            <ExternalLink size={isMobile ? 14 : 16} className="ml-2" />
          </a>

          {/* Ä°statistikler (sadece desktop) */}
          {!isMobile && (
            <div className="mt-4 pt-4 border-t border-gray-100">
              <div className="flex justify-between text-xs text-gray-500">
                <div className="text-center">
                  <div className="font-semibold text-gray-700">1.2K</div>
                  <div>GÃ¶sterim</div>
                </div>
                <div className="text-center">
                  <div className="font-semibold text-gray-700">48</div>
                  <div>TÄ±klama</div>
                </div>
                <div className="text-center">
                  <div className="font-semibold text-gray-700">4%</div>
                  <div>CTR</div>
                </div>
              </div>
            </div>
          )}

          {/* KÃ¼Ã§Ã¼k disclaimer */}
          <div className={`mt-${isMobile ? '3' : '4'} pt-${isMobile ? '3' : '4'} border-t border-gray-100`}>
            <p className={`
              text-gray-400 text-center 
              ${isMobile ? 'text-[10px]' : 'text-xs'}
              ${hover ? 'text-gray-500' : ''}
              transition-colors duration-300
            `}>
              Bu bir reklamdÄ±r. TÄ±klamalar dÄ±ÅŸ sitelere yÃ¶nlendirebilir.
            </p>
          </div>
        </div>

        {/* Dekoratif elementler */}
        <div className="absolute top-0 right-0 w-20 h-20 -mt-10 -mr-10 bg-blue-100 rounded-full opacity-20"></div>
        <div className="absolute bottom-0 left-0 w-16 h-16 -mb-8 -ml-8 bg-indigo-100 rounded-full opacity-20"></div>
      </div>
    </div>
  );
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ components\SimpleShareButtons.tsx
ğŸ“Š 85 satÄ±r | 2958 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/SimpleShareButtons.tsx
'use client'

import { useState } from 'react'

export default function SimpleShareButtons({ 
  url, 
  title 
}: { 
  url: string 
  title: string 
}) {
  const [copied, setCopied] = useState(false)
  const currentUrl = typeof window !== 'undefined' ? window.location.origin + url : url

  const shareLinks = {
    facebook: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(currentUrl)}`,
    whatsapp: `https://api.whatsapp.com/send?text=${encodeURIComponent(title + ' ' + currentUrl)}`,
    twitter: `https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(currentUrl)}`
  }

  const copyToClipboard = async () => {
    try {
      await navigator.clipboard.writeText(currentUrl)
      setCopied(true)
      setTimeout(() => setCopied(false), 2000)
    } catch (err) {
      console.error('Kopyalama hatasÄ±:', err)
    }
  }

  return (
    <div className="bg-white rounded-xl shadow-lg p-6">
      <h3 className="text-lg font-bold text-gray-900 mb-4">PaylaÅŸ</h3>
      
      <div className="grid grid-cols-3 gap-3 mb-6">
        <a
          href={shareLinks.facebook}
          target="_blank"
          rel="noopener noreferrer"
          className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg flex items-center justify-center"
        >
          <span className="mr-2">ğŸ“˜</span>
          <span className="hidden sm:inline">Facebook</span>
        </a>
        
        <a
          href={shareLinks.whatsapp}
          target="_blank"
          rel="noopener noreferrer"
          className="bg-green-500 hover:bg-green-600 text-white font-medium py-3 rounded-lg flex items-center justify-center"
        >
          <span className="mr-2">ğŸ’š</span>
          <span className="hidden sm:inline">WhatsApp</span>
        </a>
        
        <button
          onClick={copyToClipboard}
          className="bg-gray-800 hover:bg-gray-900 text-white font-medium py-3 rounded-lg flex items-center justify-center"
        >
          <span className="mr-2">{copied ? 'âœ…' : 'ğŸ“‹'}</span>
          <span className="hidden sm:inline">{copied ? 'Kopya' : 'Kopya'}</span>
        </button>
      </div>
      
      <div>
        <p className="text-sm text-gray-600 mb-2">Link:</p>
        <div className="relative">
          <input
            type="text"
            value={currentUrl}
            readOnly
            className="w-full px-4 py-3 pr-24 bg-gray-50 border border-gray-300 rounded-lg text-sm"
          />
          <button
            onClick={copyToClipboard}
            className="absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded"
          >
            {copied ? 'KopyalandÄ±!' : 'Kopyala'}
          </button>
        </div>
      </div>
    </div>
  )
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ components\SpotCard.tsx
ğŸ“Š 250 satÄ±r | 8460 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

import Link from 'next/link'

interface SpotCardProps {
  spot: {
    id: string
    title: string
    description: string
    category: string | null
    location: string | null
    image_url: string | null
    status: string
    created_at: string
    views: number
    helps: number
    user?: {
      name: string | null
    }
  }
}

export default function SpotCard({ spot }: SpotCardProps) {
  // ZAMAN FORMATI
  const getTimeAgo = (dateString: string) => {
    try {
      const date = new Date(dateString)
      const now = new Date()
      const diffMs = now.getTime() - date.getTime()
      const diffMins = Math.floor(diffMs / 60000)
      const diffHours = Math.floor(diffMs / 3600000)
      const diffDays = Math.floor(diffMs / 86400000)

      if (diffMins < 1) return 'ÅŸimdi'
      if (diffMins < 60) return `${diffMins} dakika Ã¶nce`
      if (diffHours < 24) return `${diffHours} saat Ã¶nce`
      if (diffDays < 7) return `${diffDays} gÃ¼n Ã¶nce`
      return date.toLocaleDateString('tr-TR')
    } catch {
      return 'tarih belirsiz'
    }
  }

  // RESÄ°M URL'SÄ°NÄ° HAZIRLA
  const getImageUrl = (): string | null => {
    if (!spot.image_url) return null
    
    let url = spot.image_url
    
    // 1. NULL veya boÅŸ mu?
    if (!url || url.trim() === '') return null
    
    // 2. String mi?
    if (typeof url !== 'string') {
      console.error('image_url string deÄŸil:', typeof url, url)
      return null
    }
    
    // 3. Trim yap
    url = url.trim()
    
    // 4. TÄ±rnak iÅŸaretlerini temizle
    url = url.replace(/["']/g, '')
    
    // 5. BaÅŸÄ±na https:// ekle (gerekirse)
    if (url.startsWith('//')) {
      url = 'https:' + url
    }
    
    // 6. http:// ile baÅŸlÄ±yorsa https:// yap
    if (url.startsWith('http://')) {
      url = url.replace('http://', 'https://')
    }
    
    // 7. Supabase URL kontrolÃ¼
    if (url.includes('supabase.co')) {
      // /object/public/ kontrolÃ¼
      if (url.includes('/storage/v1/object/') && !url.includes('/public/')) {
        url = url.replace('/object/', '/object/public/')
      }
    }
    
    // 8. GeÃ§erli URL mi?
    try {
      new URL(url)
      return url
    } catch {
      console.error('GeÃ§ersiz URL:', url)
      return null
    }
  }

  const imageUrl = getImageUrl()
  const hasImage = !!imageUrl

  // KATEGORÄ° RENGÄ°
  const getCategoryColor = (category: string | null) => {
    if (!category) return 'bg-gray-100 text-gray-800'
    
    const colors: Record<string, string> = {
      'Elektronik': 'bg-blue-100 text-blue-800',
      'FotoÄŸraf Makineleri': 'bg-blue-100 text-blue-800',
      'Giyim & Aksesuar': 'bg-green-100 text-green-800',
      'Ev & BahÃ§e': 'bg-yellow-100 text-yellow-800',
      'Ev EÅŸyalarÄ±': 'bg-yellow-100 text-yellow-800',
      'Koleksiyon': 'bg-purple-100 text-purple-800',
      'Kitap & MÃ¼zik': 'bg-red-100 text-red-800',
      'Oyunlar': 'bg-indigo-100 text-indigo-800',
      'Spor & Outdoor': 'bg-pink-100 text-pink-800',
      'AraÃ§ & ParÃ§a': 'bg-gray-100 text-gray-800',
      'DiÄŸer': 'bg-gray-100 text-gray-800'
    }
    
    return colors[category] || 'bg-gray-100 text-gray-800'
  }

  return (
    <div className="bg-white rounded-xl shadow-md hover:shadow-lg transition duration-300 overflow-hidden border border-gray-100">
      {/* RESÄ°M BÃ–LÃœMÃœ - KESÄ°N Ã‡ALIÅACAK */}
      <div className="h-48 bg-gray-100 relative">
        {hasImage ? (
          <>
            {/* RESÄ°M */}
            <img
              src={imageUrl}
              alt={spot.title}
              className="w-full h-full object-cover"
              onLoad={() => console.log(`âœ… Resim yÃ¼klendi: ${spot.id}`)}
              onError={(e) => {
                console.error(`âŒ Resim yÃ¼klenemedi: ${imageUrl}`)
                const img = e.target as HTMLImageElement
                img.style.display = 'none'
                
                // FALLBACK gÃ¶ster
                const fallback = document.createElement('div')
                fallback.className = 'absolute inset-0 flex items-center justify-center bg-gray-200'
                fallback.innerHTML = `
                  <div class="text-center">
                    <span class="text-3xl block mb-2">ğŸ“·</span>
                    <p class="text-sm text-gray-600">Resim yÃ¼klenemedi</p>
                  </div>
                `
                img.parentNode?.appendChild(fallback)
              }}
            />
            
            {/* Yedek gÃ¶rÃ¼nÃ¼m (resim yÃ¼klenene kadar) */}
            <div className="absolute inset-0 flex items-center justify-center bg-gray-100" style={{ display: 'none' }}>
              <div className="text-center">
                <span className="text-3xl block mb-2">ğŸ“·</span>
                <p className="text-sm text-gray-600">Resim yÃ¼kleniyor...</p>
              </div>
            </div>
          </>
        ) : (
          // RESÄ°M YOKSA
          <div className="w-full h-full flex items-center justify-center bg-gray-50">
            <div className="text-center">
              <span className="text-4xl block mb-3 text-gray-400">ğŸ“·</span>
              <p className="text-sm text-gray-500">Resim Yok</p>
            </div>
          </div>
        )}
        
        {/* DURUM BADGE */}
        <div className="absolute top-3 right-3">
          <span className={`px-3 py-1 rounded-full text-xs font-medium ${
            spot.status === 'active' 
              ? 'bg-green-100 text-green-800 border border-green-200' 
              : 'bg-blue-100 text-blue-800 border border-blue-200'
          }`}>
            {spot.status === 'active' ? 'Aktif' : 'Bulundu'}
          </span>
        </div>
      </div>

      {/* Ä°Ã‡ERÄ°K BÃ–LÃœMÃœ */}
      <div className="p-5">
        {/* KULLANICI */}
        <div className="flex items-center mb-4">
          <div className="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">
            {spot.user?.name?.[0]?.toUpperCase() || 'K'}
          </div>
          <div className="ml-3">
            <p className="font-medium text-sm">
              {spot.user?.name || 'KullanÄ±cÄ±'}
            </p>
            <p className="text-xs text-gray-500">
              {getTimeAgo(spot.created_at)}
            </p>
          </div>
        </div>

        {/* BAÅLIK */}
        <Link href={`/spots/${spot.id}`}>
          <h3 className="font-bold text-lg mb-2 hover:text-blue-600 line-clamp-1">
            {spot.title}
          </h3>
        </Link>
        
        {/* AÃ‡IKLAMA */}
        <p className="text-gray-600 text-sm mb-4 line-clamp-2">
          {spot.description}
        </p>

        {/* KATEGORÄ° & KONUM */}
        <div className="flex flex-wrap gap-2 mb-4">
          {spot.category && (
            <span className={`text-xs font-medium px-3 py-1 rounded-full ${getCategoryColor(spot.category)}`}>
              {spot.category}
            </span>
          )}
          
          {spot.location && (
            <span className="text-sm text-gray-500 flex items-center">
              <span className="mr-1">ğŸ“</span>
              {spot.location}
            </span>
          )}
        </div>

        {/* Ä°STATÄ°STÄ°KLER */}
        <div className="flex items-center justify-between text-sm text-gray-500 border-t border-gray-100 pt-4">
          <div className="flex items-center space-x-4">
            <span className="flex items-center">
              ğŸ‘ï¸ {spot.views || 0}
            </span>
            <span className="flex items-center">
              ğŸ¤ {spot.helps || 0}
            </span>
          </div>
          
          <Link 
            href={`/spots/${spot.id}`}
            className="text-blue-600 hover:text-blue-800 font-medium"
          >
            Detay â†’
          </Link>
        </div>

        {/* DEBUG: RESÄ°M BÄ°LGÄ°SÄ° */}
        {hasImage && process.env.NODE_ENV === 'development' && (
          <div className="mt-3 pt-3 border-t border-dashed border-gray-200">
            <p className="text-xs text-gray-400 truncate" title={imageUrl}>
              ğŸ”— {imageUrl.substring(0, 40)}...
            </p>
          </div>
        )}
      </div>
    </div>
  )
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ components\UserMenu.tsx
ğŸ“Š 147 satÄ±r | 4470 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

'use client'

import { useEffect, useState } from 'react'
import { supabase } from '@/lib/supabase'
import AuthModal from './AuthModal'

interface User {
  id: string
  email: string
  name?: string
}

export default function UserMenu() {
  const [user, setUser] = useState<User | null>(null)
  const [showAuthModal, setShowAuthModal] = useState(false)
  const [showDropdown, setShowDropdown] = useState(false)

  useEffect(() => {
    // Mevcut kullanÄ±cÄ±yÄ± kontrol et
    checkUser()
    
    // Auth state deÄŸiÅŸikliklerini dinle
    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
      if (session?.user) {
        setUser({
          id: session.user.id,
          email: session.user.email!,
          name: session.user.user_metadata?.name,
        })
      } else {
        setUser(null)
      }
    })

    return () => subscription.unsubscribe()
  }, [])

  const checkUser = async () => {
    const { data: { user } } = await supabase.auth.getUser()
    if (user) {
      setUser({
        id: user.id,
        email: user.email!,
        name: user.user_metadata?.name,
      })
    }
  }

  const handleLogout = async () => {
    await supabase.auth.signOut()
    setUser(null)
    setShowDropdown(false)
  }

  if (!user) {
    return (
      <>
        <button
          onClick={() => setShowAuthModal(true)}
          className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition duration-200"
        >
          GiriÅŸ Yap / KayÄ±t Ol
        </button>
        
        <AuthModal
          isOpen={showAuthModal}
          onClose={() => setShowAuthModal(false)}
        />
      </>
    )
  }

  return (
    <div className="relative">
      <button
        onClick={() => setShowDropdown(!showDropdown)}
        className="flex items-center space-x-3 bg-gray-100 hover:bg-gray-200 rounded-full pl-3 pr-4 py-2 transition duration-200"
      >
        <div className="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">
          {user.name?.[0]?.toUpperCase() || user.email[0].toUpperCase()}
        </div>
        <div className="text-left hidden md:block">
          <p className="font-medium text-sm">{user.name || 'KullanÄ±cÄ±'}</p>
          <p className="text-xs text-gray-500 truncate max-w-[120px]">{user.email}</p>
        </div>
      </button>

      {showDropdown && (
        <div className="absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border z-50">
          <div className="p-4 border-b">
            <p className="font-medium">{user.name || 'KullanÄ±cÄ±'}</p>
            <p className="text-sm text-gray-500 truncate">{user.email}</p>
          </div>
          
          <div className="p-2">
            <a
              href="/profile"
              className="flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 rounded-lg"
            >
              <span>ğŸ‘¤</span>
              <span>Profilim</span>
            </a>
            <a
              href="/my-spots"
              className="flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 rounded-lg"
            >
              <span>ğŸ“</span>
              <span>Spot'larÄ±m</span>
            </a>
            <a
              href="/help-given"
              className="flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 rounded-lg"
            >
              <span>ğŸ¤</span>
              <span>YardÄ±mlarÄ±m</span>
            </a>
            <a
              href="/settings"
              className="flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 rounded-lg"
            >
              <span>âš™ï¸</span>
              <span>Ayarlar</span>
            </a>
          </div>
          
          <div className="border-t p-2">
            <button
              onClick={handleLogout}
              className="flex items-center space-x-3 px-4 py-3 text-red-600 hover:bg-red-50 w-full rounded-lg"
            >
              <span>ğŸšª</span>
              <span>Ã‡Ä±kÄ±ÅŸ Yap</span>
            </button>
          </div>
        </div>
      )}

      {/* Dropdown dÄ±ÅŸÄ±na tÄ±klayÄ±nca kapat */}
      {showDropdown && (
        <div
          className="fixed inset-0 z-40"
          onClick={() => setShowDropdown(false)}
        />
      )}
    </div>
  )
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ lib\email-server.ts
ğŸ“Š 332 satÄ±r | 18127 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/email-server.ts
'use server'

import nodemailer from 'nodemailer'

// Email transporter oluÅŸtur
const transporter = nodemailer.createTransport({
  service: 'gmail',
  auth: {
    user: process.env.GMAIL_USER,
    pass: process.env.GMAIL_APP_PASS
  }
})

// Server Action: HoÅŸgeldin emaili gÃ¶nder
export async function sendWelcomeEmail(to: string, name: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe" <${process.env.GMAIL_USER}>`,
      to,
      subject: `ğŸ‰ SpotItForMe TopluluÄŸuna HoÅŸ Geldin ${name}!`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ¤ HoÅŸ Geldiniz!</h1>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba <strong>${name}</strong>,</p>
            <p>SpotItForMe topluluÄŸuna katÄ±ldÄ±ÄŸÄ±nÄ±z iÃ§in Ã§ok mutluyuz! ğŸ‰</p>
            
            <div style="background: #faf5ff; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸš€ Hemen BaÅŸlayÄ±n:</strong></p>
              <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 15px;">
                <a href="${siteUrl}/create-spot" style="background: #8b5cf6; color: white; padding: 12px; text-align: center; border-radius: 8px; text-decoration: none; font-weight: bold;">
                  Ä°lk Spot'unu OluÅŸtur
                </a>
                <a href="${siteUrl}/spots" style="background: #f1f5f9; color: #475569; padding: 12px; text-align: center; border-radius: 8px; text-decoration: none;">
                  Spot'larÄ± KeÅŸfet
                </a>
                <a href="${siteUrl}/how-it-works" style="background: #f1f5f9; color: #475569; padding: 12px; text-align: center; border-radius: 8px; text-decoration: none;">
                  NasÄ±l Ã‡alÄ±ÅŸÄ±r?
                </a>
              </div>
            </div>

            <p><strong>âœ¨ Platform Ã–zellikleri:</strong></p>
            <ul style="padding-left: 20px;">
              <li>âœ… Ãœcretsiz spot oluÅŸturma</li>
              <li>âœ… Binlerce aktif topluluk Ã¼yesi</li>
              <li>âœ… AnlÄ±k yardÄ±m bildirimleri</li>
              <li>âœ… Mobil uyumlu tasarÄ±m</li>
              <li>âœ… GÃ¼venli ve gizli</li>
            </ul>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              SorularÄ±nÄ±z iÃ§in: <a href="mailto:${process.env.GMAIL_USER}" style="color: #6b7280;">${process.env.GMAIL_USER}</a><br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a>
            </p>
          </div>
        </div>
      `,
      text: `SpotItForMe'ye HoÅŸ Geldiniz!\n\nMerhaba ${name},\n\nSpotItForMe topluluÄŸuna katÄ±ldÄ±ÄŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz.\n\nHemen baÅŸlayÄ±n: ${siteUrl}/create-spot\n\nÄ°yi kullanÄ±mlar!`
    })

    console.log('âœ… HoÅŸgeldin emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ HoÅŸgeldin emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}

// Server Action: MaÄŸaza kayÄ±t emaili gÃ¶nder
export async function sendBusinessRegistrationEmail(to: string, shopName: string, ownerId: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForme Ä°ÅŸletme" <${process.env.GMAIL_USER}>`,
      to,
      cc: process.env.ADMIN_EMAIL,
      subject: `ğŸª MaÄŸaza KaydÄ±nÄ±z AlÄ±ndÄ±: ${shopName}`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸª MaÄŸaza KaydÄ±nÄ±z AlÄ±ndÄ±!</h1>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p><strong>${shopName}</strong> maÄŸazanÄ±z iÃ§in kaydÄ±nÄ±z baÅŸarÄ±yla alÄ±ndÄ±! ğŸ‰</p>
            
            <div style="background: #f0fdf4; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #10b981;">
              <p><strong>ğŸ¯ Sonraki AdÄ±mlar:</strong></p>
              <ol style="margin-left: 20px;">
                <li>MaÄŸaza profilinizi tamamlayÄ±n</li>
                <li>Ä°lk Ã¼rÃ¼nlerinizi ekleyin</li>
                <li>Spot'lara cevap verin</li>
                <li>Premium paketlere geÃ§erek limitlerinizi artÄ±rÄ±n</li>
              </ol>
            </div>

            <div style="text-align: center; margin: 30px 0;">
              <a href="${siteUrl}/shop/dashboard" style="background: #10b981; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold; margin: 5px;">
                MaÄŸaza Paneline Git
              </a>
              <a href="${siteUrl}/create-spot" style="background: #3b82f6; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold; margin: 5px;">
                Ä°lk Spot'u OluÅŸtur
              </a>
            </div>

            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸ“Š MaÄŸaza Ä°statistikleriniz:</strong></p>
              <p>âœ… <strong>Paket:</strong> Ãœcretsiz BaÅŸlangÄ±Ã§</p>
              <p>âœ… <strong>Resim Limiti:</strong> 20 adet Ã¼cretsiz</p>
              <p>âœ… <strong>Spot Limiti:</strong> SÄ±nÄ±rsÄ±z</p>
              <p>âœ… <strong>Destek:</strong> Email ile 7/24</p>
            </div>

            <p><strong>ğŸ“ Ä°letiÅŸim:</strong></p>
            <p>Herhangi bir sorunuz iÃ§in: <a href="mailto:${process.env.GMAIL_USER}" style="color: #3b82f6;">${process.env.GMAIL_USER}</a></p>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              SpotItForme Ä°ÅŸletme Ekibi<br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a>
            </p>
          </div>
        </div>
      `,
      text: `MaÄŸaza KaydÄ±\n\n${shopName} maÄŸazanÄ±z iÃ§in kaydÄ±nÄ±z alÄ±ndÄ±.\n\nMaÄŸaza Paneliniz: ${siteUrl}/shop/dashboard\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… MaÄŸaza kayÄ±t emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ MaÄŸaza kayÄ±t emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}
// Server Action: Åifre sÄ±fÄ±rlama emaili gÃ¶nder
export async function sendPasswordResetEmail(to: string, resetLink: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe Åifre SÄ±fÄ±rlama" <${process.env.GMAIL_USER}>`,
      to,
      subject: 'ğŸ” SpotItForMe Åifre SÄ±fÄ±rlama Ä°steÄŸi',
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ” Åifre SÄ±fÄ±rlama</h1>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p>SpotItForMe hesabÄ±nÄ±z iÃ§in ÅŸifre sÄ±fÄ±rlama talebinde bulundunuz.</p>
            
            <div style="background: #fef2f2; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ef4444;">
              <p><strong>âš ï¸ GÃ¼venlik UyarÄ±sÄ±:</strong></p>
              <p>Bu isteÄŸi siz yapmadÄ±ysanÄ±z, bu email'i gÃ¶rmezden gelebilirsiniz.</p>
              <p>HesabÄ±nÄ±zla ilgili endiÅŸeleriniz varsa lÃ¼tfen bizimle iletiÅŸime geÃ§in.</p>
            </div>

            <div style="text-align: center; margin: 30px 0;">
              <a href="${resetLink}" style="background: #ef4444; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold;">
                Åifremi SÄ±fÄ±rla
              </a>
            </div>

            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸ”’ GÃ¼venlik Ä°puÃ§larÄ±:</strong></p>
              <ul style="margin-left: 20px; color: #4b5563;">
                <li>Åifrenizi kimseyle paylaÅŸmayÄ±n</li>
                <li>Link'e tÄ±kladÄ±ktan sonra yeni bir ÅŸifre belirleyin</li>
                <li>GÃ¼Ã§lÃ¼ bir ÅŸifre kullanÄ±n (harf, rakam, Ã¶zel karakter)</li>
                <li>Bu link 24 saat sonra geÃ§ersiz olacaktÄ±r</li>
              </ul>
            </div>

            <p><strong>ğŸ“ Link Ã§alÄ±ÅŸmÄ±yor mu?</strong></p>
            <p>EÄŸer buton Ã§alÄ±ÅŸmÄ±yorsa, aÅŸaÄŸÄ±daki linki tarayÄ±cÄ±nÄ±za kopyalayÄ±p yapÄ±ÅŸtÄ±rÄ±n:</p>
            <p style="word-break: break-all; background: #f3f4f6; padding: 10px; border-radius: 5px; font-size: 12px;">
              ${resetLink}
            </p>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              Bu email SpotItForMe platformundan otomatik olarak gÃ¶nderilmiÅŸtir.<br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a> | 
              <a href="mailto:${process.env.GMAIL_USER}" style="color: #6b7280;">YardÄ±m</a>
            </p>
          </div>
        </div>
      `,
      text: `SpotItForMe Åifre SÄ±fÄ±rlama\n\nÅifrenizi sÄ±fÄ±rlamak iÃ§in bu linke tÄ±klayÄ±n: ${resetLink}\n\nBu link 24 saat geÃ§erlidir.\n\nEÄŸer bu isteÄŸi siz yapmadÄ±ysanÄ±z, bu email'i gÃ¶rmezden gelebilirsiniz.\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… Åifre sÄ±fÄ±rlama emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Åifre sÄ±fÄ±rlama emaili gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ Åifre sÄ±fÄ±rlama emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Åifre sÄ±fÄ±rlama emaili gÃ¶nderilemedi' }
  }
}
// Server Action: Spot oluÅŸturma emaili
export async function sendSpotCreatedEmail(to: string, spotTitle: string, spotId: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe" <${process.env.GMAIL_USER}>`,
      to,
      subject: `ğŸ‰ Spot OluÅŸturuldu: ${spotTitle}`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ‰ Spot'unuz OluÅŸturuldu!</h1>
          </div>
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p><strong>"${spotTitle}"</strong> baÅŸlÄ±klÄ± spot'unuz baÅŸarÄ±yla oluÅŸturuldu.</p>
            
            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #3b82f6;">
              <p><strong>Spot DetaylarÄ±:</strong></p>
              <p>ğŸ“Œ <strong>BaÅŸlÄ±k:</strong> ${spotTitle}</p>
              <p>ğŸ”— <strong>Spot Linki:</strong> <a href="${siteUrl}/spots/${spotId}" style="color: #3b82f6;">${siteUrl}/spots/${spotId}</a></p>
              <p>â° <strong>Tarih:</strong> ${new Date().toLocaleDateString('tr-TR')}</p>
            </div>

            <p>Spot'unuz ÅŸu anda topluluÄŸumuzun yardÄ±mÄ±na sunuldu. Binlerce kullanÄ±cÄ± ÅŸehirlerinde gezerken sizin iÃ§in gÃ¶z kulak olacak.</p>
            
            <div style="text-align: center; margin: 30px 0;">
              <a href="${siteUrl}/spots/${spotId}" style="background: #3b82f6; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold;">
                Spot'u GÃ¶rÃ¼ntÃ¼le
              </a>
            </div>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              Bu e-posta SpotItForMe platformundan otomatik olarak gÃ¶nderilmiÅŸtir.<br/>
              <a href="${siteUrl}/unsubscribe" style="color: #6b7280;">Bildirimleri devre dÄ±ÅŸÄ± bÄ±rak</a>
            </p>
          </div>
        </div>
      `,
      text: `SpotItForMe - Spot OluÅŸturuldu\n\n"${spotTitle}" baÅŸlÄ±klÄ± spot'unuz baÅŸarÄ±yla oluÅŸturuldu.\n\nSpot Linki: ${siteUrl}/spots/${spotId}\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… Spot oluÅŸturma emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ Email gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}

// Server Action: YardÄ±m bildirimi emaili
export async function sendSightingNotificationEmail(
  to: string, 
  spotTitle: string, 
  spotterName: string,
  spotId: string
): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe" <${process.env.GMAIL_USER}>`,
      to,
      subject: `ğŸ¯ YENÄ° YARDIM: "${spotTitle}" iÃ§in bildirim!`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ¯ YENÄ° YARDIM BÄ°LDÄ°RÄ°MÄ°!</h1>
            <p style="color: white; opacity: 0.9; margin-top: 10px;">Birisi aradÄ±ÄŸÄ±nÄ±z Ã¼rÃ¼nÃ¼ gÃ¶rdÃ¼!</p>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p><strong>${spotterName}</strong> adlÄ± kullanÄ±cÄ±, <strong>"${spotTitle}"</strong> spot'unuz iÃ§in yardÄ±m bildirimi gÃ¶nderdi! ğŸ‰</p>
            
            <div style="background: #fffbeb; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #f59e0b;">
              <p><strong>ğŸ‰ MÃ¼jdeli Haber!</strong></p>
              <p>Bir topluluk Ã¼yemiz aradÄ±ÄŸÄ±nÄ±z Ã¼rÃ¼nÃ¼ gÃ¶rdÃ¼ÄŸÃ¼nÃ¼ bildirdi.</p>
              <p>Hemen spot sayfasÄ±na giderek detaylarÄ± gÃ¶rÃ¼ntÃ¼leyin!</p>
            </div>

            <div style="text-align: center; margin: 30px 0;">
              <a href="${siteUrl}/spots/${spotId}" style="background: #f59e0b; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold;">
                YardÄ±m DetaylarÄ±nÄ± GÃ¶rÃ¼ntÃ¼le
              </a>
            </div>

            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸ“‹ Sonraki AdÄ±mlar:</strong></p>
              <ol style="margin-left: 20px;">
                <li>YardÄ±m detaylarÄ±nÄ± inceleyin</li>
                <li>Gerekirse spotter ile iletiÅŸime geÃ§in</li>
                <li>ÃœrÃ¼nÃ¼ bulduysanÄ±z spot durumunu "Bulundu" olarak gÃ¼ncelleyin</li>
                <li>YardÄ±m eden kullanÄ±cÄ±ya teÅŸekkÃ¼r edin</li>
              </ol>
            </div>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              TopluluÄŸumuzun yardÄ±mÄ±yla kayÄ±p Ã¼rÃ¼nlerinizi bulmanÄ±zÄ± umuyoruz!<br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a>
            </p>
          </div>
        </div>
      `,
      text: `Yeni YardÄ±m Bildirimi!\n\n${spotterName}, "${spotTitle}" spot'unuz iÃ§in yardÄ±m bildirimi gÃ¶nderdi.\n\nDetaylar iÃ§in: ${siteUrl}/spots/${spotId}\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… YardÄ±m bildirimi emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ YardÄ±m bildirimi emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ lib\supabase.ts
ğŸ“Š 13 satÄ±r | 364 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/supabase.ts - GÃ¼ncellenmiÅŸ versiyon
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!
const supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!

export const supabase = createClient(supabaseUrl, supabaseKey, {
  realtime: {
    params: {
      eventsPerSecond: 10
    }
  }
})

================================================================================
ğŸ“Š Ã–ZET
================================================================================
Toplam Dosya: 11
Toplam SatÄ±r: 2902
Toplam Boyut: 118379 bytes

ğŸ“‹ DOSYA LÄ°STESÄ°:
  1. app\products\[id]\page.tsx (656 satÄ±r)
  2. app\profile\page.tsx (529 satÄ±r)
  3. components\AuthModal.tsx (374 satÄ±r)
  4. components\Footer.tsx (179 satÄ±r)
  5. components\Header.tsx (78 satÄ±r)
  6. components\NativeAd.tsx (259 satÄ±r)
  7. components\SimpleShareButtons.tsx (85 satÄ±r)
  8. components\SpotCard.tsx (250 satÄ±r)
  9. components\UserMenu.tsx (147 satÄ±r)
 10. lib\email-server.ts (332 satÄ±r)
 11. lib\supabase.ts (13 satÄ±r)
================================================================================