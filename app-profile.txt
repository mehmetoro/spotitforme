====================================================================================================
ğŸ“¦ SPOTITFORME - TÃœM ADMIN PANELÄ° VE ALT SAYFALAR
====================================================================================================

ğŸ¯ BaÅŸlangÄ±Ã§: app/profile/page.tsx
ğŸ“… Tarih: 15.02.2026 01:47:49
ğŸ“Š Toplam: 17 dosya
ğŸŒ Bulunan Sayfalar: 0

====================================================================================================
ğŸ—ºï¸  SAYFA HARÄ°TASI
====================================================================================================

â€¢ /admin/ads
â€¢ /admin/ads/create-manual
â€¢ /admin/adsense
â€¢ /admin/test
â€¢ /admin/users
â€¢ /profile
â€¢ /profile/[id]

====================================================================================================
ğŸ“± APP SAYFALARI (page.tsx)
====================================================================================================

ğŸ“„ app/admin/ads/create-manual/page.tsx
ğŸ“Š 137 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/admin/ads/create-manual/page.tsx
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';

export default function CreateManualAdPage() {
  const router = useRouter();
  const [formData, setFormData] = useState({
    name: '',
    ad_type: 'manual',
    position: 'sidebar',
    size: '300x250',
    custom_html: '',
    advertiser_name: '',
    advertiser_url: '',
    advertiser_email: '',
    start_date: '',
    end_date: '',
    daily_budget: '',
    total_budget: '',
    status: 'draft'
  });

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    // Supabase'e kaydet
    router.push('/admin/ads');
  };

  return (
    <div className="p-6">
      <h1 className="text-2xl font-bold mb-6">Yeni Manuel Reklam Ekle</h1>
      
      <form onSubmit={handleSubmit} className="space-y-6 max-w-2xl">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium mb-1">Reklam AdÄ± *</label>
            <input
              type="text"
              required
              className="w-full p-2 border rounded"
              value={formData.name}
              onChange={(e) => setFormData({...formData, name: e.target.value})}
            />
          </div>
          
          <div>
            <label className="block text-sm font-medium mb-1">Pozisyon *</label>
            <select
              className="w-full p-2 border rounded"
              value={formData.position}
              onChange={(e) => setFormData({...formData, position: e.target.value})}
            >
              <option value="header">Ana Sayfa Ãœst (728x90)</option>
              <option value="sidebar">SaÄŸ Sidebar (300x250)</option>
              <option value="inline">Ä°Ã§erik ArasÄ± (728x90)</option>
              <option value="mobile">Mobil Banner (320x50)</option>
              <option value="popup">Popup (400x300)</option>
            </select>
          </div>
        </div>

        <div>
          <label className="block text-sm font-medium mb-1">Reklamveren Bilgileri</label>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
            <input
              type="text"
              placeholder="Åirket AdÄ±"
              className="p-2 border rounded"
              value={formData.advertiser_name}
              onChange={(e) => setFormData({...formData, advertiser_name: e.target.value})}
            />
            <input
              type="url"
              placeholder="Website URL"
              className="p-2 border rounded"
              value={formData.advertiser_url}
              onChange={(e) => setFormData({...formData, advertiser_url: e.target.value})}
            />
          </div>
        </div>

        <div>
          <label className="block text-sm font-medium mb-1">Reklam HTML Kodu</label>
          <textarea
            rows={8}
            className="w-full p-2 border rounded font-mono text-sm"
            placeholder='<a href="https://example.com"><img src="https://example.com/banner.jpg" alt="Reklam" /></a>'
            value={formData.custom_html}
            onChange={(e) => setFormData({...formData, custom_html: e.target.value})}
          />
          <p className="text-sm text-gray-500 mt-1">
            HTML5 banner kodu veya basit HTML. Boyutlara dikkat edin.
          </p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium mb-1">BaÅŸlangÄ±Ã§ Tarihi</label>
            <input
              type="date"
              className="w-full p-2 border rounded"
              value={formData.start_date}
              onChange={(e) => setFormData({...formData, start_date: e.target.value})}
            />
          </div>
          <div>
            <label className="block text-sm font-medium mb-1">BitiÅŸ Tarihi</label>
            <input
              type="date"
              className="w-full p-2 border rounded"
              value={formData.end_date}
              onChange={(e) => setFormData({...formData, end_date: e.target.value})}
            />
          </div>
        </div>

        <div className="flex justify-end space-x-4">
          <button
            type="button"
            onClick={() => router.back()}
            className="px-4 py-2 border rounded-lg hover:bg-gray-100"
          >
            Ä°ptal
          </button>
          <button
            type="submit"
            className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
          >
            ReklamÄ± Kaydet
          </button>
        </div>
      </form>
    </div>
  );
}

ğŸ“„ app/admin/ads/page.tsx
ğŸ“Š 156 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/admin/ads/page.tsx - Reklam Ana SayfasÄ±
'use client';

import { useState } from 'react';
import Link from 'next/link';

export default function AdminAdsPage() {
  const [activeTab, setActiveTab] = useState('overview');

  return (
    <div className="p-6">
      <h1 className="text-2xl font-bold mb-6">Reklam YÃ¶netimi</h1>
      
      <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
        <div className="bg-white p-4 rounded-lg shadow">
          <h3 className="font-semibold">Toplam Gelir</h3>
          <p className="text-2xl font-bold text-green-600">â‚º0.00</p>
        </div>
        <div className="bg-white p-4 rounded-lg shadow">
          <h3 className="font-semibold">Aktif Reklamlar</h3>
          <p className="text-2xl font-bold text-blue-600">0</p>
        </div>
        <div className="bg-white p-4 rounded-lg shadow">
          <h3 className="font-semibold">BugÃ¼nkÃ¼ GÃ¶sterim</h3>
          <p className="text-2xl font-bold text-purple-600">0</p>
        </div>
        <div className="bg-white p-4 rounded-lg shadow">
          <h3 className="font-semibold">BugÃ¼nkÃ¼ TÄ±klama</h3>
          <p className="text-2xl font-bold text-orange-600">0</p>
        </div>
      </div>

      <div className="flex space-x-4 mb-6">
        <button
          className={`px-4 py-2 rounded-lg ${activeTab === 'overview' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}
          onClick={() => setActiveTab('overview')}
        >
          Genel BakÄ±ÅŸ
        </button>
        <button
          className={`px-4 py-2 rounded-lg ${activeTab === 'adsense' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}
          onClick={() => setActiveTab('adsense')}
        >
          AdSense YÃ¶netimi
        </button>
        <button
          className={`px-4 py-2 rounded-lg ${activeTab === 'manual' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}
          onClick={() => setActiveTab('manual')}
        >
          Manuel Reklamlar
        </button>
        <button
          className={`px-4 py-2 rounded-lg ${activeTab === 'advertisers' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}
          onClick={() => setActiveTab('advertisers')}
        >
          Reklamverenler
        </button>
      </div>

      {activeTab === 'overview' && (
        <div className="bg-white p-6 rounded-lg shadow">
          <h2 className="text-xl font-bold mb-4">HÄ±zlÄ± Eylemler</h2>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <Link href="/admin/ads/adsense-setup" className="bg-blue-50 p-4 rounded-lg border border-blue-200 hover:bg-blue-100 transition">
              <h3 className="font-semibold">AdSense Kurulum</h3>
              <p className="text-sm text-gray-600">Google AdSense entegrasyonu</p>
            </Link>
            <Link href="/admin/ads/create-manual" className="bg-green-50 p-4 rounded-lg border border-green-200 hover:bg-green-100 transition">
              <h3 className="font-semibold">Manuel Reklam Ekle</h3>
              <p className="text-sm text-gray-600">Kendi reklamÄ±nÄ±zÄ± ekleyin</p>
            </Link>
            <Link href="/admin/ads/placements" className="bg-purple-50 p-4 rounded-lg border border-purple-200 hover:bg-purple-100 transition">
              <h3 className="font-semibold">Reklam YerleÅŸimleri</h3>
              <p className="text-sm text-gray-600">Reklam pozisyonlarÄ±nÄ± yÃ¶netin</p>
            </Link>
            <Link href="/admin/ads/reports" className="bg-orange-50 p-4 rounded-lg border border-orange-200 hover:bg-orange-100 transition">
              <h3 className="font-semibold">Raporlar</h3>
              <p className="text-sm text-gray-600">Performans raporlarÄ±</p>
            </Link>
          </div>
        </div>
      )}

      {activeTab === 'adsense' && (
        <div className="bg-white p-6 rounded-lg shadow">
          <h2 className="text-xl font-bold mb-4">AdSense YÃ¶netimi</h2>
          <div className="space-y-4">
            <div className="p-4 border rounded-lg">
              <h3 className="font-semibold">AdSense Durumu</h3>
              <div className="flex items-center space-x-2 mt-2">
                <div className="w-3 h-3 rounded-full bg-red-500"></div>
                <span>AdSense aktif deÄŸil</span>
              </div>
            </div>
            
            <div className="p-4 border rounded-lg">
              <h3 className="font-semibold mb-2">AdSense Kurulumu</h3>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium mb-1">AdSense Client ID</label>
                  <input
                    type="text"
                    placeholder="ca-pub-xxxxxxxxxxxxxxxx"
                    className="w-full p-2 border rounded"
                  />
                  <p className="text-sm text-gray-500 mt-1">Google AdSense panelinden alÄ±nan client ID</p>
                </div>
                <button className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                  AdSense'i Aktif Et
                </button>
              </div>
            </div>
          </div>
        </div>
      )}

      {activeTab === 'manual' && (
        <div className="bg-white p-6 rounded-lg shadow">
          <h2 className="text-xl font-bold mb-4">Manuel Reklam YÃ¶netimi</h2>
          <div className="space-y-4">
            <div className="flex justify-between items-center">
              <h3 className="font-semibold">Mevcut Reklamlar</h3>
              <Link href="/admin/ads/create-manual" className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                Yeni Reklam Ekle
              </Link>
            </div>
            
            {/* Reklam listesi buraya gelecek */}
            <div className="text-center py-8 text-gray-500">
              HenÃ¼z manuel reklam eklenmemiÅŸ
            </div>
          </div>
        </div>
      )}

      {activeTab === 'advertisers' && (
        <div className="bg-white p-6 rounded-lg shadow">
          <h2 className="text-xl font-bold mb-4">Reklamveren YÃ¶netimi</h2>
          <div className="space-y-4">
            <div className="flex justify-between items-center">
              <h3 className="font-semibold">Reklamverenler</h3>
              <button className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                Yeni Reklamveren Ekle
              </button>
            </div>
            
            {/* Reklamveren listesi buraya gelecek */}
            <div className="text-center py-8 text-gray-500">
              HenÃ¼z reklamveren eklenmemiÅŸ
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

ğŸ“„ app/admin/adsense/page.tsx
ğŸ“Š 609 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/admin/adsense/page.tsx - DÃœZELTMÄ°Å VERSÄ°YON
'use client'

import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'
import AdUnitManager from '@/components/admin/AdUnitManager'
import AdPerformance from '@/components/admin/AdPerformance'
import Link from 'next/link'

// AdUnit tipi
interface AdUnit {
  id: string
  name: string
  type: 'display' | 'in-article' | 'in-feed'
  size: string
  position: string
  status: 'active' | 'paused'
  revenue: number
}

// AdSense Config tipi
interface AdSenseConfig {
  clientId: string
  isActive: boolean
  autoAds: boolean
  adUnits: AdUnit[]
  lastSync?: string
}

export default function AdSensePage() {
  const [config, setConfig] = useState<AdSenseConfig>({
    clientId: process.env.NEXT_PUBLIC_ADSENSE_CLIENT_ID || '',
    isActive: false,
    autoAds: true,
    adUnits: [
      {
        id: 'ad-header-001',
        name: 'Header Banner',
        type: 'display',
        size: '728x90',
        position: 'header',
        status: 'active',
        revenue: 45.50
      },
      {
        id: 'ad-sidebar-001',
        name: 'Sidebar Rectangle',
        type: 'display',
        size: '300x250',
        position: 'sidebar',
        status: 'active',
        revenue: 32.75
      },
      {
        id: 'ad-article-001',
        name: 'Article Inline',
        type: 'in-article',
        size: '336x280',
        position: 'content-middle',
        status: 'paused',
        revenue: 18.20
      }
    ]
  })
  
  const [loading, setLoading] = useState(true)
  const [saving, setSaving] = useState(false)
  // DÃœZELTME: 'code' tab'Ä±nÄ± da ekle
  const [activeTab, setActiveTab] = useState<'settings' | 'units' | 'performance' | 'code'>('settings')

  useEffect(() => {
    fetchAdSenseConfig()
  }, [])

  const fetchAdSenseConfig = async () => {
    try {
      setLoading(true)
      
      // Database'den config'i Ã§ek
      const { data } = await supabase
        .from('site_settings')
        .select('*')
        .eq('key', 'adsense_config')
        .single()

      if (data && data.value) {
        const savedConfig = JSON.parse(data.value)
        setConfig(prev => ({
          ...prev,
          ...savedConfig,
          // Database'de yoksa varsayÄ±lan deÄŸerleri koru
          clientId: savedConfig.clientId || prev.clientId,
          isActive: savedConfig.isActive !== undefined ? savedConfig.isActive : prev.isActive,
          autoAds: savedConfig.autoAds !== undefined ? savedConfig.autoAds : prev.autoAds,
          adUnits: savedConfig.adUnits || prev.adUnits,
          lastSync: savedConfig.lastSync
        }))
      }
    } catch (error) {
      console.error('AdSense config yÃ¼klenemedi:', error)
      // Hata durumunda varsayÄ±lan config ile devam et
    } finally {
      setLoading(false)
    }
  }

  const saveConfig = async () => {
    setSaving(true)
    try {
      const configToSave = {
        ...config,
        lastSync: new Date().toISOString()
      }

      const { error } = await supabase
        .from('site_settings')
        .upsert({
          key: 'adsense_config',
          value: JSON.stringify(configToSave),
          updated_at: new Date().toISOString()
        }, {
          onConflict: 'key'
        })

      if (error) throw error

      // Admin log'a kaydet
      await supabase
        .from('admin_logs')
        .insert({
          action: 'adsense_config_updated',
          details: { 
            config: configToSave,
            timestamp: new Date().toISOString()
          }
        })

      alert('âœ… AdSense ayarlarÄ± baÅŸarÄ±yla kaydedildi!')
      
    } catch (error) {
      console.error('AdSense config kaydedilemedi:', error)
      alert('âŒ KayÄ±t sÄ±rasÄ±nda hata oluÅŸtu. LÃ¼tfen tekrar deneyin.')
    } finally {
      setSaving(false)
    }
  }

  const handleAdUnitsUpdate = (updatedUnits: AdUnit[]) => {
    setConfig(prev => ({
      ...prev,
      adUnits: updatedUnits
    }))
  }

  const generateAdCode = (type: 'header' | 'auto' | 'unit') => {
    switch (type) {
      case 'header':
        return `<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${config.clientId}"></script>`
      
      case 'auto':
        return `<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "${config.clientId}",
    enable_page_level_ads: true,
    overlays: {bottom: true}
  });
</script>`
      
      case 'unit':
        return `<ins class="adsbygoogle"
  style="display:block"
  data-ad-client="${config.clientId}"
  data-ad-slot="1234567890"
  data-ad-format="auto"
  data-full-width-responsive="true"></ins>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({});
</script>`
      
      default:
        return ''
    }
  }

  const copyToClipboard = (text: string) => {
    navigator.clipboard.writeText(text)
    alert('KopyalandÄ±!')
  }

  const testAdSense = async () => {
    if (!config.clientId) {
      alert('Ã–nce AdSense Client ID girin')
      return
    }

    try {
      const response = await fetch('/api/adsense/test', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ clientId: config.clientId })
      })

      const data = await response.json()
      
      if (data.success) {
        alert('âœ… AdSense baÄŸlantÄ±sÄ± baÅŸarÄ±lÄ±!')
      } else {
        alert('âŒ AdSense baÄŸlantÄ±sÄ± baÅŸarÄ±sÄ±z: ' + data.message)
      }
    } catch (error) {
      alert('âŒ Test sÄ±rasÄ±nda hata oluÅŸtu')
    }
  }

  if (loading) {
    return (
      <div className="min-h-screen bg-gray-50 flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto"></div>
          <p className="mt-4 text-gray-600">AdSense ayarlarÄ± yÃ¼kleniyor...</p>
        </div>
      </div>
    )
  }

  return (
    <div className="space-y-6">
      {/* BaÅŸlÄ±k ve Navigasyon */}
      <div className="flex flex-col md:flex-row md:items-center justify-between">
        <div>
          <h1 className="text-2xl font-bold text-gray-900">Google AdSense YÃ¶netimi</h1>
          <p className="text-gray-600">Reklam ayarlarÄ±nÄ±zÄ± buradan yÃ¶netin ve takip edin</p>
        </div>
        
        <div className="flex space-x-3 mt-4 md:mt-0">
          <button
            onClick={testAdSense}
            className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium"
          >
            ğŸ”— BaÄŸlantÄ±yÄ± Test Et
          </button>
          <Link
            href="https://adsense.google.com"
            target="_blank"
            className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium flex items-center"
          >
            ğŸŒ AdSense'e Git
          </Link>
        </div>
      </div>

      {/* Durum GÃ¶stergesi */}
      <div className={`p-4 rounded-lg ${config.isActive ? 'bg-green-50 border border-green-200' : 'bg-yellow-50 border border-yellow-200'}`}>
        <div className="flex items-center justify-between">
          <div className="flex items-center space-x-3">
            <div className={`w-3 h-3 rounded-full ${config.isActive ? 'bg-green-500' : 'bg-yellow-500'}`} />
            <div>
              <p className="font-medium">
                AdSense {config.isActive ? 'Aktif' : 'Devre DÄ±ÅŸÄ±'}
              </p>
              <p className="text-sm text-gray-600">
                {config.isActive 
                  ? 'Reklamlar sitenizde gÃ¶steriliyor' 
                  : 'Reklamlar ÅŸu anda gÃ¶sterilmiyor'}
              </p>
            </div>
          </div>
          <button
            onClick={() => setConfig({...config, isActive: !config.isActive})}
            className={`px-4 py-2 rounded-lg font-medium ${
              config.isActive
                ? 'bg-red-100 hover:bg-red-200 text-red-700'
                : 'bg-green-100 hover:bg-green-200 text-green-700'
            }`}
          >
            {config.isActive ? 'ReklamlarÄ± Durdur' : 'ReklamlarÄ± BaÅŸlat'}
          </button>
        </div>
      </div>

      {/* Tab Navigation */}
      <div className="bg-white rounded-xl shadow">
        <div className="border-b">
          <nav className="flex -mb-px">
            {[
              { id: 'settings' as const, name: 'Temel Ayarlar', icon: 'âš™ï¸' },
              { id: 'units' as const, name: 'Reklam Ãœniteleri', icon: 'ğŸ“º' },
              { id: 'performance' as const, name: 'Performans', icon: 'ğŸ“Š' },
              { id: 'code' as const, name: 'Kodlar', icon: 'ğŸ’»' }
            ].map((tab) => (
              <button
                key={tab.id}
                onClick={() => setActiveTab(tab.id)}
                className={`flex-1 py-4 text-center font-medium border-b-2 ${
                  activeTab === tab.id
                    ? 'border-blue-600 text-blue-600'
                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                }`}
              >
                <span className="mr-2">{tab.icon}</span>
                {tab.name}
              </button>
            ))}
          </nav>
        </div>

        {/* Tab Content */}
        <div className="p-6">
          {/* AYARLAR TAB */}
          {activeTab === 'settings' && (
            <div className="space-y-6">
              <div>
                <h2 className="text-lg font-bold text-gray-900 mb-4">AdSense Kimlik Bilgileri</h2>
                
                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      AdSense Client ID *
                    </label>
                    <input
                      type="text"
                      value={config.clientId}
                      onChange={(e) => setConfig({...config, clientId: e.target.value})}
                      placeholder="ca-pub-xxxxxxxxxxxxxxxx"
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    />
                    <p className="text-sm text-gray-500 mt-1">
                      Google AdSense hesabÄ±nÄ±zdaki Publisher ID
                    </p>
                  </div>

                  <div className="grid md:grid-cols-2 gap-6">
                    <div className="space-y-4">
                      <h3 className="font-medium text-gray-900">Reklam AyarlarÄ±</h3>
                      
                      <div className="flex items-center space-x-3">
                        <input
                          type="checkbox"
                          checked={config.autoAds}
                          onChange={(e) => setConfig({...config, autoAds: e.target.checked})}
                          className="w-4 h-4 text-blue-600"
                          id="autoAds"
                        />
                        <label htmlFor="autoAds" className="text-sm font-medium text-gray-700">
                          Otomatik Reklamlar
                        </label>
                        <span className="text-xs text-gray-500">
                          (Google en iyi yerlere reklam yerleÅŸtirir)
                        </span>
                      </div>

                      <div className="flex items-center space-x-3">
                        <input
                          type="checkbox"
                          checked={config.isActive}
                          onChange={(e) => setConfig({...config, isActive: e.target.checked})}
                          className="w-4 h-4 text-blue-600"
                          id="isActive"
                        />
                        <label htmlFor="isActive" className="text-sm font-medium text-gray-700">
                          ReklamlarÄ± Aktif Et
                        </label>
                      </div>
                    </div>

                    <div className="space-y-4">
                      <h3 className="font-medium text-gray-900">GeliÅŸmiÅŸ Ayarlar</h3>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          GDPR UyumluluÄŸu
                        </label>
                        <select className="w-full px-4 py-2 border border-gray-300 rounded-lg">
                          <option>KullanÄ±cÄ± onayÄ± iste</option>
                          <option>Otomatik kabul et</option>
                          <option>Sadece AB dÄ±ÅŸÄ±</option>
                        </select>
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Reklam FrekansÄ±
                        </label>
                        <select className="w-full px-4 py-2 border border-gray-300 rounded-lg">
                          <option>Normal</option>
                          <option>DÃ¼ÅŸÃ¼k (daha az reklam)</option>
                          <option>YÃ¼ksek (maksimum gelir)</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              {/* Kaydet Butonu */}
              <div className="flex justify-end pt-6 border-t">
                <button
                  onClick={saveConfig}
                  disabled={saving || !config.clientId}
                  className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-8 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  {saving ? 'Kaydediliyor...' : 'AyarlarÄ± Kaydet'}
                </button>
              </div>
            </div>
          )}

          {/* REKLAM ÃœNÄ°TELERÄ° TAB */}
          {activeTab === 'units' && (
            <div>
              <div className="mb-6">
                <h2 className="text-lg font-bold text-gray-900 mb-2">Reklam Ãœnite YÃ¶netimi</h2>
                <p className="text-gray-600">
                  Reklam Ã¼nitelerinizi ekleyin, dÃ¼zenleyin ve yÃ¶netin
                </p>
              </div>
              
              <AdUnitManager 
                adUnits={config.adUnits}
                onUpdate={handleAdUnitsUpdate}
                clientId={config.clientId}
              />
              
              <div className="mt-6 bg-gray-50 p-4 rounded-lg">
                <h3 className="font-medium text-gray-900 mb-2">ğŸ’¡ Ä°puÃ§larÄ±</h3>
                <ul className="text-sm text-gray-600 space-y-1">
                  <li>â€¢ "Display" reklamlar genel amaÃ§lÄ±dÄ±r, her yerde kullanÄ±labilir</li>
                  <li>â€¢ "In-article" reklamlar makale iÃ§eriÄŸine gÃ¶re optimize edilir</li>
                  <li>â€¢ "In-feed" reklamlar haber akÄ±ÅŸÄ±na entegre olur</li>
                  <li>â€¢ 300x250 boyutu (Medium Rectangle) en yÃ¼ksek tÄ±klama oranÄ±na sahiptir</li>
                </ul>
              </div>
            </div>
          )}

          {/* PERFORMANS TAB */}
          {activeTab === 'performance' && (
            <div>
              <div className="mb-6">
                <h2 className="text-lg font-bold text-gray-900 mb-2">Reklam PerformansÄ±</h2>
                <p className="text-gray-600">
                  ReklamlarÄ±nÄ±zÄ±n performansÄ±nÄ± takip edin ve optimize edin
                </p>
              </div>
              
              <AdPerformance />
              
              <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                <div className="bg-white border border-gray-200 rounded-lg p-4">
                  <h3 className="font-medium text-gray-900 mb-2">ğŸ“ˆ Performans Ä°puÃ§larÄ±</h3>
                  <ul className="text-sm text-gray-600 space-y-2">
                    <li>â€¢ CTR %1'in altÄ±ndaysa reklam pozisyonunu deÄŸiÅŸtirin</li>
                    <li>â€¢ RPM â‚º5'in altÄ±ndaysa reklam formatÄ±nÄ± gÃ¶zden geÃ§irin</li>
                    <li>â€¢ Mobile trafik genellikle daha yÃ¼ksek tÄ±klama oranÄ±na sahiptir</li>
                  </ul>
                </div>
                
                <div className="bg-white border border-gray-200 rounded-lg p-4">
                  <h3 className="font-medium text-gray-900 mb-2">ğŸ¯ Optimizasyon</h3>
                  <ul className="text-sm text-gray-600 space-y-2">
                    <li>â€¢ En Ã§ok tÄ±klanan reklam boyutu: 300x250</li>
                    <li>â€¢ En yÃ¼ksek RPM: 970x250 (Leaderboard)</li>
                    <li>â€¢ En iyi pozisyon: Ä°Ã§erik sonu</li>
                  </ul>
                </div>
                
                <div className="bg-white border border-gray-200 rounded-lg p-4">
                  <h3 className="font-medium text-gray-900 mb-2">âš ï¸ Dikkat Edilecekler</h3>
                  <ul className="text-sm text-gray-600 space-y-2">
                    <li>â€¢ Sayfa baÅŸÄ±na 3'ten fazla reklam koymayÄ±n</li>
                    <li>â€¢ Pop-up reklamlar kullanÄ±cÄ± deneyimini bozar</li>
                    <li>â€¢ Reklam ile iÃ§erik oranÄ± %30'u geÃ§memeli</li>
                  </ul>
                </div>
              </div>
            </div>
          )}

          {/* KODLAR TAB - HATA DÃœZELTÄ°LDÄ° */}
          {activeTab === 'code' && (
            <div className="space-y-6">
              <div>
                <h2 className="text-lg font-bold text-gray-900 mb-4">AdSense KodlarÄ±</h2>
                <p className="text-gray-600 mb-6">
                  AÅŸaÄŸÄ±daki kodlarÄ± ilgili yerlere ekleyerek AdSense'i aktif edin
                </p>
              </div>

              {/* Head Script */}
              <div className="bg-gray-900 rounded-lg overflow-hidden">
                <div className="bg-gray-800 px-4 py-3 flex justify-between items-center">
                  <div>
                    <h3 className="font-medium text-white">Head Script</h3>
                    <p className="text-gray-400 text-sm">HTML &lt;head&gt; tag'i iÃ§ine ekleyin</p>
                  </div>
                  <button
                    onClick={() => copyToClipboard(generateAdCode('header'))}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm"
                  >
                    Kopyala
                  </button>
                </div>
                <pre className="p-4 text-gray-300 text-sm overflow-x-auto">
                  {generateAdCode('header')}
                </pre>
              </div>

              {/* Auto Ads Script */}
              <div className="bg-gray-900 rounded-lg overflow-hidden">
                <div className="bg-gray-800 px-4 py-3 flex justify-between items-center">
                  <div>
                    <h3 className="font-medium text-white">Auto Ads Script</h3>
                    <p className="text-gray-400 text-sm">&lt;body&gt; tag'inin hemen altÄ±na ekleyin</p>
                  </div>
                  <button
                    onClick={() => copyToClipboard(generateAdCode('auto'))}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm"
                  >
                    Kopyala
                  </button>
                </div>
                <pre className="p-4 text-gray-300 text-sm overflow-x-auto">
                  {generateAdCode('auto')}
                </pre>
              </div>

              {/* Manual Ad Unit */}
              <div className="bg-gray-900 rounded-lg overflow-hidden">
                <div className="bg-gray-800 px-4 py-3 flex justify-between items-center">
                  <div>
                    <h3 className="font-medium text-white">Manual Ad Unit</h3>
                    <p className="text-gray-400 text-sm">Ä°Ã§erik iÃ§inde kullanmak iÃ§in</p>
                  </div>
                  <button
                    onClick={() => copyToClipboard(generateAdCode('unit'))}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm"
                  >
                    Kopyala
                  </button>
                </div>
                <pre className="p-4 text-gray-300 text-sm overflow-x-auto">
                  {generateAdCode('unit')}
                </pre>
              </div>

              {/* Kurulum TalimatlarÄ± */}
              <div className="bg-blue-50 border border-blue-200 rounded-lg p-6">
                <h3 className="font-bold text-blue-900 mb-3">ğŸ“‹ Kurulum TalimatlarÄ±</h3>
                <ol className="space-y-3 text-blue-800">
                  <li className="flex items-start">
                    <span className="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 flex-shrink-0">1</span>
                    <span>YukarÄ±daki "Head Script" kodunu <code className="bg-white px-2 py-1 rounded">app/layout.tsx</code> dosyasÄ±ndaki &lt;head&gt; iÃ§ine ekleyin</span>
                  </li>
                  <li className="flex items-start">
                    <span className="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 flex-shrink-0">2</span>
                    <span>"Auto Ads Script" kodunu &lt;body&gt; tag'inin hemen altÄ±na ekleyin</span>
                  </li>
                  <li className="flex items-start">
                    <span className="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 flex-shrink-0">3</span>
                    <span>Manual ad unit kodunu istediÄŸiniz sayfalara ekleyin</span>
                  </li>
                  <li className="flex items-start">
                    <span className="bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 flex-shrink-0">4</span>
                    <span>Google AdSense'den siteyi doÄŸrulayÄ±n (24-48 saat sÃ¼rebilir)</span>
                  </li>
                </ol>
              </div>
            </div>
          )}
        </div>
      </div>

      {/* HÄ±zlÄ± Ä°statistikler */}
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div className="bg-white rounded-lg shadow p-4">
          <p className="text-sm text-gray-600">Aktif Reklam</p>
          <p className="text-2xl font-bold text-gray-900">
            {config.adUnits.filter(u => u.status === 'active').length}
          </p>
        </div>
        <div className="bg-white rounded-lg shadow p-4">
          <p className="text-sm text-gray-600">Toplam Gelir</p>
          <p className="text-2xl font-bold text-gray-900">
            {config.adUnits.reduce((sum, unit) => sum + unit.revenue, 0).toFixed(2)} â‚º
          </p>
        </div>
        <div className="bg-white rounded-lg shadow p-4">
          <p className="text-sm text-gray-600">Ort. RPM</p>
          <p className="text-2xl font-bold text-gray-900">
            {(config.adUnits.reduce((sum, unit) => sum + unit.revenue, 0) / config.adUnits.length || 0).toFixed(2)} â‚º
          </p>
        </div>
        <div className="bg-white rounded-lg shadow p-4">
          <p className="text-sm text-gray-600">Durum</p>
          <p className={`text-2xl font-bold ${config.isActive ? 'text-green-600' : 'text-red-600'}`}>
            {config.isActive ? 'Aktif' : 'Pasif'}
          </p>
        </div>
      </div>

      {/* Son GÃ¼ncelleme */}
      {config.lastSync && (
        <div className="text-center text-sm text-gray-500">
          Son gÃ¼ncelleme: {new Date(config.lastSync).toLocaleString('tr-TR')}
        </div>
      )}
    </div>
  )
}

ğŸ“„ app/admin/test/page.tsx
ğŸ“Š 880 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/admin/test/page.tsx (TAM DÃœZELTÄ°LMÄ°Å)
'use client'

import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'

interface TestResult {
  name: string
  status: 'success' | 'error' | 'warning' | 'pending'
  message: string
  details?: any
  duration?: number
}

interface EmailTestData {
  to: string
  template: string
  data: {
    name: string
    spotTitle: string
    spotId: string
    spotterName: string
  }
}

export default function SystemTestPage() {
  const [testResults, setTestResults] = useState<TestResult[]>([])
  const [runningTests, setRunningTests] = useState(false)
  const [user, setUser] = useState<any>(null)
  const [emailTestData, setEmailTestData] = useState<EmailTestData>({
    to: '',
    template: 'welcome',
    data: {
      name: 'Test User',
      spotTitle: 'Test Spot BaÅŸlÄ±ÄŸÄ±',
      spotId: 'test-' + Date.now(),
      spotterName: 'Test YardÄ±mcÄ±'
    }
  })

  // KullanÄ±cÄ± oturumunu kontrol et
  useEffect(() => {
    checkUserSession()
  }, [])

  const checkUserSession = async () => {
    const { data: { user } } = await supabase.auth.getUser()
    setUser(user)
    
    if (!user) {
      addTestResult({
        name: 'KullanÄ±cÄ± Oturumu',
        status: 'error',
        message: 'Oturum aÃ§Ä±lmamÄ±ÅŸ. LÃ¼tfen giriÅŸ yapÄ±n.'
      })
    }
  }

  const addTestResult = (result: TestResult) => {
    setTestResults(prev => [...prev, result])
  }

  // TÄ°P GÃœVENLÄ° TEST FONKSÄ°YONU
  const createTestResult = (
    status: TestResult['status'],
    message: string,
    details?: any,
    duration?: number
  ): Omit<TestResult, 'name'> => {
    return { status, message, details, duration }
  }

  // 1. TEMEL SÄ°STEM TESTLERÄ°
  const runBasicTests = async () => {
    const tests = [
      {
        name: 'Supabase BaÄŸlantÄ±sÄ±',
        test: async () => {
          const start = Date.now()
          try {
            const { data, error } = await supabase
              .from('spots')
              .select('count', { count: 'exact', head: true })
            
            const duration = Date.now() - start
            
            if (error) throw error
            
            return createTestResult(
              'success',
              `BaÄŸlantÄ± baÅŸarÄ±lÄ±. ${data} tablo var.`,
              null,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `BaÄŸlantÄ± hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'Database TablolarÄ±',
        test: async () => {
          const start = Date.now()
          const requiredTables = ['spots', 'sightings', 'user_profiles', 'shops']
          const results: any[] = []
          
          try {
            for (const table of requiredTables) {
              const { error } = await supabase
                .from(table)
                .select('*')
                .limit(1)
              
              results.push({
                table,
                exists: !error,
                error: error?.message
              })
            }
            
            const missingTables = results.filter(r => !r.exists)
            const duration = Date.now() - start
            
            if (missingTables.length > 0) {
              return createTestResult(
                'warning',
                `${missingTables.length} tablo eksik`,
                results,
                duration
              )
            }
            
            return createTestResult(
              'success',
              'TÃ¼m tablolar mevcut',
              results,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Tablo kontrol hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
        {
        name: 'Storage Bucket',
        test: async () => {
            const start = Date.now()
            try {
            // DIRECT TEST: Bucket'a dosya yÃ¼kle
            const testFile = new File(['test-content'], `test-${Date.now()}.txt`, {
                type: 'text/plain'
            })
            
            const { error: uploadError } = await supabase.storage
                .from('spot-images')
                .upload(`system-test/test-${Date.now()}.txt`, testFile)
            
            const duration = Date.now() - start
            
            if (uploadError) {
                // Upload baÅŸarÄ±sÄ±z - bucket yok veya izin yok
                return createTestResult(
                uploadError.message.includes('bucket') ? 'error' : 'warning',
                `Upload hatasÄ±: ${uploadError.message}`,
                uploadError,
                duration
                )
            }
            
            // Upload BAÅARILI - bucket Ã§alÄ±ÅŸÄ±yor!
            return createTestResult(
                'success',
                'Storage bucket Ã§alÄ±ÅŸÄ±yor! Dosya yÃ¼klendi.',
                { uploaded: true, timestamp: new Date().toISOString() },
                duration
            )
            
            } catch (error: any) {
            return createTestResult(
                'error',
                `Storage test hatasÄ±: ${error.message}`,
                error
            )
            }
        }
        },
      {
        name: 'Health Check API',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/health')
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok) {
              return createTestResult(
                'error',
                `API hatalÄ±: ${response.status}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              `API Ã§alÄ±ÅŸÄ±yor (${data.duration})`,
              data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `API hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      }
    ]

    for (const test of tests) {
      const result = await test.test()
      addTestResult({ 
        name: test.name, 
        ...result 
      })
      await new Promise(resolve => setTimeout(resolve, 500))
    }
  }

  // 2. EMAIL SÄ°STEM TESTLERÄ°
  const runEmailTests = async () => {
    const tests = [
      {
        name: 'Email API BaÄŸlantÄ±sÄ±',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/send-email', { method: 'GET' })
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok) {
              return createTestResult(
                'error',
                `Email API hatalÄ±: ${data.error || response.status}`,
                data,
                duration
              )
            }
            
            const status: TestResult['status'] = data.gmail_configured ? 'success' : 'warning'
            
            return createTestResult(
              status,
              data.gmail_configured 
                ? 'Email API hazÄ±r' 
                : 'Gmail konfigÃ¼rasyonu eksik',
              data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Email API hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'Test Email GÃ¶nderimi',
        test: async () => {
          if (!emailTestData.to) {
            return createTestResult(
              'warning',
              'Test email adresi gerekli',
              'LÃ¼tfen bir email adresi girin'
            )
          }

          const start = Date.now()
          try {
            const response = await fetch('/api/send-email', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                to: emailTestData.to,
                template: emailTestData.template,
                data: emailTestData.data,
                subject: `âœ… SpotItForMe Test Email - ${new Date().toLocaleString()}`,
                html: `
                  <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px; text-align: center; border-radius: 10px 10px 0 0;">
                      <h1 style="color: white; margin: 0;">âœ… TEST EMAIL</h1>
                      <p style="color: white; opacity: 0.9; margin-top: 10px;">SpotItForMe Email Sistemi Testi</p>
                    </div>
                    <div style="padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
                      <p>Merhaba <strong>${emailTestData.data.name}</strong>,</p>
                      <p>Bu email SpotItForMe sisteminin dÃ¼zgÃ¼n Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± test etmek iÃ§in gÃ¶nderilmiÅŸtir.</p>
                      
                      <div style="background: #f3f4f6; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <p><strong>Test DetaylarÄ±:</strong></p>
                        <p>ğŸ“§ Template: ${emailTestData.template}</p>
                        <p>â° GÃ¶nderim ZamanÄ±: ${new Date().toLocaleString('tr-TR')}</p>
                        <p>ğŸ†” Spot ID: ${emailTestData.data.spotId}</p>
                        <p>ğŸ‘¤ GÃ¶nderen: ${emailTestData.data.spotterName}</p>
                      </div>

                      <div style="text-align: center; margin: 30px 0;">
                        <div style="display: inline-block; background: #10b981; color: white; padding: 12px 30px; border-radius: 8px;">
                          âœ… EMAIL SÄ°STEMÄ° Ã‡ALIÅIYOR
                        </div>
                      </div>

                      <p>Bu email baÅŸarÄ±yla alÄ±ndÄ±ysa, SpotItForMe email sisteminiz dÃ¼zgÃ¼n Ã§alÄ±ÅŸÄ±yor demektir.</p>
                      
                      <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

                      <p style="font-size: 12px; color: #6b7280;">
                        Bu bir test emailidir. LÃ¼tfen cevaplamayÄ±n.
                      </p>
                    </div>
                  </div>
                `,
                text: `SpotItForMe Test Email - ${new Date().toLocaleString()}. Email sisteminiz Ã§alÄ±ÅŸÄ±yor!`
              })
            })

            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok) {
              return createTestResult(
                'error',
                `Email gÃ¶nderilemedi: ${data.error || response.status}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              `Email baÅŸarÄ±yla gÃ¶nderildi: ${data.messageId}`,
              data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Email gÃ¶nderme hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'CRON Job Testi',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/cron/process-emails')
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok) {
              const status: TestResult['status'] = data.error === 'Unauthorized' ? 'warning' : 'error'
              
              return createTestResult(
                status,
                data.error === 'Unauthorized' 
                  ? 'CRON secret gerekli (normal)' 
                  : `CRON hatasÄ±: ${data.error}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              `CRON Ã§alÄ±ÅŸÄ±yor: ${data.processed?.length || 0} email iÅŸlendi`,
              data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `CRON test hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'Environment Variables',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/env-check')
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok || !data.success) {
              return createTestResult(
                'error',
                `Environment hatasÄ±: ${data.message}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              'Environment variables mevcut',
              data.envVars,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Environment check hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      }
    ]

    for (const test of tests) {
      const result = await test.test()
      addTestResult({ 
        name: test.name, 
        ...result 
      })
      await new Promise(resolve => setTimeout(resolve, 1000))
    }
  }

  // 3. Ä°ÅLEVSEL TESTLER
  const runFunctionalTests = async () => {
    const tests = [
      {
        name: 'Spot API Testi',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/spots')
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok || data.status !== 'success') {
              return createTestResult(
                'error',
                `Spot API hatasÄ±: ${data.message}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              `Spot API Ã§alÄ±ÅŸÄ±yor: ${data.data?.spots?.length || 0} spot`,
              data.data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Spot API hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'KullanÄ±cÄ± API Testi',
        test: async () => {
          const start = Date.now()
          try {
            const response = await fetch('/api/users')
            const data = await response.json()
            const duration = Date.now() - start
            
            if (!response.ok || data.status !== 'success') {
              return createTestResult(
                'error',
                `User API hatasÄ±: ${data.message}`,
                data,
                duration
              )
            }
            
            return createTestResult(
              'success',
              `User API Ã§alÄ±ÅŸÄ±yor: ${data.data?.users?.length || 0} kullanÄ±cÄ±`,
              data.data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `User API hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      },
      {
        name: 'Spot OluÅŸturma Testi',
        test: async () => {
          if (!user) {
            return createTestResult(
              'warning',
              'Spot oluÅŸturmak iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z',
              'KullanÄ±cÄ± oturumu gerekiyor'
            )
          }

          const start = Date.now()
          try {
            const testSpot = {
              user_id: user.id,
              title: `[TEST] Sistem Test Spotu - ${Date.now()}`,
              description: 'Bu spot sistem testi iÃ§in oluÅŸturulmuÅŸtur.',
              category: 'DiÄŸer',
              location: 'Test Åehri',
              status: 'active',
              image_url: null
            }

            const { data, error } = await supabase
              .from('spots')
              .insert([testSpot])
              .select()
            
            const duration = Date.now() - start
            
            if (error) {
              return createTestResult(
                'error',
                `Spot oluÅŸturma hatasÄ±: ${error.message}`,
                error,
                duration
              )
            }
            
            if (data && data[0]) {
              setTimeout(async () => {
                await supabase.from('spots').delete().eq('id', data[0].id)
              }, 5000)
            }
            
            return createTestResult(
              'success',
              `Test spot'u oluÅŸturuldu: ${data?.[0]?.title}`,
              data,
              duration
            )
          } catch (error: any) {
            return createTestResult(
              'error',
              `Spot oluÅŸturma hatasÄ±: ${error.message}`,
              error
            )
          }
        }
      }
    ]

    for (const test of tests) {
      const result = await test.test()
      addTestResult({ 
        name: test.name, 
        ...result 
      })
      await new Promise(resolve => setTimeout(resolve, 500))
    }
  }

  // TÃœM TESTLERÄ° Ã‡ALIÅTIR
  const runAllTests = async () => {
    setTestResults([])
    setRunningTests(true)
    
    try {
      addTestResult({
        name: 'Test BaÅŸlatÄ±ldÄ±',
        status: 'pending',
        message: 'Sistem testleri baÅŸlatÄ±lÄ±yor...'
      })
      
      await runBasicTests()
      await runEmailTests()
      await runFunctionalTests()
      
      addTestResult({
        name: 'Testler TamamlandÄ±',
        status: 'success',
        message: 'TÃ¼m sistem testleri tamamlandÄ±.'
      })
      
    } catch (error: any) {
      addTestResult({
        name: 'Test HatasÄ±',
        status: 'error',
        message: `Test sÄ±rasÄ±nda hata: ${error.message}`
      })
    } finally {
      setRunningTests(false)
    }
  }

  // TEST SONUÃ‡LARINI ANALÄ°Z ET
  const getTestSummary = () => {
    const total = testResults.length
    const success = testResults.filter(r => r.status === 'success').length
    const error = testResults.filter(r => r.status === 'error').length
    const warning = testResults.filter(r => r.status === 'warning').length
    
    return { total, success, error, warning }
  }

  const summary = getTestSummary()

  // STATUS RENKLERÄ°
  const getStatusColor = (status: TestResult['status']) => {
    switch (status) {
      case 'success': return 'bg-green-100 text-green-800 border-green-200'
      case 'error': return 'bg-red-100 text-red-800 border-red-200'
      case 'warning': return 'bg-yellow-100 text-yellow-800 border-yellow-200'
      case 'pending': return 'bg-blue-100 text-blue-800 border-blue-200'
      default: return 'bg-gray-100 text-gray-800 border-gray-200'
    }
  }

  const getStatusIcon = (status: TestResult['status']) => {
    switch (status) {
      case 'success': return 'âœ…'
      case 'error': return 'âŒ'
      case 'warning': return 'âš ï¸'
      case 'pending': return 'â³'
      default: return 'â„¹ï¸'
    }
  }

  return (
    <div className="min-h-screen bg-gradient-to-b from-gray-50 to-white p-4 md:p-8">
      <div className="max-w-6xl mx-auto">
        {/* BAÅLIK */}
        <div className="mb-8 text-center">
          <h1 className="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
            ğŸ§ª SpotItForMe Sistem Test Merkezi
          </h1>
          <p className="text-gray-600">
            TÃ¼m sistem bileÅŸenlerini test edin, hatalarÄ± tespit edin.
          </p>
        </div>

        {/* DURUM Ã–ZETÄ° */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
          <div className="bg-white rounded-xl shadow p-6 text-center">
            <div className="text-2xl font-bold text-gray-900">{summary.total}</div>
            <div className="text-gray-600">Toplam Test</div>
          </div>
          <div className="bg-white rounded-xl shadow p-6 text-center">
            <div className="text-2xl font-bold text-green-600">{summary.success}</div>
            <div className="text-gray-600">BaÅŸarÄ±lÄ±</div>
          </div>
          <div className="bg-white rounded-xl shadow p-6 text-center">
            <div className="text-2xl font-bold text-red-600">{summary.error}</div>
            <div className="text-gray-600">HatalÄ±</div>
          </div>
          <div className="bg-white rounded-xl shadow p-6 text-center">
            <div className="text-2xl font-bold text-yellow-600">{summary.warning}</div>
            <div className="text-gray-600">UyarÄ±</div>
          </div>
        </div>

        {/* EMAIL TEST ALANI */}
        <div className="bg-white rounded-xl shadow-lg p-6 mb-8">
          <h2 className="text-xl font-bold text-gray-900 mb-4">ğŸ“§ Email Testi</h2>
          <div className="space-y-4">
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Test Email Adresi
              </label>
              <input
                type="email"
                value={emailTestData.to}
                onChange={(e) => setEmailTestData({...emailTestData, to: e.target.value})}
                placeholder="ornek@gmail.com"
                className="w-full md:w-96 px-4 py-2 border border-gray-300 rounded-lg"
              />
              <p className="text-sm text-gray-500 mt-1">
                Test email'ini bu adrese gÃ¶ndereceÄŸiz.
              </p>
            </div>
            
            <div className="flex flex-wrap gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Template
                </label>
                <select
                  value={emailTestData.template}
                  onChange={(e) => setEmailTestData({...emailTestData, template: e.target.value})}
                  className="px-4 py-2 border border-gray-300 rounded-lg"
                >
                  <option value="welcome">HoÅŸgeldin</option>
                  <option value="spot-created">Spot OluÅŸturuldu</option>
                  <option value="spot-sighting">YardÄ±m Bildirimi</option>
                  <option value="test">Test</option>
                </select>
              </div>
              
              <div className="flex items-end">
                <button
                  onClick={() => {
                    setTestResults([])
                    runEmailTests()
                  }}
                  disabled={runningTests || !emailTestData.to}
                  className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg disabled:opacity-50"
                >
                  Sadece Email Testi Ã‡alÄ±ÅŸtÄ±r
                </button>
              </div>
            </div>
          </div>
        </div>

        {/* TEST KONTROLLERÄ° */}
        <div className="bg-white rounded-xl shadow-lg p-6 mb-8">
          <h2 className="text-xl font-bold text-gray-900 mb-4">ğŸ”„ Test Kontrolleri</h2>
          <div className="flex flex-wrap gap-4">

            
            <button
              onClick={() => setTestResults([])}
              className="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 px-6 rounded-lg"
            >
              SonuÃ§larÄ± Temizle
            </button>
            
            <button
              onClick={() => window.location.reload()}
              className="bg-blue-100 hover:bg-blue-200 text-blue-600 font-medium py-3 px-6 rounded-lg"
            >
              SayfayÄ± Yenile
            </button>
          </div>
          
          {user && (
            <div className="mt-4 p-3 bg-gray-50 rounded-lg">
              <p className="text-sm">
                ğŸ‘¤ Oturum: <span className="font-medium">{user.email}</span>
                <span className="ml-4">ğŸ†” User ID: <code className="text-xs">{user.id.substring(0, 8)}...</code></span>
              </p>
            </div>
          )}
        </div>

        {/* TEST SONUÃ‡LARI */}
        <div className="bg-white rounded-xl shadow-lg p-6">
          <div className="flex justify-between items-center mb-6">
            <h2 className="text-xl font-bold text-gray-900">ğŸ“Š Test SonuÃ§larÄ±</h2>
            <span className="text-sm text-gray-500">
              {testResults.length} test sonucu
            </span>
          </div>
          
          {testResults.length === 0 ? (
            <div className="text-center py-12">
              <div className="text-4xl mb-4">ğŸ§ª</div>
              <h3 className="text-lg font-medium text-gray-900 mb-2">
                HenÃ¼z test Ã§alÄ±ÅŸtÄ±rÄ±lmadÄ±
              </h3>
              <p className="text-gray-600">
                YukarÄ±daki butonlarla testleri baÅŸlatÄ±n.
              </p>
            </div>
          ) : (
            <div className="space-y-4 max-h-[600px] overflow-y-auto pr-2">
              {testResults.map((result, index) => (
                <div
                  key={index}
                  className={`p-4 rounded-lg border ${getStatusColor(result.status)}`}
                >
                  <div className="flex items-start justify-between">
                    <div className="flex items-start space-x-3">
                      <span className="text-xl">{getStatusIcon(result.status)}</span>
                      <div>
                        <h4 className="font-bold">{result.name}</h4>
                        <p className="text-sm mt-1">{result.message}</p>
                        
                        {result.duration && (
                          <p className="text-xs text-gray-600 mt-1">
                            â±ï¸ {result.duration}ms
                          </p>
                        )}
                        
                        {result.details && (
                          <details className="mt-2">
                            <summary className="text-sm cursor-pointer text-gray-700">
                              DetaylarÄ± gÃ¶ster
                            </summary>
                            <pre className="mt-2 p-3 bg-black bg-opacity-5 rounded text-xs overflow-x-auto">
                              {JSON.stringify(result.details, null, 2)}
                            </pre>
                          </details>
                        )}
                      </div>
                    </div>
                    
                    <div className="flex items-center">
                      <span className={`px-2 py-1 rounded text-xs font-medium ${
                        result.status === 'success' ? 'bg-green-200 text-green-800' :
                        result.status === 'error' ? 'bg-red-200 text-red-800' :
                        result.status === 'warning' ? 'bg-yellow-200 text-yellow-800' :
                        'bg-blue-200 text-blue-800'
                      }`}>
                        {result.status.toUpperCase()}
                      </span>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>

        {/* HIZLI Ä°PUÃ‡LARI */}
        <div className="mt-8 grid md:grid-cols-3 gap-6">
          <div className="bg-blue-50 rounded-xl p-6">
            <div className="text-2xl mb-3">ğŸ”§</div>
            <h4 className="font-bold text-gray-900 mb-2">SÄ±k KarÅŸÄ±laÅŸÄ±lan Hatalar</h4>
            <ul className="text-sm text-gray-600 space-y-1">
              <li>â€¢ Gmail App Password eksik</li>
              <li>â€¢ Supabase RLS politikalarÄ±</li>
              <li>â€¢ Environment variables eksik</li>
              <li>â€¢ Storage bucket oluÅŸturulmamÄ±ÅŸ</li>
            </ul>
          </div>
          
          <div className="bg-green-50 rounded-xl p-6">
            <div className="text-2xl mb-3">âœ…</div>
            <h4 className="font-bold text-gray-900 mb-2">Test Edilen Sistemler</h4>
            <ul className="text-sm text-gray-600 space-y-1">
              <li>â€¢ Supabase Database & Auth</li>
              <li>â€¢ Gmail Email API</li>
              <li>â€¢ CRON Job System</li>
              <li>â€¢ Rate Limiting</li>
              <li>â€¢ Health Check Endpoints</li>
            </ul>
          </div>
          
          <div className="bg-purple-50 rounded-xl p-6">
            <div className="text-2xl mb-3">ğŸ“</div>
            <h4 className="font-bold text-gray-900 mb-2">Sonraki AdÄ±mlar</h4>
            <ul className="text-sm text-gray-600 space-y-1">
              <li>1. HatalarÄ± dÃ¼zelt</li>
              <li>2. Email sistemini test et</li>
              <li>3. Spot oluÅŸturmayÄ± test et</li>
              <li>4. TÃ¼m API'leri doÄŸrula</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  )
}

ğŸ“„ app/admin/users/page.tsx
ğŸ“Š 308 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/admin/users/page.tsx - DÃœZELTÄ°LMÄ°Å
'use client';

import { useState, useEffect } from 'react';
import { supabase } from '@/lib/supabase';

interface UserProfile {
  id: string;
  email: string;
  name: string | null;
  created_at: string;
  is_admin: boolean;
  total_spots: number;
  total_helps: number;
}

interface UserWithStats extends UserProfile {
  total_spots: number;
  total_helps: number;
}

interface SupabaseUserProfile {
  id: string;
  email: string;
  name: string | null;
  created_at: string;
  is_admin: boolean;
  avatar_url?: string;
}

export default function AdminUsersPage() {
  const [users, setUsers] = useState<UserWithStats[]>([]);
  const [loading, setLoading] = useState(true);
  const [search, setSearch] = useState('');
  const [page, setPage] = useState(1);
  const [totalCount, setTotalCount] = useState(0);

  useEffect(() => {
    fetchUsers();
  }, [page, search]);

  const fetchUsers = async () => {
    try {
      setLoading(true);
      
      // Arama sorgusu
      let query = supabase
        .from('user_profiles')
        .select('*', { count: 'exact' });

      if (search) {
        query = query.or(`email.ilike.%${search}%,name.ilike.%${search}%`);
      }

      // Pagination
      const { data, count, error } = await query
        .range((page - 1) * 20, page * 20 - 1)
        .order('created_at', { ascending: false });

      if (error) throw error;

      // KullanÄ±cÄ± istatistiklerini getir
      const usersWithStats = await Promise.all(
        (data || []).map(async (user: SupabaseUserProfile) => {
          const [spotsRes, sightingsRes] = await Promise.all([
            supabase.from('spots').select('id', { count: 'exact', head: true }).eq('user_id', user.id),
            supabase.from('sightings').select('id', { count: 'exact', head: true }).eq('spotter_id', user.id)
          ]);

          return {
            ...user,
            total_spots: spotsRes.count || 0,
            total_helps: sightingsRes.count || 0
          } as UserWithStats;
        })
      );

      setUsers(usersWithStats);
      setTotalCount(count || 0);
    } catch (error) {
      console.error('KullanÄ±cÄ±lar yÃ¼klenemedi:', error);
    } finally {
      setLoading(false);
    }
  };

  const toggleAdmin = async (userId: string, currentStatus: boolean) => {
    if (!confirm(`${currentStatus ? 'Admin yetkisini kaldÄ±rmak' : 'Admin yetkisi vermek'} istediÄŸinize emin misiniz?`)) {
      return;
    }

    try {
      const { error } = await supabase
        .from('user_profiles')
        .update({ is_admin: !currentStatus })
        .eq('id', userId);

      if (error) throw error;

      // Listeyi gÃ¼ncelle
      setUsers(users.map(user => 
        user.id === userId 
          ? { ...user, is_admin: !currentStatus }
          : user
      ));

      alert('KullanÄ±cÄ± yetkisi gÃ¼ncellendi!');
    } catch (error) {
      console.error('Yetki gÃ¼ncellenemedi:', error);
      alert('Yetki gÃ¼ncellenirken bir hata oluÅŸtu');
    }
  };

  const deleteUser = async (userId: string, email: string) => {
    if (!confirm(`${email} kullanÄ±cÄ±sÄ±nÄ± silmek istediÄŸinize emin misiniz? Bu iÅŸlem geri alÄ±namaz!`)) {
      return;
    }

    try {
      // Ã–nce iliÅŸkili verileri sil
      await supabase.from('spots').delete().eq('user_id', userId);
      await supabase.from('sightings').delete().eq('spotter_id', userId);
      await supabase.from('user_profiles').delete().eq('id', userId);

      // Auth kullanÄ±cÄ±sÄ±nÄ± sil (admin yetkisi gerektirir)
      const { error } = await supabase.auth.admin.deleteUser(userId);
      
      if (error) throw error;

      // Listeden kaldÄ±r
      setUsers(users.filter(user => user.id !== userId));
      
      alert('KullanÄ±cÄ± baÅŸarÄ±yla silindi!');
    } catch (error) {
      console.error('KullanÄ±cÄ± silinemedi:', error);
      alert('KullanÄ±cÄ± silinirken bir hata oluÅŸtu. Supabase dashboard Ã¼zerinden deneyin.');
    }
  };

  return (
    <div className="space-y-6">
      <div>
        <h1 className="text-2xl font-bold text-gray-900">KullanÄ±cÄ± YÃ¶netimi</h1>
        <p className="text-gray-600">TÃ¼m kullanÄ±cÄ±larÄ± gÃ¶rÃ¼ntÃ¼leyin ve yÃ¶netin</p>
      </div>

      {/* Arama ve Filtreler */}
      <div className="bg-white rounded-xl shadow p-6">
        <div className="flex flex-col md:flex-row gap-4 mb-6">
          <div className="flex-1">
            <input
              type="text"
              placeholder="Email veya isim ile ara..."
              value={search}
              onChange={(e) => setSearch(e.target.value)}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          <button
            onClick={fetchUsers}
            className="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium"
          >
            Ara
          </button>
        </div>

        {/* KullanÄ±cÄ± Listesi */}
        {loading ? (
          <div className="text-center py-8">
            <div className="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600 mx-auto"></div>
            <p className="mt-2 text-gray-600">KullanÄ±cÄ±lar yÃ¼kleniyor...</p>
          </div>
        ) : (
          <>
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead className="bg-gray-50">
                  <tr>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">KullanÄ±cÄ±</th>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">KayÄ±t Tarihi</th>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Spot'lar</th>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">YardÄ±m</th>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Yetki</th>
                    <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Ä°ÅŸlemler</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-gray-100">
                  {users.map((user: UserWithStats) => (
                    <tr key={user.id} className="hover:bg-gray-50">
                      <td className="py-3 px-4">
                        <div>
                          <p className="font-medium">{user.name || 'Ä°simsiz KullanÄ±cÄ±'}</p>
                          <p className="text-sm text-gray-500">{user.email}</p>
                        </div>
                      </td>
                      <td className="py-3 px-4 text-sm text-gray-600">
                        {new Date(user.created_at).toLocaleDateString('tr-TR')}
                      </td>
                      <td className="py-3 px-4">
                        <span className="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                          {user.total_spots}
                        </span>
                      </td>
                      <td className="py-3 px-4">
                        <span className="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">
                          {user.total_helps}
                        </span>
                      </td>
                      <td className="py-3 px-4">
                        <button
                          onClick={() => toggleAdmin(user.id, user.is_admin)}
                          className={`px-3 py-1 rounded-full text-xs font-medium ${
                            user.is_admin
                              ? 'bg-purple-100 text-purple-800 hover:bg-purple-200'
                              : 'bg-gray-100 text-gray-800 hover:bg-gray-200'
                          }`}
                        >
                          {user.is_admin ? 'Admin' : 'KullanÄ±cÄ±'}
                        </button>
                      </td>
                      <td className="py-3 px-4">
                        <div className="flex space-x-2">
                          <button
                            onClick={() => deleteUser(user.id, user.email)}
                            className="px-3 py-1 bg-red-50 hover:bg-red-100 text-red-700 rounded text-xs font-medium border border-red-200"
                          >
                            Sil
                          </button>
                          <button
                            onClick={() => {
                              // KullanÄ±cÄ± detay sayfasÄ±na git
                              window.open(`/profile?user=${user.id}`, '_blank');
                            }}
                            className="px-3 py-1 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded text-xs font-medium border border-blue-200"
                          >
                            GÃ¶rÃ¼ntÃ¼le
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>

            {/* Pagination */}
            {totalCount > 20 && (
              <div className="mt-6 flex justify-center">
                <div className="flex space-x-2">
                  <button
                    onClick={() => setPage(p => Math.max(1, p - 1))}
                    disabled={page === 1}
                    className="px-3 py-2 border rounded-lg disabled:opacity-50"
                  >
                    â† Ã–nceki
                  </button>
                  <span className="px-4 py-2">
                    Sayfa {page} / {Math.ceil(totalCount / 20)}
                  </span>
                  <button
                    onClick={() => setPage(p => p + 1)}
                    disabled={page >= Math.ceil(totalCount / 20)}
                    className="px-3 py-2 border rounded-lg disabled:opacity-50"
                  >
                    Sonraki â†’
                  </button>
                </div>
              </div>
            )}
          </>
        )}

        {!loading && users.length === 0 && (
          <div className="text-center py-8 text-gray-500">
            {search ? 'Arama kriterlerinize uygun kullanÄ±cÄ± bulunamadÄ±' : 'HenÃ¼z kullanÄ±cÄ± kaydÄ± yok'}
          </div>
        )}
      </div>

      {/* Ä°statistikler */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div className="bg-white rounded-xl shadow p-6">
          <h3 className="font-bold text-gray-900 mb-2">Toplam KullanÄ±cÄ±</h3>
          <p className="text-3xl font-bold text-blue-600">{totalCount}</p>
          <p className="text-sm text-gray-600 mt-1">KayÄ±tlÄ± toplam kullanÄ±cÄ±</p>
        </div>
        <div className="bg-white rounded-xl shadow p-6">
          <h3 className="font-bold text-gray-900 mb-2">Admin SayÄ±sÄ±</h3>
          <p className="text-3xl font-bold text-purple-600">
            {users.filter(u => u.is_admin).length}
          </p>
          <p className="text-sm text-gray-600 mt-1">YÃ¶netici yetkisine sahip</p>
        </div>
        <div className="bg-white rounded-xl shadow p-6">
          <h3 className="font-bold text-gray-900 mb-2">Aktif BugÃ¼n</h3>
          <p className="text-3xl font-bold text-green-600">
            {users.filter(u => {
              const userDate = new Date(u.created_at);
              const today = new Date();
              return userDate.toDateString() === today.toDateString();
            }).length}
          </p>
          <p className="text-sm text-gray-600 mt-1">BugÃ¼n kayÄ±t olanlar</p>
        </div>
      </div>
    </div>
  );
}

ğŸ“„ app/profile/[id]/page.tsx
ğŸ“Š 327 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/profile/[id]/page.tsx - DÃœZELTÄ°LMÄ°Å
'use client'

import { useState, useEffect } from 'react'
import { useParams, useRouter } from 'next/navigation'
import { supabase } from '@/lib/supabase'
import Header from '@/components/Header'
import Footer from '@/components/Footer'
import UserProfileCard from '@/components/UserProfileCard'
import SimpleTabs from '@/components/SimpleTabs'

type TabType = 'sightings' | 'spots' | 'reputation'

interface UserProfile {
  id: string
  name: string
  email: string
  avatar_url: string | null
  bio: string | null
  location: string | null
  created_at: string
}

export default function UserProfilePage() {
  const params = useParams()
  const router = useRouter()
  const userId = params.id as string
  
  const [user, setUser] = useState<UserProfile | null>(null)
  const [sightings, setSightings] = useState<any[]>([])
  const [spots, setSpots] = useState<any[]>([])
  const [loading, setLoading] = useState(true)
  const [activeTab, setActiveTab] = useState<TabType>('sightings')
  const [isCurrentUser, setIsCurrentUser] = useState(false)

  // Tab tanÄ±mlarÄ± - tip gÃ¼venli
  const tabs: { id: TabType; label: string }[] = [
    { id: 'sightings', label: `ğŸ‘ï¸ GÃ¶rÃ¼lenler (${sightings.length})` },
    { id: 'spots', label: `ğŸ“ Spot'lar (${spots.length})` },
    { id: 'reputation', label: 'ğŸ† Puan & Rozetler' }
  ]

  useEffect(() => {
    if (userId) {
      fetchUserData()
    }
  }, [userId])

  const fetchUserData = async () => {
    try {
      // Mevcut kullanÄ±cÄ± kontrolÃ¼
      const { data: { user: currentUser } } = await supabase.auth.getUser()
      setIsCurrentUser(currentUser?.id === userId)

      // KullanÄ±cÄ± bilgileri
      const { data: userData } = await supabase
        .from('user_profiles')
        .select('*')
        .eq('id', userId)
        .single()

      // Sightings
      const { data: sightingsData } = await supabase
        .from('quick_sightings')
        .select('*')
        .eq('user_id', userId)
        .eq('status', 'active')
        .order('created_at', { ascending: false })

      // Spots
      const { data: spotsData } = await supabase
        .from('spots')
        .select('*')
        .eq('user_id', userId)
        .order('created_at', { ascending: false })

      setUser(userData)
      setSightings(sightingsData || [])
      setSpots(spotsData || [])
    } catch (error) {
      console.error('Profil yÃ¼klenemedi:', error)
    } finally {
      setLoading(false)
    }
  }

  // Tab deÄŸiÅŸtirme fonksiyonu - tip gÃ¼venli
  const handleTabChange = (tabId: string) => {
    // Type assertion ile tip gÃ¼venli hale getir
    if (tabId === 'sightings' || tabId === 'spots' || tabId === 'reputation') {
      setActiveTab(tabId)
    }
  }

  if (loading) {
    return (
      <div className="min-h-screen bg-gray-50">
        <Header />
        <main className="container-custom py-12 text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto"></div>
          <p className="mt-4 text-gray-600">YÃ¼kleniyor...</p>
        </main>
        <Footer />
      </div>
    )
  }

  if (!user) {
    return (
      <div className="min-h-screen bg-gray-50">
        <Header />
        <main className="container-custom py-12 text-center">
          <h1 className="text-2xl font-bold text-gray-900 mb-4">KullanÄ±cÄ± bulunamadÄ±</h1>
          <button
            onClick={() => router.push('/')}
            className="text-blue-600 hover:text-blue-800"
          >
            Ana sayfaya dÃ¶n
          </button>
        </main>
        <Footer />
      </div>
    )
  }

  return (
    <div className="min-h-screen bg-gray-50">
      <Header />
      
      <main className="container-custom py-8">
        {/* Ãœst Bilgi */}
        <div className="bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-8 text-white mb-8">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-6">
              <div className="relative">
                <div className="w-24 h-24 bg-white rounded-full flex items-center justify-center">
                  {user.avatar_url ? (
                    <img
                      src={user.avatar_url}
                      alt={user.name}
                      className="w-full h-full rounded-full object-cover"
                    />
                  ) : (
                    <div className="text-3xl font-bold text-blue-600">
                      {user.name[0].toUpperCase()}
                    </div>
                  )}
                </div>
                <div className="absolute -bottom-2 -right-2 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                  ğŸ‘ï¸ {sightings.length}
                </div>
              </div>
              
              <div>
                <h1 className="text-3xl font-bold mb-2">{user.name}</h1>
                {user.bio && <p className="text-blue-100">{user.bio}</p>}
                {user.location && (
                  <p className="text-blue-100 text-sm mt-2">ğŸ“ {user.location}</p>
                )}
                <p className="text-blue-100 text-sm mt-2">
                  Ãœyelik: {new Date(user.created_at).toLocaleDateString('tr-TR')}
                </p>
              </div>
            </div>
            
            {isCurrentUser && (
              <button
                onClick={() => router.push('/profile/edit')}
                className="bg-white text-blue-600 hover:bg-gray-100 font-bold py-2 px-6 rounded-lg"
              >
                Profili DÃ¼zenle
              </button>
            )}
          </div>
        </div>

        {/* Ä°statistikler */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
          <div className="bg-white rounded-xl p-6 shadow text-center">
            <div className="text-2xl font-bold text-blue-600 mb-2">
              {sightings.length}
            </div>
            <div className="text-gray-600">GÃ¶rÃ¼len ÃœrÃ¼n</div>
          </div>
          <div className="bg-white rounded-xl p-6 shadow text-center">
            <div className="text-2xl font-bold text-green-600 mb-2">
              {spots.length}
            </div>
            <div className="text-gray-600">OluÅŸturulan Spot</div>
          </div>
          <div className="bg-white rounded-xl p-6 shadow text-center">
            <div className="text-2xl font-bold text-purple-600 mb-2">
              {sightings.filter(s => s.has_photo).length}
            </div>
            <div className="text-gray-600">FotoÄŸraflÄ± Bildirim</div>
          </div>
          <div className="bg-white rounded-xl p-6 shadow text-center">
            <div className="text-2xl font-bold text-orange-600 mb-2">
              {sightings.reduce((sum, s) => sum + s.points_earned, 0)}
            </div>
            <div className="text-gray-600">Toplam Puan</div>
          </div>
        </div>

        {/* Tab'ler */}
        <div className="bg-white rounded-xl shadow mb-6">
          <SimpleTabs 
            tabs={tabs}
            activeTab={activeTab}
            onTabChange={handleTabChange}
          />
        </div>

        {/* Ä°Ã§erik */}
        <div className="min-h-[400px]">
          {activeTab === 'sightings' && (
            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
              {sightings.length === 0 ? (
                <div className="col-span-full text-center py-12">
                  <div className="text-4xl mb-4">ğŸ‘ï¸</div>
                  <h3 className="text-xl font-bold text-gray-900 mb-2">
                    HenÃ¼z gÃ¶rÃ¼len Ã¼rÃ¼n yok
                  </h3>
                  <p className="text-gray-600">
                    {isCurrentUser 
                      ? 'Ä°lk "Nadir GÃ¶rdÃ¼m" bildirimini sen yap!'
                      : 'Bu kullanÄ±cÄ± henÃ¼z bildirim yapmamÄ±ÅŸ'}
                  </p>
                </div>
              ) : (
                sightings.map((sighting) => (
                  <div
                    key={sighting.id}
                    className="bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-lg transition"
                  >
                    {sighting.photo_url && (
                      <div className="h-48">
                        <img
                          src={sighting.photo_url}
                          alt={sighting.description}
                          className="w-full h-full object-cover"
                        />
                      </div>
                    )}
                    
                    <div className="p-4">
                      <p className="font-medium mb-3 line-clamp-2">
                        {sighting.description}
                      </p>
                      
                      <div className="flex items-center text-sm text-gray-600 mb-3">
                        <span className="mr-2">ğŸ“</span>
                        <span className="truncate">{sighting.location_name}</span>
                      </div>
                      
                      <div className="flex justify-between items-center">
                        <div className="text-sm text-gray-500">
                          {new Date(sighting.created_at).toLocaleDateString('tr-TR')}
                        </div>
                        <div className="text-green-600 font-bold">
                          +{sighting.points_earned} puan
                        </div>
                      </div>
                    </div>
                  </div>
                ))
              )}
            </div>
          )}

          {activeTab === 'spots' && (
            <div className="bg-white rounded-xl shadow p-6">
              <h3 className="font-bold text-lg mb-4">ğŸ“ Spot'lar</h3>
              {spots.length === 0 ? (
                <div className="text-center py-8">
                  <div className="text-4xl mb-4">ğŸ“</div>
                  <p className="text-gray-600">
                    HenÃ¼z spot oluÅŸturulmamÄ±ÅŸ
                  </p>
                </div>
              ) : (
                <div className="space-y-4">
                  {spots.map((spot) => (
                    <div 
                      key={spot.id} 
                      className="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer"
                      onClick={() => router.push(`/spots/${spot.id}`)}
                    >
                      <div className="flex items-start justify-between">
                        <div>
                          <h4 className="font-medium text-gray-900">{spot.title}</h4>
                          <p className="text-sm text-gray-600 mt-1 line-clamp-2">
                            {spot.description}
                          </p>
                        </div>
                        <span className={`px-2 py-1 text-xs rounded-full ${
                          spot.status === 'active' 
                            ? 'bg-green-100 text-green-800' 
                            : 'bg-blue-100 text-blue-800'
                        }`}>
                          {spot.status === 'active' ? 'Aktif' : 'Bulundu'}
                        </span>
                      </div>
                      <div className="flex items-center text-sm text-gray-500 mt-3">
                        <span className="mr-4">ğŸ‘ï¸ {spot.views || 0}</span>
                        <span>ğŸ¤ {spot.helps || 0}</span>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>
          )}

          {activeTab === 'reputation' && (
            <div className="bg-white rounded-xl shadow p-6">
              <h3 className="font-bold text-lg mb-4">ğŸ† Puan & Rozetler</h3>
              <UserProfileCard userId={userId} />
            </div>
          )}
        </div>
      </main>

      <Footer />
    </div>
  )
}

ğŸ“„ app/profile/page.tsx
ğŸ“Š 529 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// app/profile/page.tsx - DÃœZELTMÄ°Å VERSÄ°YON
'use client'

import { useEffect, useState } from 'react'
import { useRouter } from 'next/navigation'
import { supabase } from '@/lib/supabase'
import Link from 'next/link'

interface UserProfile {
  id: string
  email: string
  name: string | null
  avatar_url: string | null
  created_at: string
}

interface UserSpot {
  id: string
  title: string
  status: string
  created_at: string
  helps: number
  views: number
  category: string | null
}

interface UserShop {
  id: string
  shop_name: string
  city: string
  subscription_type: string
  is_verified: boolean
}

export default function ProfilePage() {
  const router = useRouter()
  const [user, setUser] = useState<UserProfile | null>(null)
  const [userSpots, setUserSpots] = useState<UserSpot[]>([])
  const [userShop, setUserShop] = useState<UserShop | null>(null)
  const [loading, setLoading] = useState(true)
  const [activeTab, setActiveTab] = useState<'spots' | 'help' | 'shop' | 'settings'>('spots')

  useEffect(() => {
    checkAuth()
  }, [])

  const checkAuth = async () => {
    const { data: { user: authUser } } = await supabase.auth.getUser()
    
    if (!authUser) {
      router.push('/')
      return
    }
    
    fetchUserData(authUser.id)
  }

  const fetchUserData = async (userId: string) => {
    try {
      // KullanÄ±cÄ± bilgileri
      const { data: userData } = await supabase
        .from('user_profiles')
        .select('*')
        .eq('id', userId)
        .single()

      // KullanÄ±cÄ±nÄ±n spot'larÄ±
      const { data: spotsData } = await supabase
        .from('spots')
        .select('id, title, status, created_at, helps, views, category')
        .eq('user_id', userId)
        .order('created_at', { ascending: false })

      // KullanÄ±cÄ±nÄ±n maÄŸazasÄ±
      const { data: shopData } = await supabase
        .from('shops')
        .select('id, shop_name, city, subscription_type, is_verified')
        .eq('owner_id', userId)
        .single()

      setUser({
        id: userId,
        email: userData?.email || '',
        name: userData?.name || 'KullanÄ±cÄ±',
        avatar_url: userData?.avatar_url || null,
        created_at: userData?.created_at || new Date().toISOString()
      })
      
      setUserSpots(spotsData || [])
      setUserShop(shopData || null)

    } catch (error) {
      console.error('KullanÄ±cÄ± bilgileri yÃ¼klenemedi:', error)
    } finally {
      setLoading(false)
    }
  }

  const handleLogout = async () => {
    await supabase.auth.signOut()
    router.push('/')
  }

  const handleCreateSpot = () => {
    router.push('/create-spot')
  }

  const handleOpenShopDashboard = () => {
    if (userShop) {
      router.push('/shop/dashboard')
    } else {
      router.push('/for-business')
    }
  }

  if (loading) {
    return (
      <div className="min-h-screen bg-gray-50">
        <main className="container-custom py-12 text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto"></div>
        </main>
      </div>
    )
  }

  if (!user) {
    return null
  }

  return (
    <div className="min-h-screen bg-gray-50">
      <main className="container-custom py-8">
        {/* Profil Header */}
        <div className="bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-6 md:p-8 text-white mb-8">
          <div className="flex flex-col md:flex-row md:items-center justify-between">
            <div className="flex items-center mb-6 md:mb-0">
              <div className="w-20 h-20 bg-white text-blue-600 rounded-full flex items-center justify-center text-2xl font-bold mr-6">
                {user.name?.[0]?.toUpperCase() || user.email[0].toUpperCase()}
              </div>
              <div>
                <h1 className="text-2xl md:text-3xl font-bold mb-2">{user.name || 'KullanÄ±cÄ±'}</h1>
                <p className="text-blue-100">{user.email}</p>
                <p className="text-blue-100 text-sm mt-2">
                  Ãœyelik: {new Date(user.created_at).toLocaleDateString('tr-TR')}
                </p>
              </div>
            </div>
            <div className="flex flex-col sm:flex-row gap-3">
              <button
                onClick={handleCreateSpot}
                className="bg-white text-blue-600 hover:bg-blue-50 font-medium px-6 py-3 rounded-lg"
              >
                ğŸ“ Yeni Spot OluÅŸtur
              </button>
              <button
                onClick={handleLogout}
                className="bg-red-500 hover:bg-red-600 text-white font-medium px-6 py-3 rounded-lg"
              >
                ğŸšª Ã‡Ä±kÄ±ÅŸ Yap
              </button>
            </div>
          </div>
        </div>

        {/* Ä°statistik KartlarÄ± */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
          <div className="bg-white rounded-xl p-4 shadow text-center hover:shadow-md transition">
            <div className="text-2xl font-bold text-blue-600 mb-1">
              {userSpots.length}
            </div>
            <div className="text-gray-600">Spot'larÄ±m</div>
          </div>
          
          <div className="bg-white rounded-xl p-4 shadow text-center hover:shadow-md transition">
            <div className="text-2xl font-bold text-green-600 mb-1">
              {userSpots.filter(s => s.status === 'found').length}
            </div>
            <div className="text-gray-600">Bulunan</div>
          </div>
          
          <div className="bg-white rounded-xl p-4 shadow text-center hover:shadow-md transition">
            <div className="text-2xl font-bold text-purple-600 mb-1">
              {userSpots.reduce((sum, spot) => sum + spot.views, 0)}
            </div>
            <div className="text-gray-600">GÃ¶rÃ¼ntÃ¼lenme</div>
          </div>
          
          <div className="bg-white rounded-xl p-4 shadow text-center hover:shadow-md transition">
            <div className="text-2xl font-bold text-orange-600 mb-1">
              {userSpots.reduce((sum, spot) => sum + spot.helps, 0)}
            </div>
            <div className="text-gray-600">YardÄ±m</div>
          </div>
        </div>

        {/* MaÄŸaza KartÄ± */}
        {userShop && (
          <div className="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-2xl p-6 mb-8">
            <div className="flex flex-col md:flex-row md:items-center justify-between">
              <div className="flex items-center mb-4 md:mb-0">
                <div className="w-12 h-12 bg-white text-green-600 rounded-full flex items-center justify-center text-xl font-bold mr-4">
                  ğŸª
                </div>
                <div>
                  <h3 className="text-xl font-bold">{userShop.shop_name}</h3>
                  <p className="text-green-100">
                    {userShop.city} â€¢ {userShop.subscription_type === 'free' ? 'Ãœcretsiz Paket' : 'Premium'}
                    {userShop.is_verified && ' â€¢ âœ“ DoÄŸrulanmÄ±ÅŸ'}
                  </p>
                </div>
              </div>
              <button
                onClick={handleOpenShopDashboard}
                className="bg-white text-green-600 hover:bg-green-50 font-bold px-6 py-3 rounded-lg"
              >
                MaÄŸaza Paneline Git
              </button>
            </div>
          </div>
        )}

        {!userShop && (
          <div className="bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-2xl p-6 mb-8">
            <div className="flex flex-col md:flex-row md:items-center justify-between">
              <div className="mb-4 md:mb-0">
                <h3 className="text-xl font-bold mb-2">ğŸª MaÄŸaza Sahibi misiniz?</h3>
                <p className="text-yellow-100">
                  Ãœcretsiz maÄŸaza aÃ§Ä±n, mÃ¼ÅŸterilerinizi artÄ±rÄ±n ve satÄ±ÅŸlarÄ±nÄ±zÄ± bÃ¼yÃ¼tÃ¼n!
                </p>
              </div>
              <button
                onClick={() => router.push('/for-business')}
                className="bg-white text-orange-600 hover:bg-orange-50 font-bold px-6 py-3 rounded-lg"
              >
                Ãœcretsiz MaÄŸaza AÃ§
              </button>
            </div>
          </div>
        )}

        {/* Tab Navigation */}
        <div className="bg-white rounded-xl shadow mb-6">
          <div className="flex border-b overflow-x-auto">
            <button
              onClick={() => setActiveTab('spots')}
              className={`flex-shrink-0 px-6 py-4 text-center font-medium whitespace-nowrap ${
                activeTab === 'spots'
                  ? 'text-blue-600 border-b-2 border-blue-600'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            >
              ğŸ“ Spot'larÄ±m
            </button>
            <button
              onClick={() => setActiveTab('help')}
              className={`flex-shrink-0 px-6 py-4 text-center font-medium whitespace-nowrap ${
                activeTab === 'help'
                  ? 'text-blue-600 border-b-2 border-blue-600'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            >
              ğŸ¤ YardÄ±m Ettiklerim
            </button>
            {userShop && (
              <button
                onClick={() => setActiveTab('shop')}
                className={`flex-shrink-0 px-6 py-4 text-center font-medium whitespace-nowrap ${
                  activeTab === 'shop'
                    ? 'text-blue-600 border-b-2 border-blue-600'
                    : 'text-gray-600 hover:text-gray-900'
                }`}
              >
                ğŸª MaÄŸazam
              </button>
            )}
            <button
              onClick={() => setActiveTab('settings')}
              className={`flex-shrink-0 px-6 py-4 text-center font-medium whitespace-nowrap ${
                activeTab === 'settings'
                  ? 'text-blue-600 border-b-2 border-blue-600'
                  : 'text-gray-600 hover:text-gray-900'
              }`}
            >
              âš™ï¸ Ayarlar
            </button>
          </div>
          
          <div className="p-6">
            {activeTab === 'spots' && (
              <div>
                <div className="flex justify-between items-center mb-6">
                  <h3 className="text-xl font-bold text-gray-900">Spot'larÄ±m</h3>
                  <button
                    onClick={handleCreateSpot}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg"
                  >
                    + Yeni Spot
                  </button>
                </div>
                
                {userSpots.length === 0 ? (
                  <div className="bg-gray-50 rounded-xl p-8 text-center">
                    <div className="text-4xl mb-4">ğŸ“</div>
                    <h4 className="text-lg font-bold text-gray-900 mb-2">HenÃ¼z spot oluÅŸturmadÄ±nÄ±z</h4>
                    <p className="text-gray-600 mb-6">Ä°lk spot'unuzu oluÅŸturun ve topluluÄŸumuzdan yardÄ±m alÄ±n</p>
                    <button
                      onClick={handleCreateSpot}
                      className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg"
                    >
                      Ä°lk Spot'u OluÅŸturun
                    </button>
                  </div>
                ) : (
                  <div className="overflow-x-auto">
                    <table className="w-full">
                      <thead className="bg-gray-50">
                        <tr>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">BaÅŸlÄ±k</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Kategori</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Durum</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">GÃ¶rÃ¼ntÃ¼lenme</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">YardÄ±m</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Tarih</th>
                          <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Ä°ÅŸlemler</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-gray-100">
                        {userSpots.map((spot) => (
                          <tr key={spot.id} className="hover:bg-gray-50">
                            <td className="py-3 px-4">
                              <Link
                                href={`/spots/${spot.id}`}
                                className="font-medium text-blue-600 hover:text-blue-800"
                              >
                                {spot.title.length > 40 ? spot.title.substring(0, 40) + '...' : spot.title}
                              </Link>
                            </td>
                            <td className="py-3 px-4">
                              {spot.category ? (
                                <span className="bg-gray-100 text-gray-800 text-xs font-medium px-3 py-1 rounded-full">
                                  {spot.category}
                                </span>
                              ) : (
                                <span className="text-gray-400">-</span>
                              )}
                            </td>
                            <td className="py-3 px-4">
                              <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                                spot.status === 'active'
                                  ? 'bg-green-100 text-green-800'
                                  : 'bg-blue-100 text-blue-800'
                              }`}>
                                {spot.status === 'active' ? 'Aktif' : 'Bulundu'}
                              </span>
                            </td>
                            <td className="py-3 px-4">{spot.views}</td>
                            <td className="py-3 px-4">{spot.helps}</td>
                            <td className="py-3 px-4 text-sm text-gray-500">
                              {new Date(spot.created_at).toLocaleDateString('tr-TR')}
                            </td>
                            <td className="py-3 px-4">
                              <div className="flex space-x-2">
                                <Link
                                  href={`/spots/${spot.id}`}
                                  className="text-blue-600 hover:text-blue-800 text-sm"
                                >
                                  GÃ¶rÃ¼ntÃ¼le
                                </Link>
                              </div>
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                )}
              </div>
            )}
            
            {activeTab === 'help' && (
              <div className="bg-gray-50 rounded-xl p-8 text-center">
                <div className="text-4xl mb-4">ğŸ¤</div>
                <h4 className="text-lg font-bold text-gray-900 mb-2">YardÄ±m Ettikleriniz</h4>
                <p className="text-gray-600 mb-6">
                  DiÄŸer kullanÄ±cÄ±lara yardÄ±m ettiÄŸiniz spot'lar yakÄ±nda burada gÃ¶rÃ¼necek.
                </p>
                <button
                  onClick={() => router.push('/spots')}
                  className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg"
                >
                  Spot'lara GÃ¶z AtÄ±n
                </button>
              </div>
            )}
            
            {activeTab === 'shop' && userShop && (
              <div>
                <h3 className="text-xl font-bold text-gray-900 mb-6">MaÄŸaza Bilgilerim</h3>
                
                <div className="grid md:grid-cols-2 gap-6">
                  <div className="bg-white border border-gray-200 rounded-xl p-6">
                    <h4 className="font-bold text-gray-900 mb-4">MaÄŸaza DetaylarÄ±</h4>
                    <div className="space-y-3">
                      <div>
                        <p className="text-sm text-gray-600">MaÄŸaza AdÄ±</p>
                        <p className="font-medium">{userShop.shop_name}</p>
                      </div>
                      <div>
                        <p className="text-sm text-gray-600">Åehir</p>
                        <p className="font-medium">{userShop.city}</p>
                      </div>
                      <div>
                        <p className="text-sm text-gray-600">Paket</p>
                        <p className="font-medium">
                          {userShop.subscription_type === 'free' ? 'Ãœcretsiz BaÅŸlangÄ±Ã§' : 'Premium'}
                        </p>
                      </div>
                      <div>
                        <p className="text-sm text-gray-600">Durum</p>
                        <p className="font-medium">
                          {userShop.is_verified ? 'âœ“ DoÄŸrulanmÄ±ÅŸ' : 'DoÄŸrulanmamÄ±ÅŸ'}
                        </p>
                      </div>
                    </div>
                    
                    <button
                      onClick={handleOpenShopDashboard}
                      className="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg"
                    >
                      MaÄŸaza Paneline Git
                    </button>
                  </div>
                  
                  <div className="bg-white border border-gray-200 rounded-xl p-6">
                    <h4 className="font-bold text-gray-900 mb-4">HÄ±zlÄ± Ä°ÅŸlemler</h4>
                    <div className="space-y-3">
                      <button
                        onClick={() => router.push('/for-business?edit=true')}
                        className="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 rounded-lg"
                      >
                        ğŸ“ MaÄŸaza Bilgilerini DÃ¼zenle
                      </button>
                      <button
                        onClick={handleCreateSpot}
                        className="w-full bg-blue-100 hover:bg-blue-200 text-blue-800 py-3 rounded-lg"
                      >
                        ğŸª MaÄŸaza Ä°Ã§in Spot OluÅŸtur
                      </button>
                      <button
                        onClick={() => router.push(`/shop/${userShop.id}`)}
                        className="w-full bg-green-100 hover:bg-green-200 text-green-800 py-3 rounded-lg"
                      >
                        ğŸ‘ï¸ MaÄŸazayÄ± GÃ¶rÃ¼ntÃ¼le
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}
            
            {activeTab === 'settings' && (
              <div>
                <h3 className="text-xl font-bold text-gray-900 mb-6">Hesap AyarlarÄ±</h3>
                
                <div className="grid md:grid-cols-2 gap-6">
                  <div className="bg-white border border-gray-200 rounded-xl p-6">
                    <h4 className="font-bold text-gray-900 mb-4">Profil Bilgileri</h4>
                    <div className="space-y-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Ad Soyad
                        </label>
                        <p className="font-medium">{user.name || 'BelirtilmemiÅŸ'}</p>
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Email
                        </label>
                        <p className="font-medium">{user.email}</p>
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Ãœyelik Tarihi
                        </label>
                        <p className="font-medium">
                          {new Date(user.created_at).toLocaleDateString('tr-TR')}
                        </p>
                      </div>
                    </div>
                  </div>
                  
                  <div className="bg-white border border-gray-200 rounded-xl p-6">
                    <h4 className="font-bold text-gray-900 mb-4">Bildirimler</h4>
                    <div className="space-y-3">
                      <label className="flex items-center">
                        <input type="checkbox" className="mr-3" defaultChecked />
                        <span className="text-sm">Yeni spot cevaplarÄ±</span>
                      </label>
                      <label className="flex items-center">
                        <input type="checkbox" className="mr-3" defaultChecked />
                        <span className="text-sm">Spot durum deÄŸiÅŸiklikleri</span>
                      </label>
                      <label className="flex items-center">
                        <input type="checkbox" className="mr-3" />
                        <span className="text-sm">Kampanya ve duyurular</span>
                      </label>
                    </div>
                    
                    <div className="mt-6 pt-6 border-t">
                      <h4 className="font-bold text-gray-900 mb-3">GÃ¼venlik</h4>
                      <button
                        onClick={() => router.push('/forgot-password')}
                        className="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 rounded-lg"
                      >
                        ğŸ” Åifre DeÄŸiÅŸtir
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      </main>
    </div>
  )
}

====================================================================================================
ğŸ§© COMPONENT'LER
====================================================================================================

ğŸ“„ components/admin/AdPerformance.tsx
ğŸ“Š 167 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/admin/AdPerformance.tsx
'use client'

import { useState } from 'react'

interface AdPerformanceData {
  name: string
  impressions: number
  clicks: number
  revenue: number
  ctr: number
  rpm: number
}

export default function AdPerformance() {
  const [timeRange, setTimeRange] = useState<'today' | 'week' | 'month'>('week')

  const performanceData: AdPerformanceData[] = [
    {
      name: 'Header Reklam',
      impressions: 3245,
      clicks: 58,
      revenue: 24.50,
      ctr: 1.79,
      rpm: 7.55
    },
    {
      name: 'Sidebar Reklam',
      impressions: 2890,
      clicks: 42,
      revenue: 18.75,
      ctr: 1.45,
      rpm: 6.49
    },
    {
      name: 'In-Article Reklam',
      impressions: 1567,
      clicks: 31,
      revenue: 15.20,
      ctr: 1.98,
      rpm: 9.70
    },
    {
      name: 'Footer Reklam',
      impressions: 4321,
      clicks: 65,
      revenue: 28.90,
      ctr: 1.50,
      rpm: 6.69
    },
    {
      name: 'Mobile Banner',
      impressions: 2789,
      clicks: 49,
      revenue: 21.30,
      ctr: 1.76,
      rpm: 7.64
    }
  ]

  const totals = performanceData.reduce(
    (acc, item) => ({
      impressions: acc.impressions + item.impressions,
      clicks: acc.clicks + item.clicks,
      revenue: acc.revenue + item.revenue
    }),
    { impressions: 0, clicks: 0, revenue: 0 }
  )

  return (
    <div className="bg-white rounded-xl shadow p-6">
      <div className="flex justify-between items-center mb-6">
        <div>
          <h3 className="text-lg font-bold text-gray-900">Reklam PerformansÄ±</h3>
          <p className="text-gray-600">Reklam Ã¼nitelerinin performansÄ±</p>
        </div>
        <div className="flex space-x-2">
          {(['today', 'week', 'month'] as const).map((range) => (
            <button
              key={range}
              onClick={() => setTimeRange(range)}
              className={`px-3 py-1 rounded-lg text-sm font-medium ${
                timeRange === range
                  ? 'bg-blue-600 text-white'
                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
              }`}
            >
              {range === 'today' ? 'BugÃ¼n' : range === 'week' ? 'Bu Hafta' : 'Bu Ay'}
            </button>
          ))}
        </div>
      </div>

      {/* Performans Tablosu */}
      <div className="overflow-x-auto">
        <table className="w-full">
          <thead>
            <tr className="bg-gray-50">
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Reklam AdÄ±</th>
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">GÃ¶sterim</th>
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">TÄ±klama</th>
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">CTR</th>
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">Gelir</th>
              <th className="py-3 px-4 text-left text-sm font-medium text-gray-700">RPM</th>
            </tr>
          </thead>
          <tbody className="divide-y divide-gray-200">
            {performanceData.map((item, index) => (
              <tr key={index} className="hover:bg-gray-50">
                <td className="py-3 px-4 font-medium">{item.name}</td>
                <td className="py-3 px-4">{item.impressions.toLocaleString()}</td>
                <td className="py-3 px-4">{item.clicks}</td>
                <td className="py-3 px-4">
                  <span className="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                    {item.ctr}%
                  </span>
                </td>
                <td className="py-3 px-4 font-medium">{item.revenue.toFixed(2)} â‚º</td>
                <td className="py-3 px-4">{item.rpm.toFixed(2)} â‚º</td>
              </tr>
            ))}
          </tbody>
          <tfoot className="bg-gray-50 font-bold">
            <tr>
              <td className="py-3 px-4">TOPLAM</td>
              <td className="py-3 px-4">{totals.impressions.toLocaleString()}</td>
              <td className="py-3 px-4">{totals.clicks}</td>
              <td className="py-3 px-4">
                {((totals.clicks / totals.impressions) * 100).toFixed(2)}%
              </td>
              <td className="py-3 px-4">{totals.revenue.toFixed(2)} â‚º</td>
              <td className="py-3 px-4">
                {((totals.revenue / totals.impressions) * 1000).toFixed(2)} â‚º
              </td>
            </tr>
          </tfoot>
        </table>
      </div>

      {/* Ã–zet */}
      <div className="mt-6 grid grid-cols-3 gap-4">
        <div className="text-center p-4 bg-blue-50 rounded-lg">
          <p className="text-sm text-blue-600">Ortalama CTR</p>
          <p className="text-xl font-bold">
            {(
              performanceData.reduce((sum, item) => sum + item.ctr, 0) / performanceData.length
            ).toFixed(2)}%
          </p>
        </div>
        <div className="text-center p-4 bg-green-50 rounded-lg">
          <p className="text-sm text-green-600">Ortalama RPM</p>
          <p className="text-xl font-bold">
            {(
              performanceData.reduce((sum, item) => sum + item.rpm, 0) / performanceData.length
            ).toFixed(2)} â‚º
          </p>
        </div>
        <div className="text-center p-4 bg-purple-50 rounded-lg">
          <p className="text-sm text-purple-600">GÃ¼nlÃ¼k Ortalama</p>
          <p className="text-xl font-bold">
            {(totals.revenue / (timeRange === 'week' ? 7 : timeRange === 'month' ? 30 : 1)).toFixed(2)} â‚º
          </p>
        </div>
      </div>
    </div>
  )
}

ğŸ“„ components/admin/AdUnitManager.tsx
ğŸ“Š 351 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/admin/AdUnitManager.tsx
'use client'

import { useState } from 'react'

// Tip tanÄ±mlarÄ± - export edelim
export interface AdUnit {
  id: string
  name: string
  type: 'display' | 'in-article' | 'in-feed'
  size: string
  position: string
  status: 'active' | 'paused'
  revenue: number
}

export interface AdUnitManagerProps {
  adUnits: AdUnit[]
  onUpdate: (units: AdUnit[]) => void
  clientId: string
}

export default function AdUnitManager({ adUnits, onUpdate, clientId }: AdUnitManagerProps) {
  const [showForm, setShowForm] = useState(false)
  const [newAdUnit, setNewAdUnit] = useState({
    name: '',
    type: 'display' as 'display' | 'in-article' | 'in-feed',
    size: '300x250',
    position: 'sidebar',
    status: 'active' as 'active' | 'paused'
  })

  const sizes = [
    '300x250', '336x280', '728x90', '970x250',
    '300x600', '320x100', '160x600'
  ]

  const positions = [
    'header', 'sidebar', 'footer',
    'content-top', 'content-middle', 'content-bottom',
    'in-article', 'in-feed'
  ]

  const addAdUnit = () => {
    if (!newAdUnit.name.trim()) {
      alert('LÃ¼tfen reklam adÄ± girin')
      return
    }

    const unit: AdUnit = {
      id: `ad-${Date.now()}`,
      name: newAdUnit.name,
      type: newAdUnit.type,
      size: newAdUnit.size,
      position: newAdUnit.position,
      status: newAdUnit.status,
      revenue: 0
    }

    // onUpdate'i Ã§aÄŸÄ±r - TÄ°P GÃœVENLÄ°
    onUpdate([...adUnits, unit])
    
    // Formu sÄ±fÄ±rla
    setNewAdUnit({
      name: '',
      type: 'display',
      size: '300x250',
      position: 'sidebar',
      status: 'active'
    })
    setShowForm(false)
  }

  const toggleAdStatus = (id: string) => {
    // updated deÄŸiÅŸkenine aÃ§Ä±k tip atamasÄ± yap
    const updated: AdUnit[] = adUnits.map(unit => {
      if (unit.id === id) {
        return {
          ...unit,
          status: unit.status === 'active' ? 'paused' : 'active'
        }
      }
      return unit
    })
    
    // onUpdate'i Ã§aÄŸÄ±r - artÄ±k tip gÃ¼venli
    onUpdate(updated)
  }

  const deleteAdUnit = (id: string) => {
    const updated = adUnits.filter(unit => unit.id !== id)
    onUpdate(updated)
  }

  return (
    <div className="bg-white rounded-xl shadow p-6">
      <div className="flex justify-between items-center mb-6">
        <h2 className="text-lg font-bold text-gray-900">Reklam Ãœniteleri</h2>
        <button
          onClick={() => setShowForm(!showForm)}
          className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg"
        >
          {showForm ? 'Ä°ptal' : '+ Yeni Reklam'}
        </button>
      </div>

      {/* Yeni Reklam Formu */}
      {showForm && (
        <div className="bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200">
          <h3 className="font-bold text-gray-900 mb-4">Yeni Reklam Ãœnitesi</h3>
          
          <div className="grid md:grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Reklam AdÄ± *
              </label>
              <input
                type="text"
                value={newAdUnit.name}
                onChange={(e) => setNewAdUnit(prev => ({...prev, name: e.target.value}))}
                placeholder="Ã–rn: Ana Sayfa Sidebar"
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                required
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Reklam Tipi
              </label>
              <select
                value={newAdUnit.type}
                onChange={(e) => setNewAdUnit(prev => ({
                  ...prev, 
                  type: e.target.value as 'display' | 'in-article' | 'in-feed'
                }))}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
              >
                <option value="display">Display Reklam</option>
                <option value="in-article">Makale Ä°Ã§i</option>
                <option value="in-feed">Feed Ä°Ã§i</option>
              </select>
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Boyut
              </label>
              <select
                value={newAdUnit.size}
                onChange={(e) => setNewAdUnit(prev => ({...prev, size: e.target.value}))}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
              >
                {sizes.map(size => (
                  <option key={size} value={size}>{size}</option>
                ))}
              </select>
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Pozisyon
              </label>
              <select
                value={newAdUnit.position}
                onChange={(e) => setNewAdUnit(prev => ({...prev, position: e.target.value}))}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
              >
                {positions.map(pos => (
                  <option key={pos} value={pos}>{pos}</option>
                ))}
              </select>
            </div>

            <div className="md:col-span-2">
              <label className="block text-sm font-medium text-gray-700 mb-3">
                BaÅŸlangÄ±Ã§ Durumu
              </label>
              <div className="flex space-x-6">
                <label className="flex items-center space-x-2 cursor-pointer">
                  <input
                    type="radio"
                    name="status"
                    value="active"
                    checked={newAdUnit.status === 'active'}
                    onChange={() => setNewAdUnit(prev => ({...prev, status: 'active'}))}
                    className="w-4 h-4 text-blue-600"
                  />
                  <span className="text-sm font-medium text-gray-700">Aktif</span>
                  <span className="text-xs text-gray-500">(Hemen yayÄ±nda)</span>
                </label>
                <label className="flex items-center space-x-2 cursor-pointer">
                  <input
                    type="radio"
                    name="status"
                    value="paused"
                    checked={newAdUnit.status === 'paused'}
                    onChange={() => setNewAdUnit(prev => ({...prev, status: 'paused'}))}
                    className="w-4 h-4 text-blue-600"
                  />
                  <span className="text-sm font-medium text-gray-700">DuraklatÄ±lmÄ±ÅŸ</span>
                  <span className="text-xs text-gray-500">(Daha sonra aktif edilecek)</span>
                </label>
              </div>
            </div>
          </div>

          <div className="mt-6 flex justify-end space-x-3">
            <button
              type="button"
              onClick={() => setShowForm(false)}
              className="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium"
            >
              Ä°ptal
            </button>
            <button
              onClick={addAdUnit}
              disabled={!newAdUnit.name.trim()}
              className="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-6 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
            >
              Reklam Ekle
            </button>
          </div>
        </div>
      )}

      {/* Reklam Listesi */}
      {adUnits.length === 0 ? (
        <div className="text-center py-12 text-gray-500 border-2 border-dashed border-gray-200 rounded-lg">
          <div className="text-4xl mb-4">ğŸ“º</div>
          <p className="text-lg font-medium">HenÃ¼z reklam Ã¼niteniz yok</p>
          <p className="text-sm mt-2">Yeni reklam eklemek iÃ§in "Yeni Reklam" butonuna tÄ±klayÄ±n</p>
        </div>
      ) : (
        <>
          <div className="overflow-x-auto">
            <table className="w-full min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Ad
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Tip
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Boyut
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Pozisyon
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Durum
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Gelir
                  </th>
                  <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Ä°ÅŸlemler
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {adUnits.map((unit) => (
                  <tr key={unit.id} className="hover:bg-gray-50">
                    <td className="px-6 py-4 whitespace-nowrap">
                      <div className="font-medium text-gray-900">{unit.name}</div>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <span className="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">
                        {unit.type === 'display' ? 'Display' : 
                         unit.type === 'in-article' ? 'Makale Ä°Ã§i' : 'Feed Ä°Ã§i'}
                      </span>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {unit.size}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {unit.position}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${
                        unit.status === 'active' 
                          ? 'bg-green-100 text-green-800' 
                          : 'bg-red-100 text-red-800'
                      }`}>
                        {unit.status === 'active' ? 'Aktif' : 'DuraklatÄ±ldÄ±'}
                      </span>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                      {unit.revenue.toFixed(2)} â‚º
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                      <div className="flex space-x-2">
                        <button
                          onClick={() => toggleAdStatus(unit.id)}
                          className={`px-3 py-1 rounded text-xs font-medium ${
                            unit.status === 'active'
                              ? 'bg-red-50 text-red-700 hover:bg-red-100 border border-red-200'
                              : 'bg-green-50 text-green-700 hover:bg-green-100 border border-green-200'
                          }`}
                        >
                          {unit.status === 'active' ? 'Duraklat' : 'Aktif Et'}
                        </button>
                        <button
                          onClick={() => deleteAdUnit(unit.id)}
                          className="px-3 py-1 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded text-xs font-medium border border-gray-300"
                        >
                          Sil
                        </button>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>

          {/* Ä°statistikler */}
          <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div className="bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200">
              <p className="text-sm font-medium text-blue-700">Toplam Reklam</p>
              <p className="text-2xl font-bold text-blue-900">{adUnits.length}</p>
              <p className="text-xs text-blue-600 mt-1">
                {adUnits.filter(u => u.status === 'active').length} aktif
              </p>
            </div>
            <div className="bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border border-green-200">
              <p className="text-sm font-medium text-green-700">Toplam Gelir</p>
              <p className="text-2xl font-bold text-green-900">
                {adUnits.reduce((sum, unit) => sum + unit.revenue, 0).toFixed(2)} â‚º
              </p>
              <p className="text-xs text-green-600 mt-1">
                Ortalama: {(adUnits.reduce((sum, unit) => sum + unit.revenue, 0) / adUnits.length || 0).toFixed(2)} â‚º
              </p>
            </div>
            <div className="bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200">
              <p className="text-sm font-medium text-purple-700">Tahmini AylÄ±k</p>
              <p className="text-2xl font-bold text-purple-900">
                {(adUnits.reduce((sum, unit) => sum + unit.revenue, 0) * 30).toFixed(2)} â‚º
              </p>
              <p className="text-xs text-purple-600 mt-1">
                TÃ¼m reklamlar aktifse
              </p>
            </div>
          </div>
        </>
      )}
    </div>
  )
}

ğŸ“„ components/AuthModal.tsx
ğŸ“Š 374 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/AuthModal.tsx - DEBUG VERSÄ°YON
'use client'

import { useState } from 'react'
import { supabase } from '@/lib/supabase'
import { sendWelcomeEmail } from '@/lib/email-server'

interface AuthModalProps {
  isOpen: boolean
  onClose: () => void
  onSuccess?: () => void
}

export default function AuthModal({ isOpen, onClose, onSuccess }: AuthModalProps) {
  const [isLogin, setIsLogin] = useState(true)
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [name, setName] = useState('')
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState('')
  const [successMessage, setSuccessMessage] = useState('')
  const [debugLog, setDebugLog] = useState<string[]>([])

  const addDebugLog = (message: string) => {
    console.log(`ğŸ” DEBUG: ${message}`)
    setDebugLog(prev => [...prev, `${new Date().toISOString().split('T')[1].split('.')[0]}: ${message}`])
  }

  if (!isOpen) return null

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setLoading(true)
    setError('')
    setSuccessMessage('')
    setDebugLog([])

    addDebugLog('Form submit baÅŸladÄ±')
    addDebugLog(`Mode: ${isLogin ? 'Login' : 'Register'}`)
    addDebugLog(`Email: ${email}, Name: ${name}`)

    try {
      if (isLogin) {
        // GÄ°RÄ°Å YAP
        addDebugLog('Supabase signInWithPassword Ã§aÄŸrÄ±lÄ±yor...')
        
        const { data, error } = await supabase.auth.signInWithPassword({
          email,
          password,
        })
        
        addDebugLog(`SignIn response: ${error ? 'Error: ' + error.message : 'Success'}`)
        console.log('SignIn full response:', { data, error })
        
        if (error) throw error
        
        setSuccessMessage('BaÅŸarÄ±yla giriÅŸ yaptÄ±nÄ±z!')
        addDebugLog('GiriÅŸ baÅŸarÄ±lÄ±, yÃ¶nlendirme bekleniyor...')
        
        setTimeout(() => {
          onClose()
          if (onSuccess) {
            onSuccess()
          } else {
            window.location.reload()
          }
        }, 1500)
        
      } else {
        // KAYIT OL
        addDebugLog('KayÄ±t iÅŸlemi baÅŸlatÄ±lÄ±yor...')
        
        // 1. Ã–nce auth kaydÄ±
        addDebugLog('Supabase signUp Ã§aÄŸrÄ±lÄ±yor...')
        const { data: authData, error: authError } = await supabase.auth.signUp({
          email,
          password,
          options: {
            data: { name },
            emailRedirectTo: `${window.location.origin}/auth/callback`,
          },
        })
        
        addDebugLog(`Auth signUp response: ${authError ? 'Error: ' + authError.message : 'Success'}`)
        console.log('Auth signUp full response:', { authData, authError })
        
        if (authError) {
          addDebugLog(`Auth error details: ${JSON.stringify(authError, null, 2)}`)
          throw authError
        }
        
        if (authData?.user) {
          addDebugLog(`Auth baÅŸarÄ±lÄ±! User ID: ${authData.user.id}`)
          addDebugLog(`User confirmed: ${authData.user.confirmed_at ? 'Evet' : 'HayÄ±r'}`)
          
          // 2. user_profiles tablosuna kayÄ±t
          try {
            addDebugLog('user_profiles tablosuna kayÄ±t yapÄ±lÄ±yor...')
            const { data: profileData, error: profileError } = await supabase
              .from('user_profiles')
              .insert({
                id: authData.user.id,
                name: name,
                created_at: new Date().toISOString(),
                updated_at: new Date().toISOString()
              })
              .select()
            
            addDebugLog(`Profile insert response: ${profileError ? 'Error: ' + profileError.message : 'Success'}`)
            console.log('Profile insert full response:', { profileData, profileError })
            
            if (profileError) {
              addDebugLog(`Profile error (devam ediliyor): ${profileError.message}`)
              // Profile kaydÄ± baÅŸarÄ±sÄ±z olsa bile devam et
            } else {
              addDebugLog('Profile kaydÄ± baÅŸarÄ±lÄ±!')
            }
          } catch (profileErr: any) {
            addDebugLog(`Profile exception: ${profileErr.message}`)
            console.warn('Profile kaydÄ± exception:', profileErr)
          }
          
          // 3. Email gÃ¶nder
          try {
            addDebugLog('Welcome email gÃ¶nderiliyor...')
            const result = await sendWelcomeEmail(email, name)
            addDebugLog(`Email gÃ¶nderim sonucu: ${result.success ? 'BaÅŸarÄ±lÄ±' : 'BaÅŸarÄ±sÄ±z'}`)
            
            if (result.success) {
              setSuccessMessage(`ğŸ‰ HoÅŸ geldiniz ${name}! KaydÄ±nÄ±z baÅŸarÄ±yla oluÅŸturuldu.`)
            } else {
              setSuccessMessage(`âœ… KaydÄ±nÄ±z baÅŸarÄ±yla oluÅŸturuldu ${name}! (Email gÃ¶nderilemedi)`)
            }
          } catch (emailError: any) {
            addDebugLog(`Email error: ${emailError.message}`)
            console.warn('Email gÃ¶nderilemedi:', emailError)
            setSuccessMessage(`âœ… KaydÄ±nÄ±z baÅŸarÄ±yla oluÅŸturuldu ${name}!`)
          }
          
          addDebugLog('KayÄ±t tamamlandÄ±, yÃ¶nlendirme bekleniyor...')
          setTimeout(() => {
            onClose()
            if (onSuccess) {
              onSuccess()
            } else {
              window.location.href = '/profile'
            }
          }, 2000)
        } else {
          addDebugLog('Auth data var ama user yok!')
          throw new Error('KullanÄ±cÄ± oluÅŸturulamadÄ±')
        }
      }

    } catch (err: any) {
      console.error('Auth error details:', err)
      addDebugLog(`Catch error: ${err.message}`)
      addDebugLog(`Error stack: ${err.stack}`)
      
      let errorMessage = err.message || 'Bir hata oluÅŸtu'
      
      // DetaylÄ± hata mesajlarÄ±
      if (errorMessage.includes('Invalid login credentials')) {
        errorMessage = 'GeÃ§ersiz email veya ÅŸifre'
      } else if (errorMessage.includes('Email not confirmed')) {
        errorMessage = 'LÃ¼tfen email adresinizi doÄŸrulayÄ±n (spam klasÃ¶rÃ¼nÃ¼zÃ¼ kontrol edin)'
      } else if (errorMessage.includes('User already registered')) {
        errorMessage = 'Bu email adresi zaten kayÄ±tlÄ±. LÃ¼tfen giriÅŸ yapÄ±n veya ÅŸifrenizi sÄ±fÄ±rlayÄ±n.'
      } else if (errorMessage.includes('Password should be at least')) {
        errorMessage = 'Åifre en az 6 karakter olmalÄ±dÄ±r'
      } else if (errorMessage.includes('Invalid email')) {
        errorMessage = 'GeÃ§ersiz email adresi formatÄ±'
      } else if (errorMessage.includes('rate limit')) {
        errorMessage = 'Ã‡ok fazla deneme yaptÄ±nÄ±z. LÃ¼tfen bir sÃ¼re sonra tekrar deneyin.'
      } else if (errorMessage.includes('network')) {
        errorMessage = 'AÄŸ hatasÄ±. LÃ¼tfen internet baÄŸlantÄ±nÄ±zÄ± kontrol edin.'
      } else if (errorMessage.includes('duplicate key')) {
        errorMessage = 'Bu kullanÄ±cÄ± zaten kayÄ±tlÄ±'
      } else if (errorMessage.includes('JWT')) {
        errorMessage = 'Kimlik doÄŸrulama hatasÄ±. LÃ¼tfen sayfayÄ± yenileyin.'
      }
      
      setError(`${errorMessage} (LÃ¼tfen browser konsolunu kontrol edin)`)
      
    } finally {
      setLoading(false)
      addDebugLog('Ä°ÅŸlem tamamlandÄ± (finally)')
    }
  }

  const handleClose = () => {
    setEmail('')
    setPassword('')
    setName('')
    setError('')
    setSuccessMessage('')
    setDebugLog([])
    onClose()
  }

  const switchMode = () => {
    setIsLogin(!isLogin)
    setError('')
    setSuccessMessage('')
    setDebugLog([])
  }

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div className="bg-white rounded-xl shadow-2xl w-full max-w-md">
        {/* Header */}
        <div className="border-b p-6">
          <div className="flex justify-between items-center">
            <h2 className="text-2xl font-bold text-gray-900">
              {isLogin ? 'GiriÅŸ Yap' : 'Hesap OluÅŸtur'}
            </h2>
            <button
              onClick={handleClose}
              className="text-gray-500 hover:text-gray-700 text-2xl"
              disabled={loading}
            >
              Ã—
            </button>
          </div>
          <p className="text-gray-600 mt-2">
            {isLogin 
              ? 'Spot oluÅŸturmak ve yardÄ±m etmek iÃ§in giriÅŸ yapÄ±n' 
              : 'TopluluÄŸumuza katÄ±lÄ±n, kayÄ±p Ã¼rÃ¼nleri birlikte bulalÄ±m'}
          </p>
        </div>

        {/* Form */}
        <form onSubmit={handleSubmit} className="p-6 space-y-4">
          {!isLogin && (
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                Ad Soyad *
              </label>
              <input
                type="text"
                value={name}
                onChange={(e) => setName(e.target.value)}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                placeholder="Ahmet YÄ±lmaz"
                required={!isLogin}
                disabled={loading}
              />
            </div>
          )}

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              E-posta *
            </label>
            <input
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
              placeholder="ornek@email.com"
              required
              disabled={loading}
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              Åifre *
            </label>
            <input
              type="password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
              minLength={6}
              required
              disabled={loading}
            />
            {!isLogin && (
              <p className="text-xs text-gray-500 mt-1">
                Åifreniz en az 6 karakter olmalÄ±dÄ±r
              </p>
            )}
          </div>

          {/* Debug Log (sadece development'da) */}
          {process.env.NODE_ENV === 'development' && debugLog.length > 0 && (
            <div className="bg-gray-900 text-green-400 p-3 rounded-lg border border-gray-700 max-h-40 overflow-y-auto">
              <div className="text-xs font-mono">
                <div className="font-bold mb-1">ğŸ” DEBUG LOG:</div>
                {debugLog.map((log, index) => (
                  <div key={index} className="mb-1 border-b border-gray-800 pb-1 last:border-0">
                    {log}
                  </div>
                ))}
              </div>
            </div>
          )}

          {/* BaÅŸarÄ± MesajÄ± */}
          {successMessage && (
            <div className="bg-green-50 border border-green-200 text-green-700 p-4 rounded-lg">
              {successMessage}
            </div>
          )}

          {/* Hata MesajÄ± */}
          {error && (
            <div className="bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg">
              <div className="font-medium mb-1">Hata:</div>
              <div>{error}</div>
              <div className="mt-2 text-sm">
                <button
                  type="button"
                  onClick={() => {
                    console.log('DEBUG LOG:', debugLog)
                    alert(`Debug log konsolda gÃ¶rÃ¼ntÃ¼lendi. LÃ¼tfen F12 ile konsolu aÃ§Ä±n.`)
                  }}
                  className="text-red-600 hover:text-red-800 underline mr-4"
                >
                  Debug Log'u GÃ¶r
                </button>
                <button
                  type="button"
                  onClick={() => {
                    const testData = { email, name, isLogin }
                    console.log('TEST DATA:', testData)
                    alert(`Test data: ${JSON.stringify(testData)}`)
                  }}
                  className="text-blue-600 hover:text-blue-800 underline"
                >
                  Test Data'yÄ± GÃ¶r
                </button>
              </div>
            </div>
          )}

          <button
            type="submit"
            disabled={loading}
            className="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"
          >
            {loading ? (
              <>
                <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                  <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                  <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Ä°ÅŸleniyor...
              </>
            ) : (
              isLogin ? 'GiriÅŸ Yap' : 'Hesap OluÅŸtur'
            )}
          </button>
        </form>

        {/* Footer */}
        <div className="border-t p-6 text-center">
          <p className="text-gray-600">
            {isLogin ? 'HesabÄ±nÄ±z yok mu?' : 'Zaten hesabÄ±nÄ±z var mÄ±?'}
            <button
              onClick={switchMode}
              disabled={loading}
              className="text-blue-600 hover:text-blue-800 font-medium ml-2 disabled:opacity-50"
            >
              {isLogin ? 'KayÄ±t Olun' : 'GiriÅŸ YapÄ±n'}
            </button>
          </p>
        </div>
      </div>
    </div>
  )
}

ğŸ“„ components/Footer.tsx
ğŸ“Š 179 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/Footer.tsx - GÃœNCELLENMÄ°Å
import Link from 'next/link'

export default function Footer() {
  const currentYear = new Date().getFullYear()

  return (
    <footer className="bg-gray-900 text-white pt-12 pb-8 mt-16">
      <div className="container-custom">
        <div className="grid md:grid-cols-5 gap-8 mb-8">
          {/* Logo & Description */}
          <div className="md:col-span-2">
            <div className="flex items-center mb-4">
              <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center mr-3">
                <span className="text-white font-bold text-xl">S</span>
              </div>
              <h2 className="text-2xl font-bold">SpotItForMe</h2>
            </div>
            <p className="text-gray-400 mb-6">
              Topluluk gÃ¼cÃ¼yle kayÄ±p Ã¼rÃ¼nleri bulma platformu. 
              KeÅŸfet, bul, paylaÅŸ, kazan!
            </p>
            <div className="flex space-x-4">
              <button className="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-gray-700">
                ğŸ“˜
              </button>
              <button className="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-gray-700">
                ğŸ“·
              </button>
              <button className="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-gray-700">
                ğŸ¦
              </button>
            </div>
          </div>

          {/* Spot & KeÅŸfet */}
          <div>
            <h3 className="text-lg font-bold mb-4">Spot & KeÅŸfet</h3>
            <ul className="space-y-3">
              <li>
                <Link href="/spots" className="text-gray-400 hover:text-white">
                  TÃ¼m Spot'lar
                </Link>
              </li>
              <li>
                <Link href="/create-spot" className="text-gray-400 hover:text-white">
                  Spot OluÅŸtur
                </Link>
              </li>
              <li>
                <Link href="/discovery" className="text-gray-400 hover:text-white">
                  KeÅŸfet
                </Link>
              </li>
              <li>
                <Link href="/leaderboard" className="text-gray-400 hover:text-white">
                  Lider Tablosu
                </Link>
              </li>
              <li>
                <Link href="/challenges" className="text-gray-400 hover:text-white">
                  GÃ¼nlÃ¼k Hedefler
                </Link>
              </li>
            </ul>
          </div>

          {/* MaÄŸazalar */}
          <div>
            <h3 className="text-lg font-bold mb-4">MaÄŸazalar</h3>
            <ul className="space-y-3">
              <li>
                <Link href="/shops" className="text-gray-400 hover:text-white">
                  MaÄŸazalarÄ± KeÅŸfet
                </Link>
              </li>
              <li>
                <Link href="/for-business" className="text-gray-400 hover:text-white">
                  Ä°ÅŸletme KaydÄ±
                </Link>
              </li>
              <li>
                <Link href="/shop-dashboard" className="text-gray-400 hover:text-white">
                  MaÄŸaza Paneli
                </Link>
              </li>
              <li>
                <Link href="/premium" className="text-gray-400 hover:text-white">
                  Premium Paketler
                </Link>
              </li>
            </ul>
          </div>

          {/* YardÄ±m & Destek */}
          <div>
            <h3 className="text-lg font-bold mb-4">YardÄ±m & Destek</h3>
            <ul className="space-y-3">
              <li>
                <Link href="/how-it-works" className="text-gray-400 hover:text-white">
                  NasÄ±l Ã‡alÄ±ÅŸÄ±r?
                </Link>
              </li>
              <li>
                <Link href="/faq" className="text-gray-400 hover:text-white">
                  SÄ±kÃ§a Sorulan Sorular
                </Link>
              </li>
              <li>
                <Link href="/contact" className="text-gray-400 hover:text-white">
                  Ä°letiÅŸim
                </Link>
              </li>
              <li>
                <Link href="/privacy" className="text-gray-400 hover:text-white">
                  Gizlilik PolitikasÄ±
                </Link>
              </li>
              <li>
                <Link href="/terms" className="text-gray-400 hover:text-white">
                  KullanÄ±m KoÅŸullarÄ±
                </Link>
              </li>
            </ul>
          </div>
        </div>

        {/* Newsletter - YENÄ° */}
        <div className="border-t border-gray-800 pt-8 mb-8">
          <div className="max-w-xl mx-auto text-center">
            <h3 className="text-xl font-bold mb-4">ğŸ“¬ BÃ¼ltenimize Abone Olun</h3>
            <p className="text-gray-400 mb-6">
              Yeni Ã¶zellikler, baÅŸarÄ± hikayeleri ve Ã¶zel fÄ±rsatlardan haberdar olun.
            </p>
            <form className="flex">
              <input
                type="email"
                placeholder="E-posta adresiniz"
                className="flex-grow px-6 py-3 rounded-l-lg bg-gray-800 text-white border-0 focus:ring-2 focus:ring-blue-500 focus:outline-none"
              />
              <button 
                type="submit"
                className="bg-blue-600 hover:bg-blue-700 text-white font-medium px-8 py-3 rounded-r-lg"
              >
                Abone Ol
              </button>
            </form>
          </div>
        </div>

        {/* Copyright */}
        <div className="border-t border-gray-800 pt-8 text-center">
          <p className="text-gray-400">
            Â© {currentYear} SpotItForMe. TÃ¼m haklarÄ± saklÄ±dÄ±r.
          </p>
          <p className="text-gray-500 text-sm mt-2">
            Made with â¤ï¸ for people who search | v2.0
          </p>
          
          {/* Yeni Ã–zellikler Badge */}
          <div className="mt-4 flex flex-wrap justify-center gap-2">
            <span className="px-3 py-1 bg-blue-900 text-blue-200 rounded-full text-xs">
              ğŸ”¥ Yeni: KeÅŸfet
            </span>
            <span className="px-3 py-1 bg-green-900 text-green-200 rounded-full text-xs">
              ğŸ† Puan Sistemi
            </span>
            <span className="px-3 py-1 bg-purple-900 text-purple-200 rounded-full text-xs">
              ğŸª MaÄŸaza 2.0
            </span>
            <span className="px-3 py-1 bg-yellow-900 text-yellow-200 rounded-full text-xs">
              ğŸ‘ï¸ Nadir GÃ¶rdÃ¼m
            </span>
          </div>
        </div>
      </div>
    </footer>
  )
}

ğŸ“„ components/Header.tsx
ğŸ“Š 78 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/Header.tsx - Z-INDEX EKLENDÄ°
import Link from 'next/link'
import UserMenu from './UserMenu'

export default function Header() {
  return (
    <header className="bg-white shadow relative z-50"> {/* Z-INDEX EKLENDÄ° */}
      <div className="container-custom py-4">
        <div className="flex justify-between items-center">
          {/* Logo */}
          <div className="flex items-center space-x-2">
            <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
              <span className="text-white font-bold text-xl">S</span>
            </div>
            <div>
              <h1 className="text-2xl font-bold text-gray-900">SpotItForMe</h1>
              <p className="text-sm text-gray-600 hidden md:block">Toplulukla bulma platformu</p>
            </div>
          </div>

          {/* Navigation */}
          <nav className="hidden md:flex space-x-8">
            <Link href="/" className="text-gray-700 hover:text-blue-600 font-medium">
              Ana Sayfa
            </Link>
            <Link href="/spots" className="text-gray-700 hover:text-blue-600 font-medium">
              Spot'lar
            </Link>
            <Link href="/how-it-works" className="text-gray-700 hover:text-blue-600 font-medium">
              NasÄ±l Ã‡alÄ±ÅŸÄ±r?
            </Link>
            <Link href="/for-business" className="text-gray-700 hover:text-blue-600 font-medium">
              Ä°ÅŸletmeler Ä°Ã§in
            </Link>
            
            <Link href="/products" className="text-gray-700 hover:text-blue-600 font-medium">
              ÃœrÃ¼nler
            </Link>
          </nav>

          {/* Buttons */}
          <div className="flex items-center space-x-4">
            <UserMenu />
            <Link 
              href="/create-spot"
              className="btn-primary hidden md:inline-block"
            >
              Spot OluÅŸtur
            </Link>
          </div>
        </div>

        {/* Mobile Navigation */}
        <div className="md:hidden mt-4 flex justify-center space-x-6">
          <Link href="/spots" className="text-gray-700 hover:text-blue-600 text-sm">
            Spot'lar
          </Link>
          <Link href="/how-it-works" className="text-gray-700 hover:text-blue-600 text-sm">
            NasÄ±l Ã‡alÄ±ÅŸÄ±r?
          </Link>
          <Link href="/for-business" className="text-gray-700 hover:text-blue-600 text-sm">
            Ä°ÅŸletmeler
          </Link>
        </div>

        {/* Mobile Spot OluÅŸtur Butonu */}
        <div className="md:hidden mt-4">
          <Link 
            href="/create-spot"
            className="btn-primary w-full block text-center"
          >
            Ãœcretsiz Spot OluÅŸtur
          </Link>
        </div>
      </div>
    </header>
  )
}

ğŸ“„ components/SimpleTabs.tsx
ğŸ“Š 33 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/SimpleTabs.tsx - DÃœZELTÄ°LMÄ°Å
'use client'

interface Tab {
  id: string
  label: string
}

interface SimpleTabsProps {
  tabs: Tab[]
  activeTab: string
  onTabChange: (tabId: string) => void
}

export default function SimpleTabs({ tabs, activeTab, onTabChange }: SimpleTabsProps) {
  return (
    <div className="flex border-b">
      {tabs.map((tab) => (
        <button
          key={tab.id}
          onClick={() => onTabChange(tab.id)}
          className={`flex-1 py-4 text-center font-medium transition-colors ${
            activeTab === tab.id
              ? 'text-blue-600 border-b-2 border-blue-600'
              : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'
          }`}
        >
          {tab.label}
        </button>
      ))}
    </div>
  )
}

ğŸ“„ components/UserMenu.tsx
ğŸ“Š 147 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

'use client'

import { useEffect, useState } from 'react'
import { supabase } from '@/lib/supabase'
import AuthModal from './AuthModal'

interface User {
  id: string
  email: string
  name?: string
}

export default function UserMenu() {
  const [user, setUser] = useState<User | null>(null)
  const [showAuthModal, setShowAuthModal] = useState(false)
  const [showDropdown, setShowDropdown] = useState(false)

  useEffect(() => {
    // Mevcut kullanÄ±cÄ±yÄ± kontrol et
    checkUser()
    
    // Auth state deÄŸiÅŸikliklerini dinle
    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
      if (session?.user) {
        setUser({
          id: session.user.id,
          email: session.user.email!,
          name: session.user.user_metadata?.name,
        })
      } else {
        setUser(null)
      }
    })

    return () => subscription.unsubscribe()
  }, [])

  const checkUser = async () => {
    const { data: { user } } = await supabase.auth.getUser()
    if (user) {
      setUser({
        id: user.id,
        email: user.email!,
        name: user.user_metadata?.name,
      })
    }
  }

  const handleLogout = async () => {
    await supabase.auth.signOut()
    setUser(null)
    setShowDropdown(false)
  }

  if (!user) {
    return (
      <>
        <button
          onClick={() => setShowAuthModal(true)}
          className="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition duration-200"
        >
          GiriÅŸ Yap / KayÄ±t Ol
        </button>
        
        <AuthModal
          isOpen={showAuthModal}
          onClose={() => setShowAuthModal(false)}
        />
      </>
    )
  }

  return (
    <div className="relative">
      <button
        onClick={() => setShowDropdown(!showDropdown)}
        className="flex items-center space-x-3 bg-gray-100 hover:bg-gray-200 rounded-full pl-3 pr-4 py-2 transition duration-200"
      >
        <div className="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">
          {user.name?.[0]?.toUpperCase() || user.email[0].toUpperCase()}
        </div>
        <div className="text-left hidden md:block">
          <p className="font-medium text-sm">{user.name || 'KullanÄ±cÄ±'}</p>
          <p className="text-xs text-gray-500 truncate max-w-[120px]">{user.email}</p>
        </div>
      </button>

      {showDropdown && (
        <div className="absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border z-50">
          <div className="p-4 border-b">
            <p className="font-medium">{user.name || 'KullanÄ±cÄ±'}</p>
            <p className="text-sm text-gray-500 truncate">{user.email}</p>
          </div>
          
          <div className="p-2">
            <a
              href="/profile"
              className="flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 rounded-lg"
            >
              <span>ğŸ‘¤</span>
              <span>Profilim</span>
            </a>
            <a
              href="/my-spots"
              className="flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 rounded-lg"
            >
              <span>ğŸ“</span>
              <span>Spot'larÄ±m</span>
            </a>
            <a
              href="/help-given"
              className="flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 rounded-lg"
            >
              <span>ğŸ¤</span>
              <span>YardÄ±mlarÄ±m</span>
            </a>
            <a
              href="/settings"
              className="flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 rounded-lg"
            >
              <span>âš™ï¸</span>
              <span>Ayarlar</span>
            </a>
          </div>
          
          <div className="border-t p-2">
            <button
              onClick={handleLogout}
              className="flex items-center space-x-3 px-4 py-3 text-red-600 hover:bg-red-50 w-full rounded-lg"
            >
              <span>ğŸšª</span>
              <span>Ã‡Ä±kÄ±ÅŸ Yap</span>
            </button>
          </div>
        </div>
      )}

      {/* Dropdown dÄ±ÅŸÄ±na tÄ±klayÄ±nca kapat */}
      {showDropdown && (
        <div
          className="fixed inset-0 z-40"
          onClick={() => setShowDropdown(false)}
        />
      )}
    </div>
  )
}

ğŸ“„ components/UserProfileCard.tsx
ğŸ“Š 164 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// components/UserProfileCard.tsx
'use client'

import { useEffect, useState } from 'react'
import { supabase } from '@/lib/supabase'
import { GamificationEngine } from '@/lib/gamification/game-engine'

interface UserProfileCardProps {
  userId: string
  compact?: boolean
}

export default function UserProfileCard({ userId, compact = false }: UserProfileCardProps) {
  const [profile, setProfile] = useState<any>(null)
  const [reputation, setReputation] = useState<any>(null)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    fetchUserData()
  }, [userId])

  const fetchUserData = async () => {
    try {
      const [{ data: profileData }, { data: repData }] = await Promise.all([
        supabase.from('user_profiles').select('*').eq('id', userId).single(),
        supabase.from('user_reputation').select('*').eq('user_id', userId).single()
      ])

      setProfile(profileData)
      setReputation(repData)
    } catch (error) {
      console.error('Profil yÃ¼klenemedi:', error)
    } finally {
      setLoading(false)
    }
  }

  if (loading) {
    return <div className="animate-pulse bg-gray-200 rounded-lg h-32"></div>
  }

  const userLevel = GamificationEngine.LEVELS.find(l => l.level === reputation?.current_level) || GamificationEngine.LEVELS[0]
  const nextLevel = GamificationEngine.LEVELS.find(l => l.level === (reputation?.current_level || 0) + 1)

  return (
    <div className={`bg-white rounded-xl shadow-lg ${compact ? 'p-4' : 'p-6'}`}>
      {/* Ãœst KÄ±sÄ±m - Avatar ve Temel Bilgiler */}
      <div className="flex items-start space-x-4">
        <div className="relative">
          <div className={`w-${compact ? '12' : '16'} h-${compact ? '12' : '16'} rounded-full border-4`} 
               style={{ borderColor: userLevel.color }}>
            {profile?.avatar_url ? (
              <img src={profile.avatar_url} alt={profile.name} className="w-full h-full rounded-full" />
            ) : (
              <div className={`w-full h-full rounded-full bg-gradient-to-br from-${userLevel.color}-400 to-${userLevel.color}-600 flex items-center justify-center text-white font-bold text-${compact ? 'lg' : 'xl'}`}>
                {profile?.name?.[0] || 'K'}
              </div>
            )}
          </div>
          
          {/* Seviye GÃ¶stergesi */}
          {!compact && (
            <div className="absolute -bottom-2 -right-2 bg-white rounded-full p-1 shadow-lg">
              <div className={`w-8 h-8 rounded-full bg-gradient-to-br from-${userLevel.color}-400 to-${userLevel.color}-600 flex items-center justify-center text-white text-xs font-bold`}>
                {userLevel.level}
              </div>
            </div>
          )}
        </div>

        <div className="flex-1">
          <div className="flex items-center justify-between">
            <div>
              <h3 className={`font-bold ${compact ? 'text-lg' : 'text-xl'}`}>
                {profile?.name || 'KullanÄ±cÄ±'}
              </h3>
              <p className={`text-${userLevel.color}-600 font-medium ${compact ? 'text-sm' : ''}`}>
                {userLevel.name}
              </p>
            </div>
            
            {!compact && (
              <div className="text-right">
                <div className="text-2xl font-bold text-gray-900">
                  {reputation?.total_points || 0}
                </div>
                <div className="text-sm text-gray-500">Toplam Puan</div>
              </div>
            )}
          </div>

          {/* Progress Bar */}
          {!compact && nextLevel && (
            <div className="mt-4">
              <div className="flex justify-between text-sm mb-1">
                <span className="text-gray-600">Seviye {userLevel.level}</span>
                <span className="font-medium">
                  {reputation?.total_points || 0} / {nextLevel.minPoints} puan
                </span>
              </div>
              <div className="w-full bg-gray-200 rounded-full h-2">
                <div 
                  className="h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600"
                  style={{ 
                    width: `${Math.min(100, ((reputation?.total_points || 0) / nextLevel.minPoints) * 100)}%` 
                  }}
                ></div>
              </div>
              <p className="text-xs text-gray-500 mt-1">
                {nextLevel.minPoints - (reputation?.total_points || 0)} puan kaldÄ±: <strong>{nextLevel.name}</strong>
              </p>
            </div>
          )}
        </div>
      </div>

      {/* Rozetler */}
      {!compact && reputation?.badges && reputation.badges.length > 0 && (
        <div className="mt-6">
          <h4 className="font-medium text-gray-700 mb-3">KazanÄ±lan Rozetler</h4>
          <div className="flex flex-wrap gap-2">
            {reputation.badges.slice(0, 6).map((badgeId: string) => {
              const badge = Object.values(GamificationEngine.BADGES).find(b => b.id === badgeId)
              return badge ? (
                <div key={badge.id} className="tooltip" data-tip={badge.name}>
                  <div className="w-10 h-10 rounded-full bg-gradient-to-br from-yellow-100 to-yellow-300 flex items-center justify-center text-lg">
                    {badge.icon}
                  </div>
                </div>
              ) : null
            })}
            {reputation.badges.length > 6 && (
              <div className="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 font-medium">
                +{reputation.badges.length - 6}
              </div>
            )}
          </div>
        </div>
      )}

      {/* Ä°statistikler (Compact modda gizle) */}
      {!compact && (
        <div className="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4">
          <div className="text-center">
            <div className="text-2xl font-bold text-blue-600">{reputation?.total_sightings || 0}</div>
            <div className="text-sm text-gray-600">YardÄ±m</div>
          </div>
          <div className="text-center">
            <div className="text-2xl font-bold text-green-600">{reputation?.total_photos || 0}</div>
            <div className="text-sm text-gray-600">FotoÄŸraf</div>
          </div>
          <div className="text-center">
            <div className="text-2xl font-bold text-purple-600">{reputation?.total_rare_finds || 0}</div>
            <div className="text-sm text-gray-600">Nadir BuluÅŸ</div>
          </div>
          <div className="text-center">
            <div className="text-2xl font-bold text-orange-600">{reputation?.daily_streak || 0}</div>
            <div className="text-sm text-gray-600">GÃ¼n Streak</div>
          </div>
        </div>
      )}
    </div>
  )
}

====================================================================================================
ğŸ”§ UTILITY DOSYALARI
====================================================================================================

ğŸ“„ lib/email-server.ts
ğŸ“Š 332 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/email-server.ts
'use server'

import nodemailer from 'nodemailer'

// Email transporter oluÅŸtur
const transporter = nodemailer.createTransport({
  service: 'gmail',
  auth: {
    user: process.env.GMAIL_USER,
    pass: process.env.GMAIL_APP_PASS
  }
})

// Server Action: HoÅŸgeldin emaili gÃ¶nder
export async function sendWelcomeEmail(to: string, name: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe" <${process.env.GMAIL_USER}>`,
      to,
      subject: `ğŸ‰ SpotItForMe TopluluÄŸuna HoÅŸ Geldin ${name}!`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ¤ HoÅŸ Geldiniz!</h1>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba <strong>${name}</strong>,</p>
            <p>SpotItForMe topluluÄŸuna katÄ±ldÄ±ÄŸÄ±nÄ±z iÃ§in Ã§ok mutluyuz! ğŸ‰</p>
            
            <div style="background: #faf5ff; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸš€ Hemen BaÅŸlayÄ±n:</strong></p>
              <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 15px;">
                <a href="${siteUrl}/create-spot" style="background: #8b5cf6; color: white; padding: 12px; text-align: center; border-radius: 8px; text-decoration: none; font-weight: bold;">
                  Ä°lk Spot'unu OluÅŸtur
                </a>
                <a href="${siteUrl}/spots" style="background: #f1f5f9; color: #475569; padding: 12px; text-align: center; border-radius: 8px; text-decoration: none;">
                  Spot'larÄ± KeÅŸfet
                </a>
                <a href="${siteUrl}/how-it-works" style="background: #f1f5f9; color: #475569; padding: 12px; text-align: center; border-radius: 8px; text-decoration: none;">
                  NasÄ±l Ã‡alÄ±ÅŸÄ±r?
                </a>
              </div>
            </div>

            <p><strong>âœ¨ Platform Ã–zellikleri:</strong></p>
            <ul style="padding-left: 20px;">
              <li>âœ… Ãœcretsiz spot oluÅŸturma</li>
              <li>âœ… Binlerce aktif topluluk Ã¼yesi</li>
              <li>âœ… AnlÄ±k yardÄ±m bildirimleri</li>
              <li>âœ… Mobil uyumlu tasarÄ±m</li>
              <li>âœ… GÃ¼venli ve gizli</li>
            </ul>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              SorularÄ±nÄ±z iÃ§in: <a href="mailto:${process.env.GMAIL_USER}" style="color: #6b7280;">${process.env.GMAIL_USER}</a><br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a>
            </p>
          </div>
        </div>
      `,
      text: `SpotItForMe'ye HoÅŸ Geldiniz!\n\nMerhaba ${name},\n\nSpotItForMe topluluÄŸuna katÄ±ldÄ±ÄŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz.\n\nHemen baÅŸlayÄ±n: ${siteUrl}/create-spot\n\nÄ°yi kullanÄ±mlar!`
    })

    console.log('âœ… HoÅŸgeldin emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ HoÅŸgeldin emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}

// Server Action: MaÄŸaza kayÄ±t emaili gÃ¶nder
export async function sendBusinessRegistrationEmail(to: string, shopName: string, ownerId: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForme Ä°ÅŸletme" <${process.env.GMAIL_USER}>`,
      to,
      cc: process.env.ADMIN_EMAIL,
      subject: `ğŸª MaÄŸaza KaydÄ±nÄ±z AlÄ±ndÄ±: ${shopName}`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸª MaÄŸaza KaydÄ±nÄ±z AlÄ±ndÄ±!</h1>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p><strong>${shopName}</strong> maÄŸazanÄ±z iÃ§in kaydÄ±nÄ±z baÅŸarÄ±yla alÄ±ndÄ±! ğŸ‰</p>
            
            <div style="background: #f0fdf4; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #10b981;">
              <p><strong>ğŸ¯ Sonraki AdÄ±mlar:</strong></p>
              <ol style="margin-left: 20px;">
                <li>MaÄŸaza profilinizi tamamlayÄ±n</li>
                <li>Ä°lk Ã¼rÃ¼nlerinizi ekleyin</li>
                <li>Spot'lara cevap verin</li>
                <li>Premium paketlere geÃ§erek limitlerinizi artÄ±rÄ±n</li>
              </ol>
            </div>

            <div style="text-align: center; margin: 30px 0;">
              <a href="${siteUrl}/shop/dashboard" style="background: #10b981; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold; margin: 5px;">
                MaÄŸaza Paneline Git
              </a>
              <a href="${siteUrl}/create-spot" style="background: #3b82f6; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold; margin: 5px;">
                Ä°lk Spot'u OluÅŸtur
              </a>
            </div>

            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸ“Š MaÄŸaza Ä°statistikleriniz:</strong></p>
              <p>âœ… <strong>Paket:</strong> Ãœcretsiz BaÅŸlangÄ±Ã§</p>
              <p>âœ… <strong>Resim Limiti:</strong> 20 adet Ã¼cretsiz</p>
              <p>âœ… <strong>Spot Limiti:</strong> SÄ±nÄ±rsÄ±z</p>
              <p>âœ… <strong>Destek:</strong> Email ile 7/24</p>
            </div>

            <p><strong>ğŸ“ Ä°letiÅŸim:</strong></p>
            <p>Herhangi bir sorunuz iÃ§in: <a href="mailto:${process.env.GMAIL_USER}" style="color: #3b82f6;">${process.env.GMAIL_USER}</a></p>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              SpotItForme Ä°ÅŸletme Ekibi<br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a>
            </p>
          </div>
        </div>
      `,
      text: `MaÄŸaza KaydÄ±\n\n${shopName} maÄŸazanÄ±z iÃ§in kaydÄ±nÄ±z alÄ±ndÄ±.\n\nMaÄŸaza Paneliniz: ${siteUrl}/shop/dashboard\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… MaÄŸaza kayÄ±t emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ MaÄŸaza kayÄ±t emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}
// Server Action: Åifre sÄ±fÄ±rlama emaili gÃ¶nder
export async function sendPasswordResetEmail(to: string, resetLink: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe Åifre SÄ±fÄ±rlama" <${process.env.GMAIL_USER}>`,
      to,
      subject: 'ğŸ” SpotItForMe Åifre SÄ±fÄ±rlama Ä°steÄŸi',
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ” Åifre SÄ±fÄ±rlama</h1>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p>SpotItForMe hesabÄ±nÄ±z iÃ§in ÅŸifre sÄ±fÄ±rlama talebinde bulundunuz.</p>
            
            <div style="background: #fef2f2; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ef4444;">
              <p><strong>âš ï¸ GÃ¼venlik UyarÄ±sÄ±:</strong></p>
              <p>Bu isteÄŸi siz yapmadÄ±ysanÄ±z, bu email'i gÃ¶rmezden gelebilirsiniz.</p>
              <p>HesabÄ±nÄ±zla ilgili endiÅŸeleriniz varsa lÃ¼tfen bizimle iletiÅŸime geÃ§in.</p>
            </div>

            <div style="text-align: center; margin: 30px 0;">
              <a href="${resetLink}" style="background: #ef4444; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold;">
                Åifremi SÄ±fÄ±rla
              </a>
            </div>

            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸ”’ GÃ¼venlik Ä°puÃ§larÄ±:</strong></p>
              <ul style="margin-left: 20px; color: #4b5563;">
                <li>Åifrenizi kimseyle paylaÅŸmayÄ±n</li>
                <li>Link'e tÄ±kladÄ±ktan sonra yeni bir ÅŸifre belirleyin</li>
                <li>GÃ¼Ã§lÃ¼ bir ÅŸifre kullanÄ±n (harf, rakam, Ã¶zel karakter)</li>
                <li>Bu link 24 saat sonra geÃ§ersiz olacaktÄ±r</li>
              </ul>
            </div>

            <p><strong>ğŸ“ Link Ã§alÄ±ÅŸmÄ±yor mu?</strong></p>
            <p>EÄŸer buton Ã§alÄ±ÅŸmÄ±yorsa, aÅŸaÄŸÄ±daki linki tarayÄ±cÄ±nÄ±za kopyalayÄ±p yapÄ±ÅŸtÄ±rÄ±n:</p>
            <p style="word-break: break-all; background: #f3f4f6; padding: 10px; border-radius: 5px; font-size: 12px;">
              ${resetLink}
            </p>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              Bu email SpotItForMe platformundan otomatik olarak gÃ¶nderilmiÅŸtir.<br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a> | 
              <a href="mailto:${process.env.GMAIL_USER}" style="color: #6b7280;">YardÄ±m</a>
            </p>
          </div>
        </div>
      `,
      text: `SpotItForMe Åifre SÄ±fÄ±rlama\n\nÅifrenizi sÄ±fÄ±rlamak iÃ§in bu linke tÄ±klayÄ±n: ${resetLink}\n\nBu link 24 saat geÃ§erlidir.\n\nEÄŸer bu isteÄŸi siz yapmadÄ±ysanÄ±z, bu email'i gÃ¶rmezden gelebilirsiniz.\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… Åifre sÄ±fÄ±rlama emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Åifre sÄ±fÄ±rlama emaili gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ Åifre sÄ±fÄ±rlama emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Åifre sÄ±fÄ±rlama emaili gÃ¶nderilemedi' }
  }
}
// Server Action: Spot oluÅŸturma emaili
export async function sendSpotCreatedEmail(to: string, spotTitle: string, spotId: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe" <${process.env.GMAIL_USER}>`,
      to,
      subject: `ğŸ‰ Spot OluÅŸturuldu: ${spotTitle}`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ‰ Spot'unuz OluÅŸturuldu!</h1>
          </div>
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p><strong>"${spotTitle}"</strong> baÅŸlÄ±klÄ± spot'unuz baÅŸarÄ±yla oluÅŸturuldu.</p>
            
            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #3b82f6;">
              <p><strong>Spot DetaylarÄ±:</strong></p>
              <p>ğŸ“Œ <strong>BaÅŸlÄ±k:</strong> ${spotTitle}</p>
              <p>ğŸ”— <strong>Spot Linki:</strong> <a href="${siteUrl}/spots/${spotId}" style="color: #3b82f6;">${siteUrl}/spots/${spotId}</a></p>
              <p>â° <strong>Tarih:</strong> ${new Date().toLocaleDateString('tr-TR')}</p>
            </div>

            <p>Spot'unuz ÅŸu anda topluluÄŸumuzun yardÄ±mÄ±na sunuldu. Binlerce kullanÄ±cÄ± ÅŸehirlerinde gezerken sizin iÃ§in gÃ¶z kulak olacak.</p>
            
            <div style="text-align: center; margin: 30px 0;">
              <a href="${siteUrl}/spots/${spotId}" style="background: #3b82f6; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold;">
                Spot'u GÃ¶rÃ¼ntÃ¼le
              </a>
            </div>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              Bu e-posta SpotItForMe platformundan otomatik olarak gÃ¶nderilmiÅŸtir.<br/>
              <a href="${siteUrl}/unsubscribe" style="color: #6b7280;">Bildirimleri devre dÄ±ÅŸÄ± bÄ±rak</a>
            </p>
          </div>
        </div>
      `,
      text: `SpotItForMe - Spot OluÅŸturuldu\n\n"${spotTitle}" baÅŸlÄ±klÄ± spot'unuz baÅŸarÄ±yla oluÅŸturuldu.\n\nSpot Linki: ${siteUrl}/spots/${spotId}\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… Spot oluÅŸturma emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ Email gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}

// Server Action: YardÄ±m bildirimi emaili
export async function sendSightingNotificationEmail(
  to: string, 
  spotTitle: string, 
  spotterName: string,
  spotId: string
): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe" <${process.env.GMAIL_USER}>`,
      to,
      subject: `ğŸ¯ YENÄ° YARDIM: "${spotTitle}" iÃ§in bildirim!`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ¯ YENÄ° YARDIM BÄ°LDÄ°RÄ°MÄ°!</h1>
            <p style="color: white; opacity: 0.9; margin-top: 10px;">Birisi aradÄ±ÄŸÄ±nÄ±z Ã¼rÃ¼nÃ¼ gÃ¶rdÃ¼!</p>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p><strong>${spotterName}</strong> adlÄ± kullanÄ±cÄ±, <strong>"${spotTitle}"</strong> spot'unuz iÃ§in yardÄ±m bildirimi gÃ¶nderdi! ğŸ‰</p>
            
            <div style="background: #fffbeb; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #f59e0b;">
              <p><strong>ğŸ‰ MÃ¼jdeli Haber!</strong></p>
              <p>Bir topluluk Ã¼yemiz aradÄ±ÄŸÄ±nÄ±z Ã¼rÃ¼nÃ¼ gÃ¶rdÃ¼ÄŸÃ¼nÃ¼ bildirdi.</p>
              <p>Hemen spot sayfasÄ±na giderek detaylarÄ± gÃ¶rÃ¼ntÃ¼leyin!</p>
            </div>

            <div style="text-align: center; margin: 30px 0;">
              <a href="${siteUrl}/spots/${spotId}" style="background: #f59e0b; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold;">
                YardÄ±m DetaylarÄ±nÄ± GÃ¶rÃ¼ntÃ¼le
              </a>
            </div>

            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸ“‹ Sonraki AdÄ±mlar:</strong></p>
              <ol style="margin-left: 20px;">
                <li>YardÄ±m detaylarÄ±nÄ± inceleyin</li>
                <li>Gerekirse spotter ile iletiÅŸime geÃ§in</li>
                <li>ÃœrÃ¼nÃ¼ bulduysanÄ±z spot durumunu "Bulundu" olarak gÃ¼ncelleyin</li>
                <li>YardÄ±m eden kullanÄ±cÄ±ya teÅŸekkÃ¼r edin</li>
              </ol>
            </div>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              TopluluÄŸumuzun yardÄ±mÄ±yla kayÄ±p Ã¼rÃ¼nlerinizi bulmanÄ±zÄ± umuyoruz!<br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a>
            </p>
          </div>
        </div>
      `,
      text: `Yeni YardÄ±m Bildirimi!\n\n${spotterName}, "${spotTitle}" spot'unuz iÃ§in yardÄ±m bildirimi gÃ¶nderdi.\n\nDetaylar iÃ§in: ${siteUrl}/spots/${spotId}\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… YardÄ±m bildirimi emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ YardÄ±m bildirimi emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}

ğŸ“„ lib/gamification/game-engine.ts
ğŸ“Š 32 satÄ±r
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/gamification/game-engine.ts
export class GamificationEngine {
  // ROZET SÄ°STEMÄ°
  static BADGES = {
    FIRST_SIGHTING: { id: 'first-sighting', name: 'Ä°lk Ä°z', icon: 'ğŸ‘ï¸', points: 10 },
    HELPER_LEVEL_1: { id: 'helper-1', name: 'YardÄ±msever', icon: 'ğŸ¤', points: 50 },
    RARE_FINDER: { id: 'rare-finder', name: 'Nadir AvcÄ±sÄ±', icon: 'ğŸ”', points: 100 },
    QUICK_RESPONSE: { id: 'quick-response', name: 'HÄ±zlÄ± Tepki', icon: 'âš¡', points: 25 },
    SOCIAL_INFLUENCER: { id: 'social-influencer', name: 'Topluluk Lideri', icon: 'ğŸ‘‘', points: 500 }
  }

  // SEVÄ°YE SÄ°STEMÄ°
  static LEVELS = [
    { level: 1, name: 'Yeni GÃ¶zcÃ¼', minPoints: 0, color: 'gray' },
    { level: 2, name: 'Aktif AvcÄ±', minPoints: 100, color: 'blue' },
    { level: 3, name: 'Uzman Bulucu', minPoints: 500, color: 'green' },
    { level: 4, name: 'Master Dedektif', minPoints: 2000, color: 'purple' },
    { level: 5, name: 'Efsane AvcÄ±', minPoints: 5000, color: 'gold' }
  ]

  // PUAN SÄ°STEMÄ°
  static POINT_RULES = {
    SIGHTING_WITHOUT_PHOTO: 5,
    SIGHTING_WITH_PHOTO: 15,
    SIGHTING_WITH_PRICE: 10,
    RARE_ITEM_REPORT: 25,
    PURCHASE_FACILITATED: 50,
    DAILY_LOGIN_STREAK: [5, 10, 15, 20, 25], // 5 gÃ¼n Ã¼st Ã¼ste
    SOCIAL_SHARE: 10,
    PROFILE_COMPLETION: 30
  }
}

====================================================================================================
ğŸ“Š Ã–ZET
====================================================================================================
Toplam Dosya: 17
App SayfalarÄ±: 7
App Layout'larÄ±: 0
DiÄŸer App: 0
Component'ler: 8
Utility'ler: 2
DiÄŸer: 0
Toplam SatÄ±r: 4803

ğŸ“‹ BULUNAN SAYFA ROUTE'LARI:
  â€¢ /admin/ads
  â€¢ /admin/ads/create-manual
  â€¢ /admin/adsense
  â€¢ /admin/test
  â€¢ /admin/users
  â€¢ /profile
  â€¢ /profile/[id]
====================================================================================================