================================================================================
ğŸ“¦ LIB DÄ°ZÄ°NÄ° - TÃœM KOD DOSYALARI
ğŸ“… 15.02.2026 03:40:23
ğŸ“Š Toplam Dosya: 22
================================================================================


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ analytics\events.ts
ğŸ“Š 9 satÄ±r | 0.27 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/analytics/events.ts
export const GAMIFICATION_EVENTS = {
  POINTS_EARNED: 'points_earned',
  BADGE_EARNED: 'badge_earned',
  LEVEL_UP: 'level_up',
  DAILY_STREAK: 'daily_streak',
  CHALLENGE_COMPLETED: 'challenge_completed',
  LEADERBOARD_VIEW: 'leaderboard_view'
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ analytics\social-events.ts
ğŸ“Š 17 satÄ±r | 0.51 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/analytics/social-events.ts
export const SOCIAL_EVENTS = {
  POST_CREATED: 'post_created',
  POST_LIKED: 'post_liked',
  POST_SHARED: 'post_shared',
  POST_VIEWED: 'post_viewed',
  COMMENT_ADDED: 'comment_added',
  USER_FOLLOWED: 'user_followed',
  HASHTAG_CLICKED: 'hashtag_clicked',
  STORY_VIEWED: 'story_viewed',
  NOTIFICATION_CLICKED: 'notification_clicked',
  
  // Engagement metrics
  SESSION_DURATION: 'session_duration',
  SCROLL_DEPTH: 'scroll_depth',
  RETURN_VISIT: 'return_visit'
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ email-client.ts
ğŸ“Š 94 satÄ±r | 3.17 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/email-client.ts - YENÄ° VE BASÄ°T
const API_BASE = process.env.NEXT_PUBLIC_API_URL || ''

// TÃœM email fonksiyonlarÄ± iÃ§in ortak gÃ¶nderici
async function sendEmailAPI(to: string, subject: string, html: string): Promise<boolean> {
  console.log(`ğŸ“¤ Email gÃ¶nderiliyor: ${to}`)
  
  try {
    const response = await fetch('/api/email/send', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ to, subject, html })
    })
    
    if (!response.ok) {
      console.error('âŒ API response not OK:', response.status)
      return false
    }
    
    const result = await response.json()
    console.log('ğŸ“¨ API Response:', result)
    
    return result.success === true
    
  } catch (error) {
    console.error('âŒ Email API Ã§aÄŸrÄ± hatasÄ±:', error)
    
    // Development'da her zaman baÅŸarÄ±lÄ±
    if (process.env.NODE_ENV === 'development') {
      console.log('ğŸ”§ DEV MOD: Simulating success')
      return true
    }
    
    return false
  }
}

// 1. HoÅŸgeldin Email'i
export async function sendWelcomeEmail(to: string, name: string): Promise<boolean> {
  const subject = `ğŸ¤ HoÅŸ Geldin ${name}! - SpotItForMe`
  const html = `
    <h1>HoÅŸ Geldin ${name}! ğŸ‘‹</h1>
    <p>SpotItForMe topluluÄŸuna katÄ±ldÄ±ÄŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz.</p>
    <p>ArtÄ±k kayÄ±p Ã¼rÃ¼nlerinizi bulabilir veya baÅŸkalarÄ±na yardÄ±m edebilirsiniz.</p>
    <p><strong>App Password Test:</strong> ahfd vrzy kuen opmj</p>
  `
  
  return sendEmailAPI(to, subject, html)
}

// 2. Spot OluÅŸturma Email'i
export async function sendSpotCreatedEmail(to: string, spotTitle: string, spotId: string): Promise<boolean> {
  const subject = `ğŸ‰ Spot OluÅŸturuldu: "${spotTitle}"`
  const html = `
    <h1>Spot'unuz OluÅŸturuldu! ğŸ¯</h1>
    <p><strong>"${spotTitle}"</strong> baÅŸlÄ±klÄ± spot'unuz baÅŸarÄ±yla oluÅŸturuldu.</p>
    <p>TopluluÄŸumuz ÅŸimdi bu Ã¼rÃ¼nÃ¼ aramaya baÅŸladÄ±!</p>
    <p>Spot ID: ${spotId}</p>
  `
  
  return sendEmailAPI(to, subject, html)
}

// 3. YardÄ±m Bildirimi Email'i
export async function sendSightingNotificationEmail(
  to: string, 
  spotTitle: string, 
  spotterName: string,
  spotId: string
): Promise<boolean> {
  const subject = `ğŸ¯ Yeni YardÄ±m: "${spotTitle}" Ã¼rÃ¼nÃ¼ gÃ¶rÃ¼ldÃ¼!`
  const html = `
    <h1>ğŸ‰ MÃ¼jdeli Haber!</h1>
    <p><strong>${spotterName}</strong> adlÄ± kullanÄ±cÄ±, aradÄ±ÄŸÄ±nÄ±z Ã¼rÃ¼nÃ¼ gÃ¶rdÃ¼ÄŸÃ¼nÃ¼ bildirdi!</p>
    <p>ÃœrÃ¼n: <strong>"${spotTitle}"</strong></p>
    <p>Hemen uygulamaya gidip detaylarÄ± gÃ¶rÃ¼ntÃ¼leyin.</p>
  `
  
  return sendEmailAPI(to, subject, html)
}

// 4. Åifre SÄ±fÄ±rlama Email'i
export async function sendPasswordResetEmail(to: string, resetLink: string): Promise<boolean> {
  const subject = 'ğŸ” SpotItForMe - Åifre SÄ±fÄ±rlama'
  const html = `
    <h1>Åifre SÄ±fÄ±rlama</h1>
    <p>Åifrenizi sÄ±fÄ±rlamak iÃ§in aÅŸaÄŸÄ±daki linke tÄ±klayÄ±n:</p>
    <p><a href="${resetLink}">${resetLink}</a></p>
    <p>Bu link 1 saat geÃ§erlidir.</p>
    <p>EÄŸer bu talebi siz yapmadÄ±ysanÄ±z, bu emaili gÃ¶rmezden gelebilirsiniz.</p>
  `
  
  return sendEmailAPI(to, subject, html)
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ email-hooks.ts
ğŸ“Š 159 satÄ±r | 4.49 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/email-hooks.ts
import { emailService } from './email-service'
import { supabase } from './supabase'

// 1. KullanÄ±cÄ± kayÄ±t olduÄŸunda
export async function onUserRegistered(userId: string) {
  try {
    const { data: user } = await supabase.auth.admin.getUserById(userId)
    
    if (user?.user?.email) {
      await emailService.sendWelcomeEmail(
        user.user.email,
        user.user.user_metadata?.name || 'KullanÄ±cÄ±'
      )
    }
  } catch (error) {
    console.error('KullanÄ±cÄ± kayÄ±t email hatasÄ±:', error)
  }
}

// 2. Spot oluÅŸturulduÄŸunda
export async function onSpotCreated(spotId: string) {
  try {
    // Spot bilgilerini getir
    const { data: spot } = await supabase
      .from('spots')
      .select('*, user:user_id(email)')
      .eq('id', spotId)
      .single()

    if (spot?.user?.email && spot.title) {
      await emailService.sendSpotCreatedEmail(
        spot.user.email,
        spot.title,
        spotId
      )
    }
  } catch (error) {
    console.error('Spot oluÅŸturma email hatasÄ±:', error)
  }
}

// 3. YardÄ±m bildirimi geldiÄŸinde
export async function onSightingCreated(sightingId: string) {
  try {
    // Sightings ve spot bilgilerini getir
    const { data: sighting } = await supabase
      .from('sightings')
      .select(`
        *,
        spot:spots!inner(title, user_id),
        spotter:spotter_id(email, user_metadata)
      `)
      .eq('id', sightingId)
      .single()

    if (sighting?.spot?.user_id && sighting.spotter?.email) {
      // Spot sahibinin email'ini al
      const { data: spotOwner } = await supabase.auth.admin.getUserById(sighting.spot.user_id)
      
      if (spotOwner?.user?.email && sighting.spot.title) {
        await emailService.sendSightingNotification(
          spotOwner.user.email,
          sighting.spot.title,
          sighting.spotter.user_metadata?.name || sighting.spotter.email,
          sighting.spot_id,
          sighting.notes,
          sighting.price?.toString(),
          sighting.location_description
        )
      }
    }
  } catch (error) {
    console.error('YardÄ±m bildirimi email hatasÄ±:', error)
  }
}

// 4. Spot bulunduÄŸunda
export async function onSpotFound(spotId: string) {
  try {
    const { data: spot } = await supabase
      .from('spots')
      .select('*, user:user_id(email)')
      .eq('id', spotId)
      .single()

    if (spot?.user?.email && spot.title) {
      // KullanÄ±cÄ±nÄ±n toplam spot sayÄ±sÄ±nÄ± getir
      const { count: totalSpots } = await supabase
        .from('spots')
        .select('*', { count: 'exact', head: true })
        .eq('user_id', spot.user_id)

      const { count: foundSpots } = await supabase
        .from('spots')
        .select('*', { count: 'exact', head: true })
        .eq('user_id', spot.user_id)
        .eq('status', 'found')

      await emailService.sendSpotFoundEmail(
        spot.user.email,
        spot.title,
        spotId,
        undefined, // foundBy (opsiyonel)
        totalSpots || 0,
        foundSpots || 0
      )
    }
  } catch (error) {
    console.error('Spot bulundu email hatasÄ±:', error)
  }
}

// 5. Ä°ÅŸletme kaydÄ± olduÄŸunda
export async function onBusinessRegistered(shopId: string) {
  try {
    const { data: shop } = await supabase
      .from('shops')
      .select('*, owner:owner_id(email, user_metadata)')
      .eq('id', shopId)
      .single()

    if (shop?.owner?.email && shop.shop_name) {
      await emailService.sendBusinessWelcomeEmail(
        shop.owner.email,
        shop.shop_name,
        shop.owner.user_metadata?.name || 'Ä°ÅŸletme Sahibi',
        shop.subscription_type || 'free',
        `${shop.free_images_used || 0}/${shop.total_images || 20}`
      )
    }
  } catch (error) {
    console.error('Ä°ÅŸletme kayÄ±t email hatasÄ±:', error)
  }
}

// 6. Åifre sÄ±fÄ±rlama
export async function onPasswordResetRequested(email: string, resetLink: string) {
  try {
    await emailService.sendPasswordResetEmail(email, resetLink)
  } catch (error) {
    console.error('Åifre sÄ±fÄ±rlama email hatasÄ±:', error)
  }
}

// 7. Admin alert
export async function sendSystemAlert(title: string, details: any) {
  try {
    const adminEmails = process.env.ADMIN_EMAILS?.split(',') || ['admin@spotitforme.com']
    
    await emailService.sendAdminAlert(
      title,
      details,
      adminEmails
    )
  } catch (error) {
    console.error('Admin alert email hatasÄ±:', error)
  }
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ email-queue.ts
ğŸ“Š 140 satÄ±r | 3.71 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/email-queue.ts
import { supabase } from './supabase'

export interface EmailQueueItem {
  id?: string
  type: string
  recipient: string
  subject: string
  data: any
  status: 'pending' | 'processing' | 'sent' | 'failed'
  attempts: number
  created_at?: string
  sent_at?: string
}

export class EmailQueue {
  static async addToQueue(item: Omit<EmailQueueItem, 'status' | 'attempts'>) {
    try {
      const { data, error } = await supabase
        .from('email_queue')
        .insert({
          type: item.type,
          recipient: item.recipient,
          subject: item.subject,
          data: item.data,
          status: 'pending',
          attempts: 0
        })
        .select()
        .single()

      if (error) throw error
      return data
    } catch (error) {
      console.error('Email kuyruÄŸa eklenemedi:', error)
      return null
    }
  }

  static async processQueue(limit: number = 50) {
    try {
      // Bekleyen email'leri al
      const { data: pendingEmails } = await supabase
        .from('email_queue')
        .select('*')
        .eq('status', 'pending')
        .lt('attempts', 3)
        .limit(limit)
        .order('created_at', { ascending: true })

      if (!pendingEmails || pendingEmails.length === 0) {
        return { processed: 0, success: 0, failed: 0 }
      }

      let success = 0
      let failed = 0

      for (const email of pendingEmails) {
        try {
          // Durumu processing'e Ã§evir
          await supabase
            .from('email_queue')
            .update({ status: 'processing' })
            .eq('id', email.id)

          // Email gÃ¶nder
          const response = await fetch('/api/send-email', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              to: email.recipient,
              template: email.type,
              data: email.data,
              subject: email.subject
            })
          })

          const result = await response.json()

          if (response.ok) {
            // BaÅŸarÄ±lÄ±
            await supabase
              .from('email_queue')
              .update({
                status: 'sent',
                sent_at: new Date().toISOString()
              })
              .eq('id', email.id)
            success++
          } else {
            // BaÅŸarÄ±sÄ±z
            await supabase
              .from('email_queue')
              .update({
                attempts: email.attempts + 1,
                status: email.attempts >= 2 ? 'failed' : 'pending'
              })
              .eq('id', email.id)
            failed++
          }

          // Rate limiting
          if ((success + failed) % 10 === 0) {
            await new Promise(resolve => setTimeout(resolve, 1000))
          }

        } catch (error) {
          console.error(`Email iÅŸleme hatasÄ± (${email.id}):`, error)
          failed++
          
          await supabase
            .from('email_queue')
            .update({
              attempts: email.attempts + 1,
              status: 'failed'
            })
            .eq('id', email.id)
        }
      }

      return { processed: pendingEmails.length, success, failed }
    } catch (error) {
      console.error('Email queue iÅŸleme hatasÄ±:', error)
      return { processed: 0, success: 0, failed: 0 }
    }
  }

  static async getQueueStats() {
    try {
      const { data, error } = await supabase
        .rpc('get_email_queue_stats')

      if (error) throw error
      return data
    } catch (error) {
      console.error('Queue stats alÄ±namadÄ±:', error)
      return null
    }
  }
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ email-server.ts
ğŸ“Š 332 satÄ±r | 17.70 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/email-server.ts
'use server'

import nodemailer from 'nodemailer'

// Email transporter oluÅŸtur
const transporter = nodemailer.createTransport({
  service: 'gmail',
  auth: {
    user: process.env.GMAIL_USER,
    pass: process.env.GMAIL_APP_PASS
  }
})

// Server Action: HoÅŸgeldin emaili gÃ¶nder
export async function sendWelcomeEmail(to: string, name: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe" <${process.env.GMAIL_USER}>`,
      to,
      subject: `ğŸ‰ SpotItForMe TopluluÄŸuna HoÅŸ Geldin ${name}!`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ¤ HoÅŸ Geldiniz!</h1>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba <strong>${name}</strong>,</p>
            <p>SpotItForMe topluluÄŸuna katÄ±ldÄ±ÄŸÄ±nÄ±z iÃ§in Ã§ok mutluyuz! ğŸ‰</p>
            
            <div style="background: #faf5ff; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸš€ Hemen BaÅŸlayÄ±n:</strong></p>
              <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 15px;">
                <a href="${siteUrl}/create-spot" style="background: #8b5cf6; color: white; padding: 12px; text-align: center; border-radius: 8px; text-decoration: none; font-weight: bold;">
                  Ä°lk Spot'unu OluÅŸtur
                </a>
                <a href="${siteUrl}/spots" style="background: #f1f5f9; color: #475569; padding: 12px; text-align: center; border-radius: 8px; text-decoration: none;">
                  Spot'larÄ± KeÅŸfet
                </a>
                <a href="${siteUrl}/how-it-works" style="background: #f1f5f9; color: #475569; padding: 12px; text-align: center; border-radius: 8px; text-decoration: none;">
                  NasÄ±l Ã‡alÄ±ÅŸÄ±r?
                </a>
              </div>
            </div>

            <p><strong>âœ¨ Platform Ã–zellikleri:</strong></p>
            <ul style="padding-left: 20px;">
              <li>âœ… Ãœcretsiz spot oluÅŸturma</li>
              <li>âœ… Binlerce aktif topluluk Ã¼yesi</li>
              <li>âœ… AnlÄ±k yardÄ±m bildirimleri</li>
              <li>âœ… Mobil uyumlu tasarÄ±m</li>
              <li>âœ… GÃ¼venli ve gizli</li>
            </ul>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              SorularÄ±nÄ±z iÃ§in: <a href="mailto:${process.env.GMAIL_USER}" style="color: #6b7280;">${process.env.GMAIL_USER}</a><br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a>
            </p>
          </div>
        </div>
      `,
      text: `SpotItForMe'ye HoÅŸ Geldiniz!\n\nMerhaba ${name},\n\nSpotItForMe topluluÄŸuna katÄ±ldÄ±ÄŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz.\n\nHemen baÅŸlayÄ±n: ${siteUrl}/create-spot\n\nÄ°yi kullanÄ±mlar!`
    })

    console.log('âœ… HoÅŸgeldin emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ HoÅŸgeldin emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}

// Server Action: MaÄŸaza kayÄ±t emaili gÃ¶nder
export async function sendBusinessRegistrationEmail(to: string, shopName: string, ownerId: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForme Ä°ÅŸletme" <${process.env.GMAIL_USER}>`,
      to,
      cc: process.env.ADMIN_EMAIL,
      subject: `ğŸª MaÄŸaza KaydÄ±nÄ±z AlÄ±ndÄ±: ${shopName}`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸª MaÄŸaza KaydÄ±nÄ±z AlÄ±ndÄ±!</h1>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p><strong>${shopName}</strong> maÄŸazanÄ±z iÃ§in kaydÄ±nÄ±z baÅŸarÄ±yla alÄ±ndÄ±! ğŸ‰</p>
            
            <div style="background: #f0fdf4; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #10b981;">
              <p><strong>ğŸ¯ Sonraki AdÄ±mlar:</strong></p>
              <ol style="margin-left: 20px;">
                <li>MaÄŸaza profilinizi tamamlayÄ±n</li>
                <li>Ä°lk Ã¼rÃ¼nlerinizi ekleyin</li>
                <li>Spot'lara cevap verin</li>
                <li>Premium paketlere geÃ§erek limitlerinizi artÄ±rÄ±n</li>
              </ol>
            </div>

            <div style="text-align: center; margin: 30px 0;">
              <a href="${siteUrl}/shop/dashboard" style="background: #10b981; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold; margin: 5px;">
                MaÄŸaza Paneline Git
              </a>
              <a href="${siteUrl}/create-spot" style="background: #3b82f6; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold; margin: 5px;">
                Ä°lk Spot'u OluÅŸtur
              </a>
            </div>

            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸ“Š MaÄŸaza Ä°statistikleriniz:</strong></p>
              <p>âœ… <strong>Paket:</strong> Ãœcretsiz BaÅŸlangÄ±Ã§</p>
              <p>âœ… <strong>Resim Limiti:</strong> 20 adet Ã¼cretsiz</p>
              <p>âœ… <strong>Spot Limiti:</strong> SÄ±nÄ±rsÄ±z</p>
              <p>âœ… <strong>Destek:</strong> Email ile 7/24</p>
            </div>

            <p><strong>ğŸ“ Ä°letiÅŸim:</strong></p>
            <p>Herhangi bir sorunuz iÃ§in: <a href="mailto:${process.env.GMAIL_USER}" style="color: #3b82f6;">${process.env.GMAIL_USER}</a></p>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              SpotItForme Ä°ÅŸletme Ekibi<br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a>
            </p>
          </div>
        </div>
      `,
      text: `MaÄŸaza KaydÄ±\n\n${shopName} maÄŸazanÄ±z iÃ§in kaydÄ±nÄ±z alÄ±ndÄ±.\n\nMaÄŸaza Paneliniz: ${siteUrl}/shop/dashboard\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… MaÄŸaza kayÄ±t emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ MaÄŸaza kayÄ±t emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}
// Server Action: Åifre sÄ±fÄ±rlama emaili gÃ¶nder
export async function sendPasswordResetEmail(to: string, resetLink: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe Åifre SÄ±fÄ±rlama" <${process.env.GMAIL_USER}>`,
      to,
      subject: 'ğŸ” SpotItForMe Åifre SÄ±fÄ±rlama Ä°steÄŸi',
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ” Åifre SÄ±fÄ±rlama</h1>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p>SpotItForMe hesabÄ±nÄ±z iÃ§in ÅŸifre sÄ±fÄ±rlama talebinde bulundunuz.</p>
            
            <div style="background: #fef2f2; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ef4444;">
              <p><strong>âš ï¸ GÃ¼venlik UyarÄ±sÄ±:</strong></p>
              <p>Bu isteÄŸi siz yapmadÄ±ysanÄ±z, bu email'i gÃ¶rmezden gelebilirsiniz.</p>
              <p>HesabÄ±nÄ±zla ilgili endiÅŸeleriniz varsa lÃ¼tfen bizimle iletiÅŸime geÃ§in.</p>
            </div>

            <div style="text-align: center; margin: 30px 0;">
              <a href="${resetLink}" style="background: #ef4444; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold;">
                Åifremi SÄ±fÄ±rla
              </a>
            </div>

            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸ”’ GÃ¼venlik Ä°puÃ§larÄ±:</strong></p>
              <ul style="margin-left: 20px; color: #4b5563;">
                <li>Åifrenizi kimseyle paylaÅŸmayÄ±n</li>
                <li>Link'e tÄ±kladÄ±ktan sonra yeni bir ÅŸifre belirleyin</li>
                <li>GÃ¼Ã§lÃ¼ bir ÅŸifre kullanÄ±n (harf, rakam, Ã¶zel karakter)</li>
                <li>Bu link 24 saat sonra geÃ§ersiz olacaktÄ±r</li>
              </ul>
            </div>

            <p><strong>ğŸ“ Link Ã§alÄ±ÅŸmÄ±yor mu?</strong></p>
            <p>EÄŸer buton Ã§alÄ±ÅŸmÄ±yorsa, aÅŸaÄŸÄ±daki linki tarayÄ±cÄ±nÄ±za kopyalayÄ±p yapÄ±ÅŸtÄ±rÄ±n:</p>
            <p style="word-break: break-all; background: #f3f4f6; padding: 10px; border-radius: 5px; font-size: 12px;">
              ${resetLink}
            </p>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              Bu email SpotItForMe platformundan otomatik olarak gÃ¶nderilmiÅŸtir.<br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a> | 
              <a href="mailto:${process.env.GMAIL_USER}" style="color: #6b7280;">YardÄ±m</a>
            </p>
          </div>
        </div>
      `,
      text: `SpotItForMe Åifre SÄ±fÄ±rlama\n\nÅifrenizi sÄ±fÄ±rlamak iÃ§in bu linke tÄ±klayÄ±n: ${resetLink}\n\nBu link 24 saat geÃ§erlidir.\n\nEÄŸer bu isteÄŸi siz yapmadÄ±ysanÄ±z, bu email'i gÃ¶rmezden gelebilirsiniz.\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… Åifre sÄ±fÄ±rlama emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Åifre sÄ±fÄ±rlama emaili gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ Åifre sÄ±fÄ±rlama emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Åifre sÄ±fÄ±rlama emaili gÃ¶nderilemedi' }
  }
}
// Server Action: Spot oluÅŸturma emaili
export async function sendSpotCreatedEmail(to: string, spotTitle: string, spotId: string): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe" <${process.env.GMAIL_USER}>`,
      to,
      subject: `ğŸ‰ Spot OluÅŸturuldu: ${spotTitle}`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ‰ Spot'unuz OluÅŸturuldu!</h1>
          </div>
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p><strong>"${spotTitle}"</strong> baÅŸlÄ±klÄ± spot'unuz baÅŸarÄ±yla oluÅŸturuldu.</p>
            
            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #3b82f6;">
              <p><strong>Spot DetaylarÄ±:</strong></p>
              <p>ğŸ“Œ <strong>BaÅŸlÄ±k:</strong> ${spotTitle}</p>
              <p>ğŸ”— <strong>Spot Linki:</strong> <a href="${siteUrl}/spots/${spotId}" style="color: #3b82f6;">${siteUrl}/spots/${spotId}</a></p>
              <p>â° <strong>Tarih:</strong> ${new Date().toLocaleDateString('tr-TR')}</p>
            </div>

            <p>Spot'unuz ÅŸu anda topluluÄŸumuzun yardÄ±mÄ±na sunuldu. Binlerce kullanÄ±cÄ± ÅŸehirlerinde gezerken sizin iÃ§in gÃ¶z kulak olacak.</p>
            
            <div style="text-align: center; margin: 30px 0;">
              <a href="${siteUrl}/spots/${spotId}" style="background: #3b82f6; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold;">
                Spot'u GÃ¶rÃ¼ntÃ¼le
              </a>
            </div>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              Bu e-posta SpotItForMe platformundan otomatik olarak gÃ¶nderilmiÅŸtir.<br/>
              <a href="${siteUrl}/unsubscribe" style="color: #6b7280;">Bildirimleri devre dÄ±ÅŸÄ± bÄ±rak</a>
            </p>
          </div>
        </div>
      `,
      text: `SpotItForMe - Spot OluÅŸturuldu\n\n"${spotTitle}" baÅŸlÄ±klÄ± spot'unuz baÅŸarÄ±yla oluÅŸturuldu.\n\nSpot Linki: ${siteUrl}/spots/${spotId}\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… Spot oluÅŸturma emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ Email gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}

// Server Action: YardÄ±m bildirimi emaili
export async function sendSightingNotificationEmail(
  to: string, 
  spotTitle: string, 
  spotterName: string,
  spotId: string
): Promise<{ success: boolean; message: string }> {
  try {
    const siteUrl = process.env.NEXT_PUBLIC_SITE_URL || 'https://spotitforme.vercel.app'
    
    await transporter.sendMail({
      from: `"SpotItForMe" <${process.env.GMAIL_USER}>`,
      to,
      subject: `ğŸ¯ YENÄ° YARDIM: "${spotTitle}" iÃ§in bildirim!`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f5f7fa; padding: 20px;">
          <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;">
            <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ¯ YENÄ° YARDIM BÄ°LDÄ°RÄ°MÄ°!</h1>
            <p style="color: white; opacity: 0.9; margin-top: 10px;">Birisi aradÄ±ÄŸÄ±nÄ±z Ã¼rÃ¼nÃ¼ gÃ¶rdÃ¼!</p>
          </div>
          
          <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
            <p>Merhaba,</p>
            <p><strong>${spotterName}</strong> adlÄ± kullanÄ±cÄ±, <strong>"${spotTitle}"</strong> spot'unuz iÃ§in yardÄ±m bildirimi gÃ¶nderdi! ğŸ‰</p>
            
            <div style="background: #fffbeb; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #f59e0b;">
              <p><strong>ğŸ‰ MÃ¼jdeli Haber!</strong></p>
              <p>Bir topluluk Ã¼yemiz aradÄ±ÄŸÄ±nÄ±z Ã¼rÃ¼nÃ¼ gÃ¶rdÃ¼ÄŸÃ¼nÃ¼ bildirdi.</p>
              <p>Hemen spot sayfasÄ±na giderek detaylarÄ± gÃ¶rÃ¼ntÃ¼leyin!</p>
            </div>

            <div style="text-align: center; margin: 30px 0;">
              <a href="${siteUrl}/spots/${spotId}" style="background: #f59e0b; color: white; padding: 12px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold;">
                YardÄ±m DetaylarÄ±nÄ± GÃ¶rÃ¼ntÃ¼le
              </a>
            </div>

            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p><strong>ğŸ“‹ Sonraki AdÄ±mlar:</strong></p>
              <ol style="margin-left: 20px;">
                <li>YardÄ±m detaylarÄ±nÄ± inceleyin</li>
                <li>Gerekirse spotter ile iletiÅŸime geÃ§in</li>
                <li>ÃœrÃ¼nÃ¼ bulduysanÄ±z spot durumunu "Bulundu" olarak gÃ¼ncelleyin</li>
                <li>YardÄ±m eden kullanÄ±cÄ±ya teÅŸekkÃ¼r edin</li>
              </ol>
            </div>

            <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;" />

            <p style="font-size: 12px; color: #6b7280; text-align: center;">
              TopluluÄŸumuzun yardÄ±mÄ±yla kayÄ±p Ã¼rÃ¼nlerinizi bulmanÄ±zÄ± umuyoruz!<br/>
              <a href="${siteUrl}" style="color: #6b7280;">${siteUrl}</a>
            </p>
          </div>
        </div>
      `,
      text: `Yeni YardÄ±m Bildirimi!\n\n${spotterName}, "${spotTitle}" spot'unuz iÃ§in yardÄ±m bildirimi gÃ¶nderdi.\n\nDetaylar iÃ§in: ${siteUrl}/spots/${spotId}\n\nTeÅŸekkÃ¼r ederiz!`
    })

    console.log('âœ… YardÄ±m bildirimi emaili gÃ¶nderildi:', to)
    return { success: true, message: 'Email gÃ¶nderildi' }
  } catch (error) {
    console.error('âŒ YardÄ±m bildirimi emaili gÃ¶nderilemedi:', error)
    return { success: false, message: 'Email gÃ¶nderilemedi' }
  }
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ email-service.ts
ğŸ“Š 220 satÄ±r | 5.37 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/email-service.ts
import { emailTemplates, generateTextVersion } from './email-templates'

export interface EmailOptions {
  to: string | string[]
  template: string
  data: any
  cc?: string | string[]
  bcc?: string | string[]
  replyTo?: string
  attachments?: Array<{
    filename: string
    content: Buffer | string
    contentType?: string
  }>
}

export interface EmailResult {
  success: boolean
  messageId?: string
  error?: string
  devMode?: boolean
}

class EmailService {
  private static instance: EmailService

  static getInstance(): EmailService {
    if (!EmailService.instance) {
      EmailService.instance = new EmailService()
    }
    return EmailService.instance
  }

  async sendEmail(options: EmailOptions): Promise<EmailResult> {
    try {
      console.log('ğŸ“§ Email gÃ¶nderiliyor:', {
        to: typeof options.to === 'string' ? options.to.substring(0, 3) + '...' : options.to.length + ' alÄ±cÄ±',
        template: options.template,
        timestamp: new Date().toISOString()
      })

      // 1. Template'i al
      const templateGenerator = emailTemplates[options.template]
      if (!templateGenerator) {
        throw new Error(`Template bulunamadÄ±: ${options.template}`)
      }

      const template = templateGenerator(options.data)

      // 2. Email verilerini hazÄ±rla
      const emailData = {
        to: Array.isArray(options.to) ? options.to.join(',') : options.to,
        template: options.template,
        data: options.data,
        subject: template.subject,
        html: template.html,
        text: template.text || generateTextVersion(template.html),
        cc: options.cc ? (Array.isArray(options.cc) ? options.cc.join(',') : options.cc) : undefined,
        bcc: options.bcc ? (Array.isArray(options.bcc) ? options.bcc.join(',') : options.bcc) : undefined,
        replyTo: options.replyTo,
        attachments: options.attachments
      }

      // 3. API'ye gÃ¶nder
      const response = await fetch('/api/send-email', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(emailData)
      })

      const result = await response.json()

      if (!response.ok) {
        throw new Error(result.error || 'Email gÃ¶nderilemedi')
      }

      console.log('âœ… Email gÃ¶nderildi:', result.messageId || 'ID yok')
      return {
        success: true,
        messageId: result.messageId,
        devMode: result.devMode
      }

    } catch (error: any) {
      console.error('âŒ Email gÃ¶nderme hatasÄ±:', error.message)
      
      // Production'da hatayÄ± log'la
      if (process.env.NODE_ENV === 'production') {
        // Burada Sentry, LogRocket gibi bir servise log'layabilirsiniz
        console.error('Production email hatasÄ±:', {
          error: error.message,
          template: options.template,
          to: options.to
        })
      }

      return {
        success: false,
        error: error.message
      }
    }
  }

  // Kolay kullanÄ±m iÃ§in yardÄ±mcÄ± metodlar
  async sendWelcomeEmail(to: string, name: string) {
    return this.sendEmail({
      to,
      template: 'welcome',
      data: { name }
    })
  }

  async sendSpotCreatedEmail(to: string, spotTitle: string, spotId: string) {
    return this.sendEmail({
      to,
      template: 'spot-created',
      data: { spotTitle, spotId }
    })
  }

  async sendSightingNotification(
    to: string, 
    spotTitle: string, 
    spotterName: string, 
    spotId: string,
    spotterMessage?: string,
    price?: string,
    location?: string
  ) {
    return this.sendEmail({
      to,
      template: 'spot-sighting',
      data: { 
        spotTitle, 
        spotterName, 
        spotId,
        spotterMessage,
        price,
        location
      }
    })
  }

  async sendSpotFoundEmail(
    to: string,
    spotTitle: string,
    spotId: string,
    foundBy?: string,
    totalSpots?: number,
    foundSpots?: number
  ) {
    return this.sendEmail({
      to,
      template: 'spot-found',
      data: {
        spotTitle,
        spotId,
        foundBy,
        totalSpots,
        foundSpots
      }
    })
  }

  async sendBusinessWelcomeEmail(
    to: string,
    businessName: string,
    contactName: string,
    plan: string,
    imageLimit: string
  ) {
    return this.sendEmail({
      to,
      template: 'business-welcome',
      data: {
        businessName,
        contactName,
        plan,
        imageLimit
      }
    })
  }

  async sendPasswordResetEmail(to: string, resetLink: string, name?: string) {
    return this.sendEmail({
      to,
      template: 'password-reset',
      data: {
        resetLink,
        name: name || 'KullanÄ±cÄ±'
      }
    })
  }

  async sendVerificationEmail(to: string, verificationLink: string, name?: string) {
    return this.sendEmail({
      to,
      template: 'verify-email',
      data: {
        verificationLink,
        name: name || 'KullanÄ±cÄ±'
      }
    })
  }

  async sendAdminAlert(title: string, details: any, adminEmails: string | string[]) {
    return this.sendEmail({
      to: adminEmails,
      template: 'admin-alert',
      data: {
        title,
        details
      }
    })
  }
}

// Singleton instance export
export const emailService = EmailService.getInstance()

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ email-templates.ts
ğŸ“Š 551 satÄ±r | 28.78 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/email-templates.ts
export interface EmailTemplate {
  subject: string
  html: string
  text?: string
}

export const emailTemplates: Record<string, (data: any) => EmailTemplate> = {
  // 1. KAYIT/KULLANICI EMAÄ°LLERÄ°
  'welcome': (data) => ({
    subject: `ğŸ‰ SpotItForMe TopluluÄŸuna HoÅŸ Geldin ${data.name}!`,
    html: `
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px; text-align: center; border-radius: 10px 10px 0 0;">
          <h1 style="color: white; margin: 0; font-size: 28px;">ğŸ¤ HOÅ GELDÄ°NÄ°Z!</h1>
          <p style="color: white; opacity: 0.9; margin-top: 10px; font-size: 16px;">
            SpotItForMe TopluluÄŸuna KatÄ±ldÄ±ÄŸÄ±nÄ±z Ä°Ã§in TeÅŸekkÃ¼r Ederiz
          </p>
        </div>
        
        <div style="padding: 40px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px; background: white;">
          <p style="font-size: 16px; line-height: 1.6; color: #374151;">
            Merhaba <strong style="color: #1f2937;">${data.name}</strong>,
          </p>
          
          <p style="font-size: 16px; line-height: 1.6; color: #374151; margin-top: 20px;">
            SpotItForMe topluluÄŸuna katÄ±ldÄ±ÄŸÄ±nÄ±z iÃ§in Ã§ok mutluyuz! ğŸ‰
            ArtÄ±k binlerce gÃ¶z sizin iÃ§in arama yapacak.
          </p>
          
          <div style="background: #f9fafb; padding: 25px; border-radius: 8px; margin: 30px 0; border-left: 4px solid #667eea;">
            <p style="font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 15px;">
              ğŸš€ Hemen BaÅŸlayÄ±n:
            </p>
            <div style="display: flex; flex-direction: column; gap: 15px;">
              <a href="${process.env.NEXT_PUBLIC_SITE_URL}/create-spot" 
                 style="background: #667eea; color: white; padding: 14px 24px; text-align: center; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px;">
                 ğŸ“ Ä°lk Spot'unu OluÅŸtur
              </a>
              <a href="${process.env.NEXT_PUBLIC_SITE_URL}/spots" 
                 style="background: white; color: #667eea; padding: 14px 24px; text-align: center; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px; border: 2px solid #667eea;">
                 ğŸ” Spot'larÄ± KeÅŸfet
              </a>
            </div>
          </div>
          
          <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
            <p style="font-size: 14px; color: #6b7280; margin-bottom: 10px;">
              <strong>Ä°lk adÄ±m tavsiyemiz:</strong>
            </p>
            <ul style="font-size: 14px; color: #6b7280; padding-left: 20px; line-height: 1.6;">
              <li>Profil fotoÄŸrafÄ±nÄ±zÄ± ekleyin</li>
              <li>AradÄ±ÄŸÄ±nÄ±z ilk Ã¼rÃ¼nÃ¼ spot olarak paylaÅŸÄ±n</li>
              <li>DiÄŸer kullanÄ±cÄ±lara yardÄ±m ederek puan kazanÄ±n</li>
              <li>Topluluk kurallarÄ±nÄ± okuyun</li>
            </ul>
          </div>
          
          <p style="font-size: 14px; color: #6b7280; margin-top: 30px; text-align: center;">
            SorularÄ±nÄ±z iÃ§in: <a href="mailto:destek@spotitforme.com" style="color: #667eea;">destek@spotitforme.com</a>
          </p>
        </div>
        
        <div style="text-align: center; margin-top: 20px;">
          <p style="font-size: 12px; color: #9ca3af;">
            SpotItForMe Â© ${new Date().getFullYear()} | 
            <a href="${process.env.NEXT_PUBLIC_SITE_URL}/privacy" style="color: #9ca3af; text-decoration: underline;">Gizlilik PolitikasÄ±</a>
          </p>
        </div>
      </div>
    `,
    text: `
      HOÅ GELDÄ°NÄ°Z!
      
      Merhaba ${data.name},
      
      SpotItForMe topluluÄŸuna katÄ±ldÄ±ÄŸÄ±nÄ±z iÃ§in Ã§ok mutluyuz! ğŸ‰
      ArtÄ±k binlerce gÃ¶z sizin iÃ§in arama yapacak.
      
      Hemen BaÅŸlayÄ±n:
      1. Ä°lk spot'unuzu oluÅŸturun: ${process.env.NEXT_PUBLIC_SITE_URL}/create-spot
      2. DiÄŸer spot'larÄ± keÅŸfedin: ${process.env.NEXT_PUBLIC_SITE_URL}/spots
      
      Ä°lk adÄ±m tavsiyelerimiz:
      - Profil fotoÄŸrafÄ±nÄ±zÄ± ekleyin
      - AradÄ±ÄŸÄ±nÄ±z ilk Ã¼rÃ¼nÃ¼ spot olarak paylaÅŸÄ±n
      - DiÄŸer kullanÄ±cÄ±lara yardÄ±m ederek puan kazanÄ±n
      - Topluluk kurallarÄ±nÄ± okuyun
      
      SorularÄ±nÄ±z iÃ§in: destek@spotitforme.com
      
      SpotItForMe Â© ${new Date().getFullYear()}
    `
  }),

  'verify-email': (data) => ({
    subject: 'âœ… SpotItForMe - Email Adresinizi DoÄŸrulayÄ±n',
    html: `
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
        <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 40px; text-align: center; border-radius: 10px 10px 0 0;">
          <h1 style="color: white; margin: 0; font-size: 28px;">âœ… EMAÄ°L DOÄRULAMA</h1>
          <p style="color: white; opacity: 0.9; margin-top: 10px; font-size: 16px;">
            HesabÄ±nÄ±zÄ± aktive etmek iÃ§in son adÄ±m
          </p>
        </div>
        
        <div style="padding: 40px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px; background: white;">
          <p style="font-size: 16px; line-height: 1.6; color: #374151;">
            Merhaba <strong style="color: #1f2937;">${data.name}</strong>,
          </p>
          
          <p style="font-size: 16px; line-height: 1.6; color: #374151; margin-top: 20px;">
            SpotItForMe hesabÄ±nÄ±zÄ± oluÅŸturduÄŸunuz iÃ§in teÅŸekkÃ¼r ederiz.
            HesabÄ±nÄ±zÄ± tamamen aktive etmek iÃ§in email adresinizi doÄŸrulamanÄ±z gerekiyor.
          </p>
          
          <div style="text-align: center; margin: 40px 0;">
            <a href="${data.verificationLink}" 
               style="background: #10b981; color: white; padding: 16px 40px; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 18px; display: inline-block;">
               ğŸ“§ EMAÄ°L'Ä°MÄ° DOÄRULA
            </a>
          </div>
          
          <div style="background: #f0fdf4; padding: 20px; border-radius: 8px; margin: 30px 0; border-left: 4px solid #10b981;">
            <p style="font-size: 14px; color: #065f46; margin: 0;">
              <strong>Not:</strong> Bu link 24 saat geÃ§erlidir. EÄŸer buton Ã§alÄ±ÅŸmÄ±yorsa, 
              aÅŸaÄŸÄ±daki linki tarayÄ±cÄ±nÄ±za kopyalayÄ±p yapÄ±ÅŸtÄ±rÄ±n:
            </p>
            <p style="font-size: 12px; color: #047857; background: #d1fae5; padding: 10px; border-radius: 4px; margin-top: 10px; word-break: break-all;">
              ${data.verificationLink}
            </p>
          </div>
          
          <p style="font-size: 14px; color: #6b7280; margin-top: 30px; text-align: center;">
            Bu iÅŸlemi siz yapmadÄ±ysanÄ±z, bu email'i gÃ¶rmezden gelebilirsiniz.
          </p>
        </div>
      </div>
    `
  }),

  'password-reset': (data) => ({
    subject: 'ğŸ” SpotItForMe - Åifre SÄ±fÄ±rlama',
    html: `
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
        <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); padding: 40px; text-align: center; border-radius: 10px 10px 0 0;">
          <h1 style="color: white; margin: 0; font-size: 28px;">ğŸ” ÅÄ°FRE SIFIRLAMA</h1>
          <p style="color: white; opacity: 0.9; margin-top: 10px; font-size: 16px;">
            HesabÄ±nÄ±zÄ±n ÅŸifresini yenileyin
          </p>
        </div>
        
        <div style="padding: 40px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px; background: white;">
          <p style="font-size: 16px; line-height: 1.6; color: #374151;">
            Åifre sÄ±fÄ±rlama talebinde bulundunuz. Yeni ÅŸifrenizi belirlemek iÃ§in aÅŸaÄŸÄ±daki butona tÄ±klayÄ±n:
          </p>
          
          <div style="text-align: center; margin: 40px 0;">
            <a href="${data.resetLink}" 
               style="background: #f59e0b; color: white; padding: 16px 40px; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 18px; display: inline-block;">
               ğŸ”‘ ÅÄ°FREMÄ° YENÄ°LE
            </a>
          </div>
          
          <div style="background: #fffbeb; padding: 20px; border-radius: 8px; margin: 30px 0; border-left: 4px solid #f59e0b;">
            <p style="font-size: 14px; color: #92400e; margin: 0;">
              <strong>GÃ¼venlik Notu:</strong>
            </p>
            <ul style="font-size: 14px; color: #92400e; padding-left: 20px; line-height: 1.6; margin-top: 10px;">
              <li>Bu link 1 saat geÃ§erlidir</li>
              <li>Bu talebi siz yapmadÄ±ysanÄ±z, bu email'i gÃ¶rmezden gelebilirsiniz</li>
              <li>Åifrenizi kimseyle paylaÅŸmayÄ±n</li>
            </ul>
          </div>
          
          <p style="font-size: 14px; color: #6b7280; margin-top: 30px; text-align: center;">
            Link Ã§alÄ±ÅŸmÄ±yorsa: ${data.resetLink}
          </p>
        </div>
      </div>
    `
  }),

  // 2. SPOT Ä°LE Ä°LGÄ°LÄ° EMAÄ°LLER
  'spot-created': (data) => ({
    subject: `ğŸ‰ Spot OluÅŸturuldu: "${data.spotTitle}"`,
    html: `
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
        <div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); padding: 40px; text-align: center; border-radius: 10px 10px 0 0;">
          <h1 style="color: white; margin: 0; font-size: 28px;">ğŸ‰ SPOT OLUÅTURULDU!</h1>
          <p style="color: white; opacity: 0.9; margin-top: 10px; font-size: 16px;">
            TopluluÄŸumuz sizin iÃ§in aramaya baÅŸladÄ±
          </p>
        </div>
        
        <div style="padding: 40px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px; background: white;">
          <p style="font-size: 16px; line-height: 1.6; color: #374151;">
            Tebrikler! <strong>"${data.spotTitle}"</strong> baÅŸlÄ±klÄ± spot'unuz baÅŸarÄ±yla oluÅŸturuldu.
          </p>
          
          <div style="background: #faf5ff; padding: 25px; border-radius: 8px; margin: 30px 0; border: 2px solid #8b5cf6;">
            <p style="font-size: 18px; font-weight: 600; color: #7c3aed; margin-bottom: 15px; text-align: center;">
              ğŸ“‹ Spot DetaylarÄ±
            </p>
            <div style="display: grid; grid-template-columns: 1fr; gap: 10px;">
              <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e5e7eb;">
                <span style="color: #6b7280;">BaÅŸlÄ±k:</span>
                <span style="font-weight: 600; color: #1f2937;">${data.spotTitle}</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e5e7eb;">
                <span style="color: #6b7280;">Spot ID:</span>
                <span style="font-weight: 600; color: #1f2937;">${data.spotId}</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e5e7eb;">
                <span style="color: #6b7280;">OluÅŸturulma:</span>
                <span style="color: #1f2937;">${new Date().toLocaleDateString('tr-TR')}</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                <span style="color: #6b7280;">Durum:</span>
                <span style="color: #10b981; font-weight: 600;">AKTÄ°F</span>
              </div>
            </div>
          </div>
          
          <div style="text-align: center; margin: 40px 0;">
            <a href="${process.env.NEXT_PUBLIC_SITE_URL}/spots/${data.spotId}" 
               style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 16px 40px; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 18px; display: inline-block;">
               ğŸ‘ï¸ SPOT'U GÃ–RÃœNTÃœLE
            </a>
          </div>
          
          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 30px 0;">
            <p style="font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 15px;">
              ğŸ•’ Bekleme SÃ¼recinde:
            </p>
            <ul style="font-size: 14px; color: #4b5563; padding-left: 20px; line-height: 1.6;">
              <li>Spot'unuz binlerce kullanÄ±cÄ± tarafÄ±ndan gÃ¶rÃ¼ntÃ¼lenecek</li>
              <li>Ortalama ilk yardÄ±m 24 saat iÃ§inde gelir</li>
              <li>Spot detaylarÄ±nÄ±zÄ± gÃ¼ncelleyebilirsiniz</li>
              <li>Daha fazla fotoÄŸraf ekleyebilirsiniz</li>
            </ul>
          </div>
          
          <div style="text-align: center; margin-top: 40px;">
            <a href="${process.env.NEXT_PUBLIC_SITE_URL}/spots" 
               style="background: #f3f4f6; color: #374151; padding: 12px 30px; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px; display: inline-block; margin: 5px;">
               ğŸ” DiÄŸer Spot'lar
            </a>
            <a href="${process.env.NEXT_PUBLIC_SITE_URL}/create-spot" 
               style="background: #f3f4f6; color: #374151; padding: 12px 30px; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px; display: inline-block; margin: 5px;">
               ğŸ“ Yeni Spot OluÅŸtur
            </a>
          </div>
        </div>
      </div>
    `
  }),

  'spot-sighting': (data) => ({
    subject: `ğŸ¯ "${data.spotTitle}" iÃ§in YENÄ° YARDIM!`,
    html: `
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
        <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 40px; text-align: center; border-radius: 10px 10px 0 0;">
          <h1 style="color: white; margin: 0; font-size: 32px;">ğŸ¯ YENÄ° YARDIM!</h1>
          <p style="color: white; opacity: 0.9; margin-top: 10px; font-size: 18px;">
            "${data.spotTitle}" spot'unuz iÃ§in yardÄ±m geldi!
          </p>
        </div>
        
        <div style="padding: 40px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px; background: white;">
          <div style="text-align: center; margin-bottom: 30px;">
            <div style="background: #d1fae5; color: #065f46; width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 36px;">
              ğŸ‘ï¸
            </div>
            <h2 style="color: #1f2937; font-size: 24px; margin: 0;">
              Birisi ÃœrÃ¼nÃ¼nÃ¼zÃ¼ GÃ¶rdÃ¼!
            </h2>
          </div>
          
          <p style="font-size: 16px; line-height: 1.6; color: #374151; text-align: center;">
            <strong>${data.spotterName}</strong> adlÄ± topluluk Ã¼yemiz, 
            <strong>"${data.spotTitle}"</strong> spot'unuz iÃ§in yardÄ±m bildirimi gÃ¶nderdi.
          </p>
          
          ${data.spotterMessage ? `
            <div style="background: #f0fdf4; padding: 20px; border-radius: 8px; margin: 25px 0; border-left: 4px solid #10b981;">
              <p style="font-size: 14px; color: #065f46; font-weight: 600; margin-bottom: 10px;">
                ğŸ“ Spotter'Ä±n Notu:
              </p>
              <p style="font-size: 16px; color: #065f46; font-style: italic; margin: 0;">
                "${data.spotterMessage}"
              </p>
            </div>
          ` : ''}
          
          ${data.price ? `
            <div style="background: #fef3c7; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: center;">
              <p style="font-size: 16px; color: #92400e; margin: 0;">
                ğŸ’° <strong>GÃ¶rÃ¼len Fiyat:</strong> ${data.price} TL
              </p>
            </div>
          ` : ''}
          
          ${data.location ? `
            <div style="background: #e0f2fe; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: center;">
              <p style="font-size: 16px; color: #0369a1; margin: 0;">
                ğŸ“ <strong>Konum:</strong> ${data.location}
              </p>
            </div>
          ` : ''}
          
          <div style="text-align: center; margin: 40px 0;">
            <a href="${process.env.NEXT_PUBLIC_SITE_URL}/spots/${data.spotId}" 
               style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 18px 50px; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 20px; display: inline-block;">
               ğŸ‘‰ YARDIM DETAYLARINI GÃ–R
            </a>
          </div>
          
          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 30px 0;">
            <p style="font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 15px;">
              ğŸ¯ Sonraki AdÄ±mlar:
            </p>
            <ol style="font-size: 14px; color: #4b5563; padding-left: 20px; line-height: 1.6;">
              <li>YardÄ±m detaylarÄ±nÄ± inceleyin</li>
              <li>Gerekirse spotter ile iletiÅŸime geÃ§in</li>
              <li>ÃœrÃ¼nÃ¼ bulduysanÄ±z spot durumunu "BULUNDU" yapÄ±n</li>
              <li>YardÄ±m eden kullanÄ±cÄ±ya teÅŸekkÃ¼r puanÄ± verin</li>
            </ol>
          </div>
          
          <p style="font-size: 14px; color: #6b7280; text-align: center; margin-top: 30px;">
            Bu yardÄ±m sayesinde Ã¼rÃ¼nÃ¼nÃ¼zÃ¼ bulmanÄ±zÄ± umuyoruz! ğŸ¤
          </p>
        </div>
      </div>
    `
  }),

  'spot-found': (data) => ({
    subject: `âœ… "${data.spotTitle}" BAÅARIYLA BULUNDU!`,
    html: `
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
        <div style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); padding: 40px; text-align: center; border-radius: 10px 10px 0 0;">
          <h1 style="color: white; margin: 0; font-size: 32px;">âœ… BAÅARI HÄ°KAYESÄ°!</h1>
          <p style="color: white; opacity: 0.9; margin-top: 10px; font-size: 18px;">
            "${data.spotTitle}" spot'unuz BULUNDU!
          </p>
        </div>
        
        <div style="padding: 40px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px; background: white;">
          <div style="text-align: center; margin-bottom: 30px;">
            <div style="background: #fed7aa; color: #ea580c; width: 100px; height: 100px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 48px;">
              ğŸ‰
            </div>
            <h2 style="color: #1f2937; font-size: 28px; margin: 0;">
              Tebrikler!
            </h2>
            <p style="color: #6b7280; font-size: 18px; margin-top: 10px;">
              TopluluÄŸumuz sayesinde Ã¼rÃ¼nÃ¼nÃ¼zÃ¼ buldunuz
            </p>
          </div>
          
          <div style="background: #ffedd5; padding: 25px; border-radius: 12px; margin: 30px 0; border: 3px solid #f97316; text-align: center;">
            <p style="font-size: 20px; color: #ea580c; font-weight: 600; margin: 0;">
              "${data.spotTitle}"
            </p>
            <p style="font-size: 16px; color: #92400e; margin-top: 10px;">
              baÅŸlÄ±klÄ± spot'unuz baÅŸarÄ±yla bulundu!
            </p>
          </div>
          
          ${data.foundBy ? `
            <div style="text-align: center; margin: 30px 0;">
              <p style="font-size: 16px; color: #374151; margin-bottom: 10px;">
                YardÄ±m Eden:
              </p>
              <div style="background: #f8fafc; padding: 15px; border-radius: 8px; display: inline-block;">
                <p style="font-size: 18px; color: #1f2937; font-weight: 600; margin: 0;">
                  ğŸ‘¤ ${data.foundBy}
                </p>
              </div>
            </div>
          ` : ''}
          
          <div style="text-align: center; margin: 40px 0;">
            <a href="${process.env.NEXT_PUBLIC_SITE_URL}/spots/${data.spotId}" 
               style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); color: white; padding: 18px 50px; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 20px; display: inline-block;">
               ğŸ† BAÅARI HÄ°KAYESÄ°NÄ° GÃ–R
            </a>
          </div>
          
          <div style="background: #f8fafc; padding: 25px; border-radius: 8px; margin: 30px 0;">
            <p style="font-size: 18px; font-weight: 600; color: #1f2937; text-align: center; margin-bottom: 20px;">
              ğŸ“Š Ä°statistikleriniz
            </p>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
              <div style="text-align: center;">
                <div style="font-size: 24px; font-weight: 700; color: #f97316;">${data.totalSpots || '1'}</div>
                <div style="font-size: 12px; color: #6b7280;">Toplam Spot</div>
              </div>
              <div style="text-align: center;">
                <div style="font-size: 24px; font-weight: 700; color: #10b981;">${data.foundSpots || '1'}</div>
                <div style="font-size: 12px; color: #6b7280;">Bulunan Spot</div>
              </div>
            </div>
          </div>
          
          <div style="text-align: center; margin-top: 40px;">
            <p style="font-size: 16px; color: #374151; margin-bottom: 20px;">
              BaÅŸka Ã¼rÃ¼nler de arÄ±yor musunuz?
            </p>
            <a href="${process.env.NEXT_PUBLIC_SITE_URL}/create-spot" 
               style="background: #f3f4f6; color: #374151; padding: 14px 30px; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px; display: inline-block;">
               ğŸš€ YENÄ° SPOT OLUÅTUR
            </a>
          </div>
        </div>
      </div>
    `
  }),

  // 3. Ä°ÅLETME EMAÄ°LLERÄ°
  'business-welcome': (data) => ({
    subject: `ğŸª SpotItForMe Ä°ÅŸ OrtaÄŸÄ±nÄ±z! - ${data.businessName}`,
    html: `
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
        <div style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); padding: 40px; text-align: center; border-radius: 10px 10x 0 0;">
          <h1 style="color: white; margin: 0; font-size: 28px;">ğŸª Ä°Å ORTAÄIMIZ OLDUÄUNUZ Ä°Ã‡Ä°N TEÅEKKÃœRLER!</h1>
          <p style="color: white; opacity: 0.9; margin-top: 10px; font-size: 16px;">
            ${data.businessName} - SpotItForMe Ä°ÅŸletme ProgramÄ±
          </p>
        </div>
        
        <div style="padding: 40px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px; background: white;">
          <p style="font-size: 16px; line-height: 1.6; color: #374151;">
            SayÄ±n <strong>${data.contactName}</strong>,
          </p>
          
          <p style="font-size: 16px; line-height: 1.6; color: #374151; margin-top: 20px;">
            <strong>${data.businessName}</strong> iÅŸletmesini SpotItForMe iÅŸletme programÄ±na kaydettiÄŸiniz iÃ§in teÅŸekkÃ¼r ederiz!
            ArtÄ±k binlerce potansiyel mÃ¼ÅŸteriye ulaÅŸabileceksiniz.
          </p>
          
          <div style="background: #eef2ff; padding: 25px; border-radius: 8px; margin: 30px 0; border: 2px solid #6366f1;">
            <p style="font-size: 18px; font-weight: 600; color: #4f46e5; text-align: center; margin-bottom: 20px;">
              ğŸ“‹ Ä°ÅŸletme Bilgileriniz
            </p>
            <div style="display: grid; grid-template-columns: 1fr; gap: 12px;">
              <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #c7d2fe;">
                <span style="color: #4b5563;">Ä°ÅŸletme AdÄ±:</span>
                <span style="font-weight: 600; color: #1f2937;">${data.businessName}</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #c7d2fe;">
                <span style="color: #4b5563;">Paket:</span>
                <span style="color: #10b981; font-weight: 600;">${data.plan} PAKET</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #c7d2fe;">
                <span style="color: #4b5563;">Resim HakkÄ±:</span>
                <span style="color: #1f2937;">${data.imageLimit}</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 10px 0;">
                <span style="color: #4b5563;">BaÅŸlangÄ±Ã§ Tarihi:</span>
                <span style="color: #1f2937;">${new Date().toLocaleDateString('tr-TR')}</span>
              </div>
            </div>
          </div>
          
          <div style="text-align: center; margin: 40px 0;">
            <a href="${process.env.NEXT_PUBLIC_SITE_URL}/dashboard" 
               style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); color: white; padding: 16px 40px; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 18px; display: inline-block;">
               ğŸš€ Ä°ÅLETME PANELÄ°NE GÄ°T
            </a>
          </div>
          
          <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 30px 0;">
            <p style="font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 15px;">
              ğŸ¯ Ä°lk AdÄ±mlar:
            </p>
            <ol style="font-size: 14px; color: #4b5563; padding-left: 20px; line-height: 1.6;">
              <li>Ä°ÅŸletme profilinizi tamamlayÄ±n</li>
              <li>StoklarÄ±nÄ±zdaki Ã¼rÃ¼nleri spot olarak ekleyin</li>
              <li>MaÄŸazanÄ±zÄ± haritada gÃ¶rÃ¼nÃ¼r yapÄ±n</li>
              <li>Ã–zel kampanyalar oluÅŸturun</li>
              <li>MÃ¼ÅŸteri yorumlarÄ±nÄ± yÃ¶netin</li>
            </ol>
          </div>
          
          <div style="text-align: center; margin-top: 30px;">
            <p style="font-size: 14px; color: #6b7280;">
              Ä°ÅŸletme destek ekibimiz: 
              <a href="mailto:business@spotitforme.com" style="color: #6366f1;">business@spotitforme.com</a>
            </p>
          </div>
        </div>
      </div>
    `
  }),

  // 4. SÄ°STEM EMAÄ°LLERÄ°
  'admin-alert': (data) => ({
    subject: `ğŸš¨ ADMIN ALERT: ${data.title}`,
    html: `
      <div style="font-family: monospace; max-width: 800px; margin: 0 auto; padding: 20px; background: #0f172a; color: #e2e8f0;">
        <div style="background: #dc2626; padding: 20px; text-align: center; border-radius: 8px 8px 0 0;">
          <h1 style="color: white; margin: 0; font-size: 24px; font-family: monospace;">ğŸš¨ ADMIN ALERT</h1>
        </div>
        
        <div style="padding: 30px; border: 1px solid #334155; border-top: none; border-radius: 0 0 8px 8px; background: #1e293b;">
          <div style="background: #475569; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
            <p style="margin: 0; font-size: 18px; font-weight: 600;">${data.title}</p>
            <p style="margin: 5px 0 0 0; font-size: 14px; color: #cbd5e1;">${new Date().toISOString()}</p>
          </div>
          
          <div style="background: #334155; padding: 20px; border-radius: 4px; margin-bottom: 20px;">
            <p style="margin: 0 0 10px 0; font-weight: 600;">ğŸ“‹ ALERT DETAILS:</p>
            <pre style="margin: 0; font-size: 14px; color: #94a3b8; white-space: pre-wrap;">${JSON.stringify(data.details, null, 2)}</pre>
          </div>
          
          <div style="background: #334155; padding: 15px; border-radius: 4px;">
            <p style="margin: 0 0 10px 0; font-weight: 600;">ğŸ”§ SYSTEM INFO:</p>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; font-size: 12px;">
              <div>
                <span style="color: #94a3b8;">Environment:</span>
                <span style="color: #fbbf24; margin-left: 10px;">${process.env.NODE_ENV}</span>
              </div>
              <div>
                <span style="color: #94a3b8;">Timestamp:</span>
                <span style="color: #fbbf24; margin-left: 10px;">${Date.now()}</span>
              </div>
            </div>
          </div>
          
          <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #475569;">
            <p style="margin: 0; font-size: 12px; color: #94a3b8; text-align: center;">
              This is an automated alert from SpotItForMe monitoring system.
            </p>
          </div>
        </div>
      </div>
    `
  })
}

// Helper function to generate text version
export function generateTextVersion(html: string): string {
  return html
    .replace(/<[^>]*>/g, '')
    .replace(/\s+/g, ' ')
    .replace(/&nbsp;/g, ' ')
    .trim()
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ email.ts
ğŸ“Š 111 satÄ±r | 2.99 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/email.ts (GÃœNCELLENMÄ°Å - Ãœcretsiz versiyon)
export async function sendSpotCreatedEmail(to: string, spotTitle: string, spotId: string) {
  try {
    console.log('ğŸ“§ Spot oluÅŸturma emaili gÃ¶nderiliyor:', { to, spotTitle })
    
    const response = await fetch('/api/send-email', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        to,
        template: 'spot-created',
        data: { spotTitle, spotId }
      })
    })

    if (!response.ok) {
      throw new Error(`Email API hatasÄ±: ${response.status}`)
    }

    const result = await response.json()
    console.log('âœ… Email gÃ¶nderildi:', result)
    return true

  } catch (error) {
    console.error('Email gÃ¶nderilemedi:', error)
    
    // Production'da hatayÄ± log'la ama kullanÄ±cÄ±ya gÃ¶sterme
    if (process.env.NODE_ENV === 'production') {
      // Hata tracking servisine log'la (Sentry, LogRocket, vb.)
      console.error('Production email hatasÄ±:', error)
    }
    
    return false
  }
}

export async function sendSightingNotificationEmail(
  to: string, 
  spotTitle: string, 
  spotterName: string,
  spotId: string
) {
  try {
    console.log('ğŸ¯ YardÄ±m bildirimi emaili:', { to, spotTitle })
    
    const response = await fetch('/api/send-email', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        to,
        template: 'sighting-notification',
        data: { spotTitle, spotterName, spotId }
      })
    })

    if (!response.ok) {
      throw new Error(`Email API hatasÄ±: ${response.status}`)
    }

    const result = await response.json()
    console.log('âœ… YardÄ±m bildirimi gÃ¶nderildi:', result)
    return true

  } catch (error) {
    console.error('YardÄ±m bildirimi gÃ¶nderilemedi:', error)
    
    if (process.env.NODE_ENV === 'production') {
      console.error('Production yardÄ±m bildirimi hatasÄ±:', error)
    }
    
    return false
  }
}

export async function sendWelcomeEmail(to: string, name: string) {
  try {
    console.log('ğŸ‘‹ HoÅŸgeldin emaili:', { to, name })
    
    const response = await fetch('/api/send-email', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        to,
        template: 'welcome',
        data: { name }
      })
    })

    if (!response.ok) {
      throw new Error(`Email API hatasÄ±: ${response.status}`)
    }

    const result = await response.json()
    console.log('âœ… HoÅŸgeldin emaili gÃ¶nderildi:', result)
    return true

  } catch (error) {
    console.error('HoÅŸgeldin emaili gÃ¶nderilemedi:', error)
    
    if (process.env.NODE_ENV === 'production') {
      console.error('Production hoÅŸgeldin emaili hatasÄ±:', error)
    }
    
    return false
  }
}

// Test email gÃ¶nderme
export async function sendTestEmail(to: string) {
  return sendWelcomeEmail(to, 'Test KullanÄ±cÄ±')
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ gamification\game-engine.ts
ğŸ“Š 32 satÄ±r | 1.30 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/gamification/game-engine.ts
export class GamificationEngine {
  // ROZET SÄ°STEMÄ°
  static BADGES = {
    FIRST_SIGHTING: { id: 'first-sighting', name: 'Ä°lk Ä°z', icon: 'ğŸ‘ï¸', points: 10 },
    HELPER_LEVEL_1: { id: 'helper-1', name: 'YardÄ±msever', icon: 'ğŸ¤', points: 50 },
    RARE_FINDER: { id: 'rare-finder', name: 'Nadir AvcÄ±sÄ±', icon: 'ğŸ”', points: 100 },
    QUICK_RESPONSE: { id: 'quick-response', name: 'HÄ±zlÄ± Tepki', icon: 'âš¡', points: 25 },
    SOCIAL_INFLUENCER: { id: 'social-influencer', name: 'Topluluk Lideri', icon: 'ğŸ‘‘', points: 500 }
  }

  // SEVÄ°YE SÄ°STEMÄ°
  static LEVELS = [
    { level: 1, name: 'Yeni GÃ¶zcÃ¼', minPoints: 0, color: 'gray' },
    { level: 2, name: 'Aktif AvcÄ±', minPoints: 100, color: 'blue' },
    { level: 3, name: 'Uzman Bulucu', minPoints: 500, color: 'green' },
    { level: 4, name: 'Master Dedektif', minPoints: 2000, color: 'purple' },
    { level: 5, name: 'Efsane AvcÄ±', minPoints: 5000, color: 'gold' }
  ]

  // PUAN SÄ°STEMÄ°
  static POINT_RULES = {
    SIGHTING_WITHOUT_PHOTO: 5,
    SIGHTING_WITH_PHOTO: 15,
    SIGHTING_WITH_PRICE: 10,
    RARE_ITEM_REPORT: 25,
    PURCHASE_FACILITATED: 50,
    DAILY_LOGIN_STREAK: [5, 10, 15, 20, 25], // 5 gÃ¼n Ã¼st Ã¼ste
    SOCIAL_SHARE: 10,
    PROFILE_COMPLETION: 30
  }
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ imageLimiter.ts
ğŸ“Š 110 satÄ±r | 3.34 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/imageLimiter.ts (GÃœNCELLENMÄ°Å - React hooks olmadan)
import { supabase } from './supabase'

export interface ImageLimitStatus {
  canUpload: boolean
  freeImagesUsed: number
  freeImagesTotal: number
  isPremium: boolean
  message?: string
}

export async function checkImageLimit(userId: string): Promise<ImageLimitStatus> {
  try {
    // 1. KullanÄ±cÄ±nÄ±n maÄŸazasÄ±nÄ± kontrol et
    const { data: shop } = await supabase
      .from('shops')
      .select('free_images_used, total_images, subscription_type')
      .eq('owner_id', userId)
      .single()

    // 2. EÄŸer maÄŸaza kaydÄ± yoksa, temel kullanÄ±cÄ± limiti
    if (!shop) {
      const { data: userSpots } = await supabase
        .from('spots')
        .select('image_url')
        .eq('user_id', userId)
        .not('image_url', 'is', null)

      const freeImagesUsed = userSpots?.length || 0
      const freeImagesTotal = 20 // Temel kullanÄ±cÄ± limiti

      return {
        canUpload: freeImagesUsed < freeImagesTotal,
        freeImagesUsed,
        freeImagesTotal,
        isPremium: false,
        message: freeImagesUsed >= freeImagesTotal 
          ? `Resim limitiniz doldu. ${freeImagesUsed}/${freeImagesTotal} resim kullandÄ±nÄ±z.`
          : undefined
      }
    }

    // 3. MaÄŸaza iÃ§in limit kontrolÃ¼
    const { free_images_used, total_images, subscription_type } = shop
    const isPremium = subscription_type !== 'free'
    
    return {
      canUpload: isPremium || free_images_used < total_images,
      freeImagesUsed: free_images_used,
      freeImagesTotal: total_images,
      isPremium,
      message: !isPremium && free_images_used >= total_images
        ? `Ãœcretsiz resim hakkÄ±nÄ±z doldu. ${free_images_used}/${total_images} resim kullandÄ±nÄ±z. Premium paketlere yÃ¼kselin.`
        : undefined
    }

  } catch (error) {
    console.error('Resim limit kontrol hatasÄ±:', error)
    return {
      canUpload: true, // Hata durumunda upload'a izin ver
      freeImagesUsed: 0,
      freeImagesTotal: 20,
      isPremium: false
    }
  }
}

export async function incrementImageCount(userId: string): Promise<void> {
  try {
    // MaÄŸaza kaydÄ± var mÄ±?
    const { data: shop } = await supabase
      .from('shops')
      .select('id, free_images_used')
      .eq('owner_id', userId)
      .single()

    if (shop) {
      // MaÄŸaza resim sayacÄ±nÄ± artÄ±r
      await supabase
        .from('shops')
        .update({ free_images_used: (shop.free_images_used || 0) + 1 })
        .eq('id', shop.id)
    }
    // Temel kullanÄ±cÄ±lar iÃ§in sayacÄ± tutmuyoruz
  } catch (error) {
    console.error('Resim sayacÄ± artÄ±rma hatasÄ±:', error)
  }
}

export async function decrementImageCount(userId: string): Promise<void> {
  try {
    const { data: shop } = await supabase
      .from('shops')
      .select('id, free_images_used')
      .eq('owner_id', userId)
      .single()

    if (shop && shop.free_images_used > 0) {
      await supabase
        .from('shops')
        .update({ free_images_used: Math.max(0, shop.free_images_used - 1) })
        .eq('id', shop.id)
    }
  } catch (error) {
    console.error('Resim sayacÄ± azaltma hatasÄ±:', error)
  }
}

// Resim limit kontrolÃ¼ iÃ§in React component'i ayrÄ± bir dosyada olsun
// components/ImageLimitChecker.tsx olarak oluÅŸturalÄ±m

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ messaging\disclaimer.ts
ğŸ“Š 81 satÄ±r | 3.11 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/messaging/disclaimer.ts
export const MESSAGING_DISCLAIMERS = {
  // TÃ¼m mesajlaÅŸmalarda gÃ¶sterilecek uyarÄ±
  GENERAL_DISCLAIMER: {
    title: "âš ï¸ Ã–nemli GÃ¼venlik UyarÄ±sÄ±",
    content: `SpotItForMe bir mesajlaÅŸma platformu saÄŸlar ancak:

1. ğŸš« **Platform dÄ±ÅŸÄ± Ã¶demelerden sorumlu deÄŸiliz**
2. ğŸ›¡ï¸ KiÅŸisel bilgilerinizi (TCKN, kredi kartÄ±, ÅŸifre) paylaÅŸmayÄ±n
3. ğŸ” KarÅŸÄ± tarafÄ± doÄŸrulamak iÃ§in profil bilgilerini kontrol edin
4. ğŸ“ ÅÃ¼pheli durumlarda bize bildirin

Platformumuz sadece iletiÅŸim amaÃ§lÄ±dÄ±r. TÃ¼m alÄ±ÅŸveriÅŸ iÅŸlemleri taraflarÄ±n sorumluluÄŸundadÄ±r.`
  },

  // Mutabakat formu disclaimer'Ä±
  TRADE_AGREEMENT_DISCLAIMER: `**SORUMLULUK REDDÄ° BEYANI**

Bu mutabakat formu SpotItForMe platformu tarafÄ±ndan saÄŸlanan bir araÃ§tÄ±r. Ancak:

1. SpotItForMe bu anlaÅŸmanÄ±n taraflarÄ± DEÄÄ°LDÄ°R
2. Ã–deme, teslimat veya anlaÅŸmazlÄ±klarda arabuluculuk YAPMAYIZ
3. Taraflar kendi aralarÄ±nda gÃ¼venli iÅŸlem yapmakla YÃœKÃœMLÃœDÃœR
4. Platform sadece iletiÅŸim ve belge kaydÄ± saÄŸlar

âœ… Bu formu kabul ederek yukarÄ±daki ÅŸartlarÄ± kabul etmiÅŸ olursunuz.`,

  // GÃ¼venlik ipuÃ§larÄ±
  SAFETY_TIPS: [
    "Yerel buluÅŸmalarÄ± halka aÃ§Ä±k, gÃ¼venli yerlerde yapÄ±n",
    "Ã–n Ã¶deme talep edenlere dikkat edin",
    "ÃœrÃ¼nÃ¼ gÃ¶rmeden, teslimat almadan Ã¶deme yapmayÄ±n",
    "Resmi fatura veya garanti belgesi isteyin",
    "ÅÃ¼pheli durumlarÄ± platform@spotitforme.com'a bildirin"
  ]
}

// GÃ¼venlik kontrol fonksiyonlarÄ±
export class MessagingSecurity {
  // KullanÄ±cÄ±larÄ± otomatik olarak ÅŸÃ¼pheli iÃ§erik iÃ§in tarar
  static scanMessageForRisks(content: string): {
    riskLevel: 'low' | 'medium' | 'high'
    warnings: string[]
    blocked: boolean
  } {
    const warnings: string[] = []
    let riskLevel: 'low' | 'medium' | 'high' = 'low'
    
    const riskyPatterns = [
      { pattern: /\b(TCKN|kimlik|numara)\b/i, warning: 'KiÅŸisel bilgi paylaÅŸÄ±mÄ±' },
      { pattern: /\b(kredi.?kartÄ±|kart.?numarasÄ±)\b/i, warning: 'Finansal bilgi paylaÅŸÄ±mÄ±' },
      { pattern: /\b(Ã¶n.?Ã¶deme|havale|eft)\b.*\b(acil|hemen|ÅŸimdi)\b/i, warning: 'Acil Ã¶deme talebi' },
      { pattern: /\b(dÄ±ÅŸarÄ±da|sokakta|Ä±ssÄ±z)\b.*\b(buluÅŸ|teslim)\b/i, warning: 'GÃ¼vensiz buluÅŸma Ã¶nerisi' },
      { pattern: /(http|https):\/\/[^\s]+(bank|Ã¶deme|transfer)/i, warning: 'ÅÃ¼pheli Ã¶deme linki' }
    ]
    
    for (const { pattern, warning } of riskyPatterns) {
      if (pattern.test(content)) {
        warnings.push(warning)
        riskLevel = riskLevel === 'low' ? 'medium' : 'high'
      }
    }
    
    // Ã‡ok sayÄ±da uyarÄ± varsa blokla
    const blocked = warnings.length >= 3
    
    return { riskLevel, warnings, blocked }
  }
  
  // KullanÄ±cÄ± gÃ¼venlik skoru
  static calculateUserTrustScore(userId: string): Promise<number> {
    // Bu fonksiyon kullanÄ±cÄ±nÄ±n:
    // - DoÄŸrulanmÄ±ÅŸ email/telefon
    // - Profil tamamlama oranÄ±
    // - GeÃ§miÅŸ iÅŸlemleri
    // - DiÄŸer kullanÄ±cÄ±lardan aldÄ±ÄŸÄ± puanlar
    // baz alÄ±narak hesaplanÄ±r
    
    return Promise.resolve(70) // Ã–rnek deÄŸer
  }
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ messaging\legal.ts
ğŸ“Š 43 satÄ±r | 1.74 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/messaging/legal.ts
export const LEGAL_COMPLIANCE = {
  // KVKK/GDPR uyumu
  DATA_PROTECTION: {
    messageRetentionDays: 365, // Mesajlar 1 yÄ±l saklanÄ±r
    autoDeleteAfterInactivity: 730, // 2 yÄ±l hareketsiz kalÄ±rsa silinir
    userRightToDelete: true, // KullanÄ±cÄ± mesajlarÄ±nÄ± silebilir
    dataExportEnabled: true // KullanÄ±cÄ± verilerini dÄ±ÅŸa aktarabilir
  },

  // TÃ¼rkiye yasalarÄ±
  TURKISH_LAW: {
    law5651: true, // Ä°nternet ortamÄ±nda yapÄ±lan yayÄ±nlarÄ±n dÃ¼zenlenmesi
    eSignatureLaw: false, // Mutabakat formlarÄ± e-imza deÄŸildir
    consumerProtection: {
      applies: false, // B2B olduÄŸu iÃ§in TÃ¼ketici Koruma Kanunu uygulanmaz
      note: 'Platform sadece iletiÅŸim saÄŸlar, satÄ±ÅŸ yapmaz'
    }
  },

  // UluslararasÄ± dÃ¼zenlemeler
  INTERNATIONAL: {
    dmcaCompliant: true,
    safeHarbor: true,
    reportAbuseEmail: 'abuse@spotitforme.com',
    lawEnforcementContact: 'legal@spotitforme.com'
  }
}

// KullanÄ±m ÅŸartlarÄ± snippet'leri
export const TERMS_SNIPPETS = {
  MESSAGING: `6. MESAJLAÅMA HÄ°ZMETÄ°
6.1. Platform kullanÄ±cÄ±lar arasÄ±nda mesajlaÅŸma imkanÄ± saÄŸlar.
6.2. Mesaj iÃ§eriklerinden kullanÄ±cÄ±lar sorumludur.
6.3. Platform dÄ±ÅŸÄ± iÅŸlemlerde (Ã¶deme, teslimat) hiÃ§bir sorumluluk kabul edilmez.
6.4. ÅÃ¼pheli iÃ§erikler 5651 SayÄ±lÄ± Kanun gereÄŸi saklanÄ±r ve yetkililere bildirilir.`,

  TRADE: `7. PLATFORM DIÅI Ä°ÅLEMLER
7.1. KullanÄ±cÄ±lar platform dÄ±ÅŸÄ±nda yaptÄ±klarÄ± tÃ¼m iÅŸlemlerden kendileri sorumludur.
7.2. Mutabakat formlarÄ± sadece kayÄ±t amaÃ§lÄ±dÄ±r, yasal baÄŸlayÄ±cÄ±lÄ±ÄŸÄ± yoktur.
7.3. Ã–deme ve teslimat anlaÅŸmazlÄ±klarÄ±nda platform arabuluculuk yapmaz.
7.4. DolandÄ±rÄ±cÄ±lÄ±k ÅŸÃ¼phesi durumunda ilgili makamlara bilgi verilir.`
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ shop\analytics.ts
ğŸ“Š 56 satÄ±r | 1.30 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/shop/analytics.ts
export const shopAnalyticsEvents = {
  // MaÄŸaza gÃ¶rÃ¼ntÃ¼leme
  SHOP_VIEWED: 'shop_viewed',
  PRODUCT_VIEWED: 'product_viewed',
  SEARCH_VIEWED: 'search_viewed',
  
  // Engagement
  SHOP_FOLLOWED: 'shop_followed',
  PRODUCT_INQUIRY: 'product_inquiry',
  SEARCH_MATCH_CLICKED: 'search_match_clicked',
  
  // Conversion
  CONTACT_CLICKED: 'contact_clicked',
  DIRECT_MESSAGE_SENT: 'direct_message_sent',
  
  // Monetization
  PREMIUM_UPGRADE: 'premium_upgrade',
  FEATURED_PRODUCT: 'featured_product_purchased',
  PROMOTION_PURCHASED: 'promotion_purchased'
}

// Premium Ã¶zellikler
export const shopPremiumFeatures = {
  BASIC: {
    price: 0,
    features: [
      '5 aktif arama',
      '50 Ã¼rÃ¼n listesi',
      'Temel eÅŸleÅŸme sistemi',
      'Email bildirimleri'
    ]
  },
  PRO: {
    price: 99,
    features: [
      '20 aktif arama',
      '200 Ã¼rÃ¼n listesi',
      'GeliÅŸmiÅŸ eÅŸleÅŸme algoritmasÄ±',
      'Ã–ncelikli destek',
      'Analytics dashboard',
      'Ã–zel maÄŸaza temasÄ±'
    ]
  },
  BUSINESS: {
    price: 299,
    features: [
      '100 aktif arama',
      '1000 Ã¼rÃ¼n listesi',
      'AI destekli eÅŸleÅŸme',
      'API eriÅŸimi',
      'Ã‡oklu kullanÄ±cÄ± hesabÄ±',
      'Ã–zel entegrasyonlar'
    ]
  }
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ shop\optimizations.ts
ğŸ“Š 31 satÄ±r | 0.77 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/shop/optimizations.ts
export const shopOptimizations = {
  // Cache strategies
  CACHE_KEYS: {
    SHOP_PROFILE: (shopId: string) => `shop:${shopId}:profile`,
    SHOP_INVENTORY: (shopId: string) => `shop:${shopId}:inventory`,
    SHOP_SEARCHES: (shopId: string) => `shop:${shopId}:searches`,
    SHOP_MATCHES: (shopId: string) => `shop:${shopId}:matches`
  },

  // Pagination
  PAGINATION: {
    INVENTORY_PER_PAGE: 12,
    SEARCHES_PER_PAGE: 10,
    MATCHES_PER_PAGE: 20
  },

  // Image optimization
  IMAGE_SIZES: {
    THUMBNAIL: 'w_300,h_300,c_fill',
    PRODUCT: 'w_800,h_800,c_limit',
    GALLERY: 'w_1200,h_1200,c_limit'
  },

  // Search/match optimization
  MATCH_ALGORITHM: {
    BATCH_SIZE: 100,
    MIN_SCORE: 50,
    REINDEX_HOURS: 24
  }
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ social\optimizations.ts
ğŸ“Š 26 satÄ±r | 0.53 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/social/optimizations.ts
export const socialOptimizations = {
  // Image optimization
  IMAGE_SIZES: {
    thumbnail: 'w_200,h_200,c_fill',
    feed: 'w_1080,h_1080,c_limit',
    story: 'w_1080,h_1920,c_fill'
  },

  // Lazy loading
  LAZY_THRESHOLD: 0.1, // Intersection Observer threshold
  
  // Caching
  CACHE_TTL: {
    feed: 60, // 1 dakika
    comments: 30, // 30 saniye
    profile: 300 // 5 dakika
  },

  // Batch operations
  BATCH_SIZES: {
    comments: 20,
    notifications: 50,
    feed: 10
  }
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ supabase\client.ts
ğŸ“Š 19 satÄ±r | 0.44 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/supabase/client.ts
import { createClient } from '@supabase/supabase-js'

export function createBrowserClient() {
  return createClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      auth: {
        persistSession: true,
        autoRefreshToken: true,
        detectSessionInUrl: true
      }
    }
  )
}

// Default instance
export const supabase = createBrowserClient()

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ supabase\index.ts
ğŸ“Š 9 satÄ±r | 0.29 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/supabase/index.ts
// Client-side iÃ§in (browser)
export { createBrowserClient, supabase } from './client'

// Server-side iÃ§in (server components, API routes)
export { createServerClient } from './server'

// Type re-export
export type { SupabaseClient } from '@supabase/supabase-js'

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ supabase\server.ts
ğŸ“Š 14 satÄ±r | 0.38 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/supabase/server.ts - DÃœZELTÄ°LMÄ°Å (isim deÄŸiÅŸikliÄŸi)
import { createClient as createSupabaseClient } from '@supabase/supabase-js'

export function createServerClient() {
  return createSupabaseClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      auth: {
        persistSession: false,
      }
    }
  )
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ supabase.ts
ğŸ“Š 13 satÄ±r | 0.36 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/supabase.ts - GÃ¼ncellenmiÅŸ versiyon
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!
const supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!

export const supabase = createClient(supabaseUrl, supabaseKey, {
  realtime: {
    params: {
      eventsPerSecond: 10
    }
  }
})

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ types\admin.ts
ğŸ“Š 32 satÄ±r | 0.63 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/types/admin.ts
export interface AdUnit {
  id: string
  name: string
  type: 'display' | 'in-article' | 'in-feed' | 'video'
  size: string
  position: string
  status: 'active' | 'paused' | 'pending'
  revenue: number
  impressions: number
  clicks: number
  ctr: number
  created_at: string
}

export interface AdSenseConfig {
  clientId: string
  isActive: boolean
  autoAds: boolean
  adUnits: AdUnit[]
  lastSync: string
}

export interface AdminStats {
  totalUsers: number
  totalSpots: number
  totalShops: number
  activeUsers: number
  revenue: number
  adRevenue: number
  conversionRate: number
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ types.ts
ğŸ“Š 50 satÄ±r | 1.02 KB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// lib/types.ts
export interface Spot {
  id: string
  user_id: string
  title: string
  description: string
  category: string | null
  location: string | null
  image_url: string | null
  status: 'active' | 'found'
  views: number
  helps: number
  created_at: string
  updated_at: string
}

export interface Sighting {
  id: string
  spot_id: string
  spotter_id: string
  image_url: string | null
  location_description: string
  price: number | null
  notes: string | null
  created_at: string
}

export interface UserProfile {
  id: string
  email: string
  name: string | null
  avatar_url: string | null
  created_at: string
  updated_at: string
}

export interface Shop {
  id: string
  owner_id: string
  shop_name: string
  description: string | null
  address: string | null
  city: string | null
  phone: string | null
  website: string | null
  free_images_used: number
  total_images: number
  subscription_type: 'free' | 'pro' | 'business' | 'enterprise'
  created_at: string
}

================================================================================
ğŸ“Š Ã–ZET BÄ°LGÄ°LER
================================================================================
ğŸ“ Dizin: lib
ğŸ“„ Toplam Dosya: 22
ğŸ“Š Toplam SatÄ±r: 2.149
ğŸ’¾ Toplam Boyut: 0.08 MB
ğŸ“… OluÅŸturulma: 15.02.2026 03:40:23
================================================================================
